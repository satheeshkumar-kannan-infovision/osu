"use strict";(self.webpackChunkosu_app=self.webpackChunkosu_app||[]).push([[178],{6178:(e,t,n)=>{n.r(t),n.d(t,{mount:()=>lt});var r=n(3870),a=n.n(r),o=n(7929),l=n(4628),s=n(1233),i=n(9117),c=n(3361);function u(e,t,n){var a=(0,r.useState)(e||""),o=a[0],l=a[1],s=(0,r.useState)(o),i=s[0],c=s[1],u=function(e){var t=(0,r.useState)(null),n=t[0],a=t[1];return function(){var t=arguments;n&&clearTimeout(n);var r=setTimeout((function(){e.apply(void 0,t),r===n&&a(null)}),100);a(r)}}((function(e){l(e),null==t||t()}));return(0,r.useEffect)((function(){n?(i.length>n||0===i.length)&&u(i):u(i)}),[i]),{search:o,searchInput:i,setSearchInput:c}}var m=n(1415),p=n.n(m),d=n(1077),f=n(4503),h=n.n(f),g=n(5072),E=n.n(g),v=n(2553);E()(v.A,{insert:"head",singleton:!1}),v.A.locals;var y=n(2096),A=n(2488),w=n(7606),b=n(5380);function C(e){return a().createElement("div",null,a().createElement(A.A,{variant:"text",height:80}),a().createElement(A.A,{variant:"rect",height:350}))}function N(e){return a().createElement("div",{style:{width:"100%"}},a().createElement(w.A,{container:!0},a().createElement(w.A,{item:!0,md:!0},a().createElement(C,{loading:e.loading}))))}var x=(0,y.A)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),S=[200,200,200,200,200];const k=function(e){e.children,x();var t=(0,r.useState)(0),n=t[0],o=t[1],l=(0,r.useState)(!0),s=l[0],i=l[1],m=(0,r.useState)([]),f=m[0],g=m[1],E=(0,r.useState)(null),v=E[0],y=E[1],A=u(function(){var e="undefined"==typeof document?"":document.location.search;if(!e)return{};var t=e.replace(/(^\?)/,"");return JSON.parse('{"'+t.replace(/&/g,'","').replace(/=/g,'":"')+'"}',(function(e,t){return""===e?t:decodeURIComponent(t)}))}().search,(function(){o(1)})),w=A.search,C=A.searchInput,k=A.setSearchInput;return(0,r.useEffect)((function(){i(!0);var e=JSON.parse(sessionStorage.getItem("userData")).ephemeral_token;p().get("MISSING_ENV_VAR".API_URL+"/osu/rollout/history",{headers:{"x-api-key":e}}).then((function(e){e.data&&(g(e.data),i(!1)),y(null)})).catch((function(e){console.error("Error:",e),y({type:"error",message:JSON.stringify(e)}),i(!1)})).finally((function(){i(!1)}))}),[]),a().createElement("div",null,a().createElement(d.A,{style:{paddingLeft:"10px"}}),a().createElement("div",{className:"container my-5"},v&&a().createElement(b.A,{type:v.type,message:v.message,setApiError:y,className:"my-3",variant:"filled"}),s?a().createElement(N,{loading:!0}):a().createElement(c.PanelSearch,{id:"rollout-history",title:"Rollout History",isLoading:s,className:"rollout-history no-pad",items:f,filter:w,search:C,onChange:function(e){k(e)},nextPage:function(){o(n+1)},prevPage:function(){o(n-1)},goToPage:function(e){o(e)},filterRow:function(e,t){return-1!==(e.firmware_version+" "+e.chipset_name+" "+e.updated_by).toLowerCase().indexOf(t.toLowerCase())},renderRow:function(e){var t=e.updated_on,n=e.firmware_version,r=e.chipset_name,o=e.rollout_percentage,l=e.updated_by;return a().createElement(c.Row,{className:"list-item py-2 audit__item"},a().createElement("span",{style:{width:S[0]}},h()(1e3*t).format("Do MMM YYYY HH:mma")),a().createElement(c.Flex,null,l),a().createElement("span",{style:{width:S[2]}},n),a().createElement("div",{style:{width:S[3]}},r),a().createElement("div",{style:{width:S[4]}},o))},header:a().createElement(c.Row,{className:"table-header"},a().createElement("span",{style:{width:S[0]}},"Date"),a().createElement(c.Flex,null,"Updated By"),a().createElement("div",{style:{width:S[2]}},"Firmware Version"),a().createElement("div",{style:{width:S[3]}},"Chipset Name"),a().createElement("div",{style:{width:S[4]}},"Rollout Percent")),renderNoResults:a().createElement(c.FormGroup,{className:"text-center"},"No rollout history available.")})))};var R=n(3356),_=n(467),I=n(8168),L=n(4756),P=n.n(L),B=n(5192),O=n(3058),F=n(3182),M=n(652),D=n(8654),T=n(3486),H=n(384),U=n(7430),V=(0,y.A)((function(e){return{ribbon:{position:"relative",backgroundColor:function(t){return"success"===t.color?e.palette.success.main:e.palette.error.main},color:e.palette.primary.contrastText,padding:"4px 8px",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"40px",borderTopLeftRadius:"4px",borderTopRightRadius:"4px"}}}));const z=function(e){var t=e.text,n=e.color,r=V({color:n});return a().createElement("div",{className:r.ribbon},a().createElement("span",null,t))};function G(e){return a().createElement(D.A,(0,I.A)({elevation:6,variant:"filled"},e))}(0,B.A)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(M.A);var Y=(0,y.A)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:400},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}}));const W=function(e){e.children;var t=Y(),n=(0,r.useState)(""),o=n[0],l=n[1],s=(0,r.useState)(null),i=s[0],u=s[1],m=(0,r.useState)(!1),f=m[0],g=m[1],E=(0,r.useState)(null),v=E[0],y=E[1],A=function(){var e=(0,_.A)(P().mark((function e(t){var n,r,a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),y(null),u(null),e.prev=3,n=JSON.parse(sessionStorage.getItem("userData")),r=n.ephemeral_token,e.next=8,p().get("MISSING_ENV_VAR".API_URL+"/osu/rollout/check",{params:{esn:t},headers:{"x-api-key":r}});case 8:a=e.sent,u(a.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0.response?y(e.t0.response.data):e.t0.request?y({error:"No response received"}):y({error:"Request failed"});case 15:return e.prev=15,g(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}();return a().createElement("div",null,a().createElement(d.A,{style:{paddingLeft:"10px"}}),a().createElement("div",{className:"container my-5"},a().createElement("div",{className:"panel panel--flat panel-without-heading"},a().createElement("div",{className:"panel-content"},a().createElement(c.FormGroup,{className:"mb-4 mr-3 ml-3"},a().createElement(c.InputGroup,{inputProps:{className:"full-width mb-2",name:"hashESN"},title:"Device ESN:",placeholder:"e.g. LTABCDEF1234567",type:"text",value:o,onChange:function(e){return l(e.target.value.trim())}}),a().createElement("div",{className:"text-center"},a().createElement(c.Button,{disabled:!o||""===o.trim(),onClick:function(){return A(o)}},"Check Info"))),i&&a().createElement(T.A,{className:t.root},v?null:i.is_canary?a().createElement(z,{text:"Canary Active",color:"success"}):a().createElement(z,{text:"Canary InActive",color:"error"}),a().createElement("li",{key:"section",className:t.listSection},a().createElement("ul",{className:t.ul},["Firmware Version","SOC Name","Chipset Name","Model","Percentage","Rollout Percentage","Updated On"].map((function(e,t){return a().createElement(a().Fragment,null,"Firmware Version"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.firmwareVersion))})),"SOC Name"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.soc_name))})),"Chipset Name"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.chipset_name))})),"Model"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.model))})),"Percentage"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.percentage))})),"Rollout Percentage"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.rollout_percentage))})),"Updated On"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,h()(1e3*i.updated_on).format("Do MMM YYYY HH:mma")))})))}))))),v&&a().createElement("div",{style:{padding:"1rem 0.75rem"}},a().createElement(G,{severity:"error"},v.error)))),f&&a().createElement("div",null,a().createElement(O.A,{className:t.backdrop,open:!0},a().createElement(F.A,null)))))};var j,J=n(2052),Z=n(1620),q=n.n(Z);const K=((j=function(e){function t(){return e.apply(this,arguments)||this}return(0,J.A)(t,e),t.prototype.render=function(){return q().createElement("svg",{className:"btn__icon",width:"460",height:"512",viewBox:"0 0 460 512",xmlns:"http://www.w3.org/2000/svg"},q().createElement("g",{id:"Page-1",fill:"none",fillRule:"evenodd"},q().createElement("g",{id:"bin",fill:"#D9534F",fillRule:"nonzero"},q().createElement("path",{d:"M441.378906,70.621094 L335.449219,70.621094 L335.449219,35.929688 C335.449219,16.121094 319.328125,0 299.519531,0 L159.515625,0 C139.707031,0 123.585938,16.121094 123.585938,35.929688 L123.585938,70.621094 L17.65625,70.621094 C7.90625,70.621094 -2.84217094e-14,78.515625 -2.84217094e-14,88.277344 C-2.84217094e-14,98.035156 7.90625,105.929688 17.65625,105.929688 L36.0625,105.929688 L50.714844,442.898438 C52.394531,481.65625 84.101562,512 122.890625,512 L336.148438,512 C374.933594,512 406.636719,481.65625 408.320312,442.898438 L422.972656,105.929688 L441.378906,105.929688 C451.128906,105.929688 459.035156,98.035156 459.035156,88.277344 C459.035156,78.515625 451.128906,70.621094 441.378906,70.621094 Z M159.515625,35.308594 L299.519531,35.308594 L300.136719,70.621094 L159.105469,70.621094 L159.515625,35.308594 Z M373.042969,441.378906 C372.179688,461.171875 355.976562,476.691406 336.144531,476.691406 L122.886719,476.691406 C103.058594,476.691406 86.851562,461.171875 85.988281,441.378906 L71.402344,105.929688 L387.628906,105.929688 L373.042969,441.378906 Z",id:"Shape"}),q().createElement("path",{d:"M229.515625,406.070312 C219.765625,406.070312 211.863281,398.171875 211.863281,388.414062 L211.863281,176.550781 C211.863281,166.792969 219.765625,158.898438 229.515625,158.898438 C239.265625,158.898438 247.171875,166.792969 247.171875,176.550781 L247.171875,388.414062 C247.171875,398.171875 239.265625,406.070312 229.515625,406.070312 Z",id:"Shape"}),q().createElement("path",{d:"M300.136719,406.070312 C290.386719,406.070312 282.484375,398.171875 282.484375,388.414062 L282.484375,176.550781 C282.484375,166.792969 290.386719,158.898438 300.136719,158.898438 C309.886719,158.898438 317.792969,166.792969 317.792969,176.550781 L317.792969,388.414062 C317.792969,398.171875 309.886719,406.070312 300.136719,406.070312 Z",id:"Shape"}),q().createElement("path",{d:"M158.898438,406.070312 C149.144531,406.070312 141.242188,398.171875 141.242188,388.414062 L141.242188,176.550781 C141.242188,166.792969 149.144531,158.898438 158.898438,158.898438 C168.648438,158.898438 176.550781,166.792969 176.550781,176.550781 L176.550781,388.414062 C176.550781,398.171875 168.648438,406.070312 158.898438,406.070312 Z",id:"Shape"}))))},t}(Z.PureComponent)).displayName="RemoveIcon",j);var X,Q=n(3528),ee=n(7941),te=n(5850),ne=n.n(te),re=n(8550),ae=n.n(re),oe=n(3222),le=n.n(oe),se=(X=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).toggle=function(){r.state.hasFocus&&(new Date).valueOf()-r.state.updated>200&&r.focusChanged(!r.state.hasFocus)},r.focusChanged=function(e){e!==r.state.hasFocus&&(r.setState({hasFocus:e,updated:(new Date).valueOf()}),r.props.onFocusChanged(e))},r._clickDocument=function(e){var t=ae().findDOMNode(r);e.target===t||$(t).has(e.target).length?r.focusChanged(!0):r.focusChanged(!1)},r.state={hasFocus:!1},r}(0,J.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=ae().findDOMNode(this);this.props.isHover?(t.addEventListener("mouseover",(function(){return e.focusChanged(!0)}),!1),t.addEventListener("mouseleave",(function(){return e.focusChanged(!1)}),!1)):window.addEventListener("mousedown",this._clickDocument,!1)},n.componentWillUnmount=function(){var e=this,t=ae().findDOMNode(this);this.props.isHover?(t.removeEventListener("mouseover",(function(){return e.focusChanged(!0)}),!1),t.removeEventListener("mouseleave",(function(){return e.focusChanged(!1)}),!1)):window.removeEventListener("mousedown",this._clickDocument,!1)},n.render=function(){return this.props.children},t}(q().Component),X.displayName="FocusMonitor",X);se.propTypes={children:le().node.isRequired,isHover:le().bool,onFocusChanged:le().func.isRequired};const ie=se;var ce,ue=(ce=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this)._focusChanged=function(e){return r.setState({isActive:e})},r.toggle=function(){r.focus.toggle()},r.isActive=function(){return r.state.isActive},r.state={isActive:!1},r}return(0,J.A)(t,e),t.prototype.render=function(){var e=this,t=ne()({in:this.state.isActive,popover:!0},this.props.contentClassName,this.props.className);return q().createElement(ie,{ref:function(t){return e.focus=t},onFocusChanged:this._focusChanged,isHover:this.props.isHover},q().createElement("div",{className:this.props.className},this.props.renderTitle(this.toggle,this.state.isActive),q().createElement("div",{className:"popover-inner"},q().createElement("div",{className:""+t},this.props.children(this.toggle)))))},t}(q().Component),ce.displayName="Popover",ce);ue.propTypes={children:le().any,className:le().string,isHover:le().bool,renderTitle:le().func};const me=ue;var pe,de=n(3957),fe=n.n(de),he=(pe=function(e){function t(){return e.apply(this,arguments)||this}(0,J.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.propTypes},n.render=function(){return q().createElement("div",{className:"panel panel-default "+(this.props.className||"")+" "+(this.props.title?"":"mt-2")},(this.props.title||this.props.action)&&q().createElement("div",{className:"panel-heading"},q().createElement(Row,{space:!0},q().createElement(Row,{className:"flex-1"},this.props.icon&&q().createElement("span",{className:"panel-icon"},q().createElement("span",{className:"icon "+this.props.icon})),q().createElement(Flex,{className:"m-b-0 title"},this.props.title)),this.props.action)),q().createElement("div",{className:"panel-content"},this.props.children,this.props.renderFooter&&this.props.renderFooter()))},t}(Z.PureComponent),pe.displayName="Panel",pe);he.displayName="Panel",he.propTypes={children:le().node,icon:le().string,title:le().any};const ge=he;var Ee,ve=(Ee=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this).renderContainer=function(e){var t=function(t){var n=t.index,a=t.style;return q().createElement("div",{style:a},r.props.renderRow(e[n]))};return e&&e.length>100&&r.props.itemHeight?q().createElement(ee.Y1,{style:{overflowX:"hidden"},height:10*r.props.itemHeight,itemCount:e.length,itemSize:r.props.itemHeight,width:"100%"},t):e.map(r.props.renderRow)};var a=fe().find(fe().get(t,"sorting",[]),{default:!0});return r.state={sortBy:a?a.value:null,sortOrder:a?a.order:null},r}(0,J.A)(t,e);var n=t.prototype;return n.filter=function(){var e=this.props.search||this.state.search||"";this.state.exact&&(e=e.replace(/^"+|"+$/g,""));var t=this.props.filter,n=this.props,r=n.filterRow,a=n.items;return r&&(e||t)?this.sort(fe().filter(a,(function(t,n){return r(t,e.toLowerCase(),n)}))):this.sort(a)},n.sort=function(e){var t=this.state,n=t.sortBy,r=t.sortOrder;return n?fe().orderBy(e,[n],[r]):e},n.onSort=function(e,t){var n=this;e.preventDefault();var r=this.state,a=r.sortBy,o=r.sortOrder;t.value===a?this.setState({sortOrder:"asc"===o?"desc":"asc"},(function(){n.props.onSortChange&&n.props.onSortChange({sortBy:n.state.sortBy,sortOrder:n.state.sortOrder})})):this.setState({sortBy:t.value,sortOrder:t.order},(function(){n.props.onSortChange&&n.props.onSortChange({sortBy:n.state.sortBy,sortOrder:n.state.sortOrder})}))},n.render=function(){var e,t,n=this,r=this.state,a=r.sortBy,o=r.sortOrder,l=this.props,s=l.action,i=l.goToPage,c=l.isLoading,u=l.items,m=l.nextPage,p=l.paging,d=l.prevPage,f=l.renderNoResults,h=l.sorting,g=this.filter(u),E=fe().find(h,{value:a}),v="",y=this.props.id;"features-list"==y&&(v="Search for flags"),"segment-list"==y&&(v="Search for segments"),"user-traits-list"==y&&(v="Search for traits"),"users-list"==y&&(v="Search with device id"),"rollout-history"==y&&(v="Search");var A=this.props.search||this.state.search||"";return this.state.exact&&(A=A.replace(/^"+|"+$/g,"")),A||g&&g.length||this.props.isLoading||this.props.renderSearchWithNoResults?q().createElement(ge,{className:this.props.className,title:this.props.title,icon:this.props.icon,renderFooter:this.props.renderFooter,action:this.props.filterRow||this.props.sorting?q().createElement(Row,null,!!this.props.sorting&&q().createElement(Row,{className:"mr-3 relative"},q().createElement(me,{renderTitle:function(e){return q().createElement("a",{onClick:e},q().createElement("div",{className:"flex-column ion ion-md-funnel"}),E?E.label:"Unsorted")}},(function(e){return q().createElement("div",{className:"popover-inner__content"},n.props.sorting.map((function(t,r){return q().createElement("a",{key:r,className:"popover-bt__list-item",href:"#",onClick:function(r){n.onSort(r,t),e()}},q().createElement(Row,{space:!0},q().createElement(Row,{className:"flex-1"},t.label),E&&E.value===t.value&&q().createElement(Row,null,q().createElement("div",{className:"flex-column ion "+("asc"===o?"ion-ios-arrow-up":"ion-ios-arrow-down")}))))})))}))),!!this.props.filterRow&&q().createElement(Row,null,this.props.showExactFilter&&q().createElement("div",{className:"mr-2",style:{width:200}},q().createElement(Select,{className:"select-sm",styles:{control:function(e){return(0,Q.A)({},e,{"&:hover":{borderColor:"$bt-brand-secondary"},border:"1px solid $bt-brand-secondary",height:30})}},onChange:function(e){n.setState({exact:"Exact"===e.label}),n.props.search&&n.props.onChange&&n.props.onChange(n.state.exact?n.props.search.replace(/^"+|"+$/g,""):'"'+n.props.search+'"')},value:{label:this.state.exact?"Exact":this.props.filterLabel||"Contains"},options:[{label:"Contains",value:"Contains"},{label:"Exact",value:"Exact"}]})),q().createElement(Row,{onClick:function(){return n.input.focus()}},q().createElement("input",{ref:function(e){return n.input=e},onBlur:this.props.onBlur,onChange:function(e){var t=e.target.value;n.props.onChange?n.props.onChange(n.state.exact?'"'+t+'"':t):n.setState({search:e.target.value})},style:{padding:"0.5rem"},type:"text",value:A,className:"pl-4",placeholder:v}),q().createElement("span",{style:{marginLeft:10,position:"absolute"},className:"icon ion-ios-search"})))):s||null},this.props.searchPanel,q().createElement("div",{id:this.props.id,className:"search-list",style:c?{opacity:.5}:{}},!!p&&q().createElement(Paging,{paging:p,isLoading:c,nextPage:m,prevPage:d,goToPage:i}),this.props.header,!this.props.isLoading||g&&u?g&&g.length?this.renderContainer(g):f&&!A?f:q().createElement(Column,null,!c&&q().createElement("div",{className:"mx-2 pt-1 pb-2"},(null==(e=(t=this.props).noResultsText)?void 0:e.call(t,A))||q().createElement(q().Fragment,null,"No results ",A&&q().createElement("span",null,"for",q().createElement("strong",null,' "'+A+'"'))))):q().createElement("div",{className:"text-center"},q().createElement(Loader,null))),!!p&&g&&g.length>10&&q().createElement(Paging,{paging:p,isLoading:c,goToPage:i})):f||null},t}(Z.Component),Ee.displayName="PanelSearch",Ee.propTypes={action:le().node,filterRow:le().func,goToPage:le().func,isLoading:le().bool,items:le().any,nextPage:le().func,noResultsText:le().string,paging:le().object,renderNoResults:le().any,renderRow:le().func,search:le().string,searchPanel:le().node,sorting:le().array,title:le().node},Ee);const ye=ve;var Ae=n(8506),we=n(710);const be=function(e){var t=e.loading,n=e.isOpen,r=e.identifier,o=e.onClose,l=e.onSubmit;return a().createElement(we.A,{title:"Remove Identity Override",text:a().createElement("span",null,"Are you sure you want to remove the ",a().createElement("strong",null,r)," identity override?"),isOpen:n,loading:t,handleClose:o,handleSubmit:function(){return l(r)}})};var Ce="MISSING_ENV_VAR".API_URL,Ne=p().create({baseURL:Ce});Ne.interceptors.request.use((function(e){var t;return e.headers["x-api-key"]=(t=JSON.parse(sessionStorage.getItem("userData")))?t.ephemeral_token:null,e}),(function(e){return console.error("Error:",e),Promise.reject(e)}));var xe="/osu/overrides",Se=function(){var e=(0,_.A)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.get(xe).then((function(e){return e.data})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(0,_.A)(P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.post(xe,t).then((function(e){return e})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=(0,_.A)(P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.delete(xe+"/"+t).then((function(e){return e})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=(0,_.A)(P().mark((function e(t){var n;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=""),n={limit:100},t&&(n.lastEvaluatedKey=encodeURIComponent(t)),e.next=5,Ne.get(xe+"/history",{params:n}).then((function(e){return e.data})).catch((function(e){throw e}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=n(8587),Le=n(9312),Pe=n(8306),Be=n(8448),Oe=n(4630),Fe=["label","options","value","onChange"],Me=(0,y.A)((function(e){return{dropdown:{margin:e.spacing(1),minWidth:200},label:{color:e.palette.text.primary},menuItem:{"&:hover":{backgroundColor:e.palette.action.hover}}}}));function De(e){var t=e.label,n=e.options,r=e.value,o=e.onChange,l=(0,Ie.A)(e,Fe),s=Me();return a().createElement(Le.A,(0,I.A)({className:s.dropdown,fullWidth:!0},l),a().createElement(Pe.A,{className:s.label,id:t+"-label"},t),a().createElement(Be.A,{labelId:t+"-label",value:r,onChange:o,label:t},n.map((function(e){return a().createElement(Oe.A,{key:e.value,value:e.value,className:s.menuItem},e.label)}))))}var Te=n(5014),He=n(5834),Ue=n(820),Ve=n(2572),ze=n(3845);E()(ze.A,{insert:"head",singleton:!1}),ze.A.locals;var Ge=[200,200];function Ye(){return Math.round(20*Math.random())-10}function We(){var e=50+Ye(),t=50+Ye();return{top:e+"%",left:t+"%",transform:"translate(-"+e+"%, -"+t+"%)"}}var je=(0,y.A)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(4),outline:"none"}}}));const Je=function(){var e=je(),t=(0,r.useState)(!1),n=t[0],o=t[1],l=(0,r.useState)(!1),s=l[0],i=l[1],m=(0,r.useState)([]),p=(m[0],m[1]),f=(0,r.useState)([{identifier:"esn1",group:["group1","group2","group3"]},{identifier:"esnDemo",group:["group21","group22","group23"]}]),g=f[0],E=f[1],v=(0,r.useState)(null),y=v[0],A=v[1],w=(0,r.useState)(!1),C=w[0],N=w[1],x=(0,r.useState)(!1),S=(x[0],x[1]),k=(0,r.useState)(0),R=k[0],_=k[1],I=(0,r.useState)([]),L=I[0],P=I[1],B=(0,r.useState)(null),O=B[0],F=B[1],M=((0,r.useState)(We)[0],(0,r.useState)(!1)),D=M[0],V=M[1],z=(0,r.useState)(null),G=z[0],Y=z[1],W=(0,r.useState)(!1),j=(W[0],W[1]),J=(0,r.useState)("option0"),Z=J[0],$=J[1],q=(0,r.useState)(!1),X=(q[0],q[1],(0,r.useState)("")),Q=X[0],ee=X[1],te=(0,r.useState)(-1),ne=(te[0],te[1],(0,r.useState)("")),re=(ne[0],ne[1],(0,r.useState)(!0)),ae=(re[0],re[1]),oe=(0,r.useState)(!0),le=oe[0],se=oe[1],ie=(0,r.useState)(!1),ce=(ie[0],ie[1]),ue=(0,r.useState)([{value:"option0",label:"None"}]),me=ue[0],pe=ue[1],de=function(){Se().then((function(e){E(e),p(e)})).catch((function(e){console.error("Error:",e),e.response?F({type:"error",message:e.response.data}):F({type:"error",message:JSON.stringify(e)})})).finally((function(){return o(!1)}))},fe=function(e){i(!0);var t=[{esn:"esn1",fw_override_info:{fw_version:"1.0.0",soc_name:"soc1",chipset_name:"SD888",model:"Model 1",percentage:"80%",rollout_percentage:"20%",updated_on:"2024-01-01"}},{esn:"esnDemo",fw_override_info:{fw_version:"2.0.0",soc_name:"soc1",chipset_name:"2100",model:"Model 2",percentage:"90%",rollout_percentage:"10%",updated_on:"2024-02-01"}}].find((function(t){return t.esn===e}));t?Y(t.fw_override_info):(console.error("ESN not found"),Y(null)),V(!0),o(!0),setTimeout((function(){o(!1)}),2e3),i(!1)};(0,r.useEffect)((function(){o(!0),de()}),[]),(0,r.useEffect)((function(){ae(!Q.trim()),se(!0),ce(!1)}),[Q]);var he=u(function(){var e="undefined"==typeof document?"1":document.location.search;if(!e)return{};var t=e.replace(/(^\?)/,"1");return JSON.parse('{"'+t.replace(/&/g,'","').replace(/=/g,'":"')+'"}',(function(e,t){return"1"===e?t:decodeURIComponent(t)}))}().search,(function(){_(1)})),ge=he.search,Ee=he.searchInput,ve=he.setSearchInput,we="option0"===Z;return(0,r.useEffect)((function(){console.log("Current count of addedESN:",L.length)}),[L]),(0,r.useEffect)((function(){D||o(!1)}),[D]),a().createElement("div",null,a().createElement(d.A,{style:{paddingLeft:"10px"}}),a().createElement(Te.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:D,onClose:function(){Y(null),V(!1)},closeAfterTransition:!0,BackdropComponent:Ae.Backdrop,BackdropProps:{timeout:500}},a().createElement(He.A,{in:D},a().createElement("div",{className:e.paper},G&&a().createElement(T.A,{className:e.root},a().createElement("li",{key:"section",className:e.listSection},a().createElement("ul",{className:e.ul},["Firmware Version","SOC Name","Chipset Name","Model","Percentage","Rollout Percentage","Updated On"].map((function(e,t){return a().createElement(a().Fragment,null,"Firmware Version"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.fw_version))})),"SOC Name"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.soc_name))})),"Chipset Name"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.chipset_name))})),"Model"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.model))})),"Percentage"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.percentage))})),"Rollout Percentage"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.rollout_percentage))})),"Updated On"===e&&a().createElement(H.A,{key:"item-"+t},a().createElement(U.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,h()(G.updated_on).isValid()?h()(G.updated_on).format("Do MMM YYYY HH:mma"):"Invalid Date"))})))})))))))),a().createElement("div",{className:"container my-5 px-5 py-3",style:{background:"white"}},O&&a().createElement(b.A,{type:O.type,message:O.message,setApiError:F,className:"my-3",variant:"filled"}),a().createElement("h2",{className:"text-center"},"Identity Overrides"),a().createElement("div",{className:"mb-3 mt-5"},a().createElement("div",{className:"mb-3 mt-5 flex flex-row",style:{columnGap:"15px"}},a().createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",alignItems:"center",columnGap:"15px"}},a().createElement(a().Fragment,null,a().createElement(Ve.A,{id:"outlined-basic",label:"Search ESN",variant:"outlined",value:Q,onChange:function(e){var t=e.target.value;ee(t),console.log("Search Input: ",t);var n=g.find((function(e){return e.identifier===t}));if(console.log("selectedOverride",n),n){console.log("Found matching override: ",n);var r=n.group.map((function(e){return{value:e,label:e.charAt(0).toUpperCase()+e.slice(1)}}));r.unshift({value:"option0",label:"None"}),console.log("New Options: ",r),pe(r),se(!1),console.log("Dropdown enabled, options updated.")}else console.log("No matching ESN found. Resetting options."),pe([{value:"option0",label:"None"}]),se(!0),console.log("Dropdown disabled, default option set.")},fullWidth:!0}),a().createElement(c.Button,{className:"btn btn-primary",onClick:function(){if(Q.trim()){o(!0);var e=g.findIndex((function(e){return e.identifier===Q.trim()}));setTimeout((function(){-1!==e?(console.log("Found our esn"),i(!1),F({type:"success",message:"ESN found."}),ce(!0),se(!1)):(F({type:"error",message:"ESN not found!"}),ce(!1),se(!0)),j(!0),o(!1)}),2e3)}},startIcon:n?a().createElement(Ae.CircularProgress,{size:24,color:"inherit"}):null,disabled:!Q.trim()||n},"Go"))),a().createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",alignItems:"center",columnGap:"15px",justifyContent:"flex-end"}},a().createElement(a().Fragment,null,a().createElement(De,{label:"Associated Firmware Groups",value:Z,onChange:function(e){$(e.target.value),console.log("Value",value)},options:me,disabled:le}),a().createElement(c.Button,{className:"btn btn-primary",disabled:we,onClick:function(){i(!0),ee(""),pe([{value:"option0",label:"None"}]),$("option0"),se(!0),F(null),P([]),S(!0),ke(L).then((function(){S(!1),P([]),de(),i(!1),F({type:"success",message:"ESN overridden successfully."})})).catch((function(e){i(!1),F({type:"success",message:"ESN overridden successfully."})}))}},"Add ESN")))),a().createElement(ye,{id:"esn-overrides",title:"Overrides",isLoading:n,className:"esn-overrides no-pad",items:g.length?g:null,filter:ge,search:Ee,onChange:function(e){ve(e)},nextPage:function(){_(R+1)},prevPage:function(){_(R-1)},goToPage:function(e){_(e)},filterRow:function(e,t){return-1!==(""+e.identifier).toLowerCase().indexOf(t.toLowerCase())},renderRow:function(e,t){return r=t,o=e.identifier,l=e.group[0],a().createElement(c.Row,{className:"list-item py-2 audit__item",key:r},a().createElement("div",{style:{width:Ge[1]}},o),a().createElement("div",{style:{width:Ge[1]}},a().createElement("div",null,l)),a().createElement(c.Flex,{style:{alignItems:"center",flexDirection:"row",justifyContent:"flex-end"}},a().createElement(Ue.A,{fontSize:"large",color:"primary",onClick:function(){if(ge&&""!==ge){var e=g.findIndex((function(e){return e.identifier===ge}));fe(g[e].identifier)}else fe(g[r].identifier)},style:{cursor:"pointer"}}),a().createElement(c.Button,{className:"btn btn--with-icon btn--remove",disabled:n,onClick:function(){if(ge&&""!==ge){var e=g.findIndex((function(e){return e.identifier===ge}));N(!0),A(g[e].identifier)}else N(!0),A(g[r].identifier)}},a().createElement(K,null))));var r,o,l},header:a().createElement(a().Fragment,null,a().createElement(c.Row,{className:"table-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:"2px"}},a().createElement("span",{style:{width:"20%",marginRight:"0px"}},"ESN Value"),a().createElement("span",{style:{width:"20%",marginRight:"4px"}},"Group Info"),a().createElement(c.Flex,null))),renderNoResults:a().createElement(c.FormGroup,{className:"text-center"},"No active device overrides.")}),s&&a().createElement("div",null,a().createElement(Ae.Backdrop,{className:e.backdrop,open:!0},a().createElement(Ae.CircularProgress,null))))),a().createElement(be,{isOpen:C,loading:n,identifier:y,onClose:function(){return N(!1)},onSubmit:function(e){N(!1),i(!0),A(e),Re(e).then((function(){F({type:"success",message:"ESN override removed successfully."}),de()})).catch((function(e){console.error("Error:",e),e.response?F({type:"error",message:e.response.data.error}):F({type:"error",message:JSON.stringify(e)})})).finally((function(){i(!1)}))}}))};var Ze=n(6601),$e=n.n(Ze),qe=n(5594),Ke=n(5479),Xe=n(9764),Qe=n(648),et=n(4896),tt=n(3148),nt=n(6746);const rt=function(){var e=(0,r.useState)(null),t=e[0],n=e[1],o=(0,r.useState)(!0),l=o[0],s=o[1],i=(0,r.useState)(""),u=i[0],m=i[1],p=(0,r.useState)([]),f=p[0],h=p[1],g=(0,r.useState)(""),E=g[0],v=g[1],y=(0,r.useState)([]),A=y[0],w=y[1],b=new($e())(f,{keys:["chipset_name","firmware_version","rollout_percentage","soc_name","updated_by"],findAllMatches:!0,threshold:.3});return(0,r.useEffect)((function(){_e().then((function(e){h(e.items),w(e.items),n(e.lastEvaluatedKey)})).catch((function(e){var t,n;return v("string"==typeof(null==(t=e.response)?void 0:t.data)?null==(n=e.response)?void 0:n.data:e.message)})).finally((function(){return s(!1)}))}),[]),(0,r.useEffect)((function(){var e=setTimeout((function(){v("")}),5e3);return function(){clearTimeout(e)}}),[E]),(0,r.useEffect)((function(){if(""!==u){var e=b.search(u);w(e.map((function(e){return e.item})))}else w(f)}),[u]),a().createElement("div",null,a().createElement(d.A,{style:{paddingLeft:"10px"}}),a().createElement("div",{className:"container my-5 px-5 py-3",style:{background:"white"}},a().createElement("h2",{className:"text-center"},"Identity Overrides History"),a().createElement(c.Row,null,a().createElement(c.Flex,null,a().createElement(c.InputGroup,{inputProps:{className:"full-width mb-2",name:"overrides-history-search"},title:"Search for history",placeholder:"Search for history",type:"text",value:u,onChange:function(e){m(e.target.value)}}))),E.length>0&&a().createElement(c.Row,{className:"mb-1"},a().createElement(c.Flex,null,a().createElement(D.A,{severity:"error"},E))),a().createElement(Qe.A,{component:tt.A},a().createElement(Xe.A,{size:"small","aria-label":"identity-overrides-history-table"},a().createElement(Ke.A,null,a().createElement(qe.A,null,a().createElement(M.A,{align:"left"},"Identifier"),a().createElement(M.A,{align:"right"},"Updated_by"),a().createElement(M.A,{align:"right"},"Action"),a().createElement(M.A,{align:"right"},"Updated"))),a().createElement(et.A,null,A.map((function(e,t){return a().createElement(qe.A,{key:t},a().createElement(M.A,{component:"th",scope:"row"},e.identifier),a().createElement(M.A,{align:"right",style:{width:"200px"}},e.updated_by),a().createElement(M.A,{align:"right",style:{width:"100px"}},e.action),a().createElement(M.A,{align:"right",style:{width:"175px"}},new Date(1e3*e.updated_on).toLocaleString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})))}))))),0!==A.length&&a().createElement("div",{className:"flex justify-content-center mt-2"},a().createElement(nt.A,{disabled:l||null===t,color:"primary",onClick:function(){return s(!0),void _e(encodeURIComponent(JSON.stringify(t))).then((function(e){var t=[].concat(f,e.items);h(t),w(t),n(e.lastEvaluatedKey)})).catch((function(e){var t,n;return v("string"==typeof(null==(t=e.response)?void 0:t.data)?null==(n=e.response)?void 0:n.data:e.message)})).finally((function(){return s(!1)}))}},"Show more"," ",l&&a().createElement(F.A,{size:20})))))};var at=(0,s.A)({productionPrefix:"dl"});const ot=function(e){var t=e.history;return a().createElement("div",null,a().createElement(i.Ay,{generateClassName:at},a().createElement(l.Router,{history:t},a().createElement(l.Switch,null,a().createElement(l.Route,{path:"/",exact:!0,component:R.default}),a().createElement(l.Route,{path:"/rollout-history",component:k}),a().createElement(l.Route,{path:"/hash-esn",component:W}),a().createElement(l.Route,{path:"/target-devices",component:W}),a().createElement(l.Route,{path:"/overrides",component:Je}),a().createElement(l.Route,{path:"/overrides-history",component:rt})))))};var lt=function(e,t){var n=t.onNavigate,r=t.defaultHistory,l=t.initialPath,s=r||(0,o.sC)({initialEntries:[l]});return n&&s.listen(n),ReactDOM.render(a().createElement(ot,{history:s}),e),{onParentNavigate:function(e){var t=e.pathname;s.location.pathname!==t&&s.push(t)}}}},3845:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(4991),a=n.n(r),o=n(6314),l=n.n(o)()(a());l.push([e.id,'.override-row:first-child {\n  border-top: 1px solid #e0e0e0;\n}\n\n.override-row {\n    background: white;\n    display: grid;\n    grid-template-columns: 2fr 50px;\n    padding-left: 15px;\n    align-items: center;\n    border-bottom: 1px solid #e0e0e0;\n}\n\n.overrides-search-bar> .input-container {\n    width: 100%;\n}\n\n.add-esn-block  [role="combobox"] {\n  width: 100%;\n}\n',"",{version:3,sources:["webpack://./src/components/IdentityOverrides/style.css"],names:[],mappings:"AAAA;EACE,6BAA6B;AAC/B;;AAEA;IACI,iBAAiB;IACjB,aAAa;IACb,+BAA+B;IAC/B,kBAAkB;IAClB,mBAAmB;IACnB,gCAAgC;AACpC;;AAEA;IACI,WAAW;AACf;;AAEA;EACE,WAAW;AACb",sourcesContent:['.override-row:first-child {\n  border-top: 1px solid #e0e0e0;\n}\n\n.override-row {\n    background: white;\n    display: grid;\n    grid-template-columns: 2fr 50px;\n    padding-left: 15px;\n    align-items: center;\n    border-bottom: 1px solid #e0e0e0;\n}\n\n.overrides-search-bar> .input-container {\n    width: 100%;\n}\n\n.add-esn-block  [role="combobox"] {\n  width: 100%;\n}\n'],sourceRoot:""}]);const s=l},2553:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(4991),a=n.n(r),o=n(6314),l=n.n(o)()(a());l.push([e.id,".panel.panel-default.no-pad.rollout-history .panel-content {\n    max-height: 65vh;\n    overflow: scroll;\n}","",{version:3,sources:["webpack://./src/components/RolloutHistory.css"],names:[],mappings:"AAAA;IACI,gBAAgB;IAChB,gBAAgB;AACpB",sourcesContent:[".panel.panel-default.no-pad.rollout-history .panel-content {\n    max-height: 65vh;\n    overflow: scroll;\n}"],sourceRoot:""}]);const s=l}}]);
//# sourceMappingURL=178.4e0b8c3d690893353659.js.map