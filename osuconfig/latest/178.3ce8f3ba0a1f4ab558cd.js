"use strict";(self.webpackChunkosu_app=self.webpackChunkosu_app||[]).push([[178],{6178:(e,t,n)=>{n.r(t),n.d(t,{mount:()=>it});var r=n(3870),a=n.n(r),o=n(9966),l=n.n(o),s=n(7929),i=n(4628),c=n(1233),u=n(9117),m=n(3361);function p(e,t,n){var a=(0,r.useState)(e||""),o=a[0],l=a[1],s=(0,r.useState)(o),i=s[0],c=s[1],u=function(e){var t=(0,r.useState)(null),n=t[0],a=t[1];return function(){var t=arguments;n&&clearTimeout(n);var r=setTimeout((function(){e.apply(void 0,t),r===n&&a(null)}),100);a(r)}}((function(e){l(e),null==t||t()}));return(0,r.useEffect)((function(){n?(i.length>n||0===i.length)&&u(i):u(i)}),[i]),{search:o,searchInput:i,setSearchInput:c}}var d=n(1415),f=n.n(d),h=n(1077),g=n(4503),E=n.n(g),v=n(5072),y=n.n(v),A=n(2553);y()(A.A,{insert:"head",singleton:!1}),A.A.locals;var w=n(2096),b=n(2488),C=n(7606),N=n(5380);function x(e){return a().createElement("div",null,a().createElement(b.A,{variant:"text",height:80}),a().createElement(b.A,{variant:"rect",height:350}))}function S(e){return a().createElement("div",{style:{width:"100%"}},a().createElement(C.A,{container:!0},a().createElement(C.A,{item:!0,md:!0},a().createElement(x,{loading:e.loading}))))}var k=(0,w.A)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),R=[200,200,200,200,200];const _=function(e){e.children,k();var t=(0,r.useState)(0),n=t[0],o=t[1],l=(0,r.useState)(!0),s=l[0],i=l[1],c=(0,r.useState)([]),u=c[0],d=c[1],g=(0,r.useState)(null),v=g[0],y=g[1],A=p(function(){var e="undefined"==typeof document?"":document.location.search;if(!e)return{};var t=e.replace(/(^\?)/,"");return JSON.parse('{"'+t.replace(/&/g,'","').replace(/=/g,'":"')+'"}',(function(e,t){return""===e?t:decodeURIComponent(t)}))}().search,(function(){o(1)})),w=A.search,b=A.searchInput,C=A.setSearchInput;return(0,r.useEffect)((function(){i(!0);var e=JSON.parse(sessionStorage.getItem("userData")).ephemeral_token;f().get("MISSING_ENV_VAR".API_URL+"/osu/rollout/history",{headers:{"x-api-key":e}}).then((function(e){e.data&&(d(e.data),i(!1)),y(null)})).catch((function(e){console.error("Error:",e),y({type:"error",message:JSON.stringify(e)}),i(!1)})).finally((function(){i(!1)}))}),[]),a().createElement("div",null,a().createElement(h.A,{style:{paddingLeft:"10px"}}),a().createElement("div",{className:"container my-5"},v&&a().createElement(N.A,{type:v.type,message:v.message,setApiError:y,className:"my-3",variant:"filled"}),s?a().createElement(S,{loading:!0}):a().createElement(m.PanelSearch,{id:"rollout-history",title:"Rollout History",isLoading:s,className:"rollout-history no-pad",items:u,filter:w,search:b,onChange:function(e){C(e)},nextPage:function(){o(n+1)},prevPage:function(){o(n-1)},goToPage:function(e){o(e)},filterRow:function(e,t){return-1!==(e.firmware_version+" "+e.chipset_name+" "+e.updated_by).toLowerCase().indexOf(t.toLowerCase())},renderRow:function(e){var t=e.updated_on,n=e.firmware_version,r=e.chipset_name,o=e.rollout_percentage,l=e.updated_by;return a().createElement(m.Row,{className:"list-item py-2 audit__item"},a().createElement("span",{style:{width:R[0]}},E()(1e3*t).format("Do MMM YYYY HH:mma")),a().createElement(m.Flex,null,l),a().createElement("span",{style:{width:R[2]}},n),a().createElement("div",{style:{width:R[3]}},r),a().createElement("div",{style:{width:R[4]}},o))},header:a().createElement(m.Row,{className:"table-header"},a().createElement("span",{style:{width:R[0]}},"Date"),a().createElement(m.Flex,null,"Updated By"),a().createElement("div",{style:{width:R[2]}},"Firmware Version"),a().createElement("div",{style:{width:R[3]}},"Chipset Name"),a().createElement("div",{style:{width:R[4]}},"Rollout Percent")),renderNoResults:a().createElement(m.FormGroup,{className:"text-center"},"No rollout history available.")})))};var I=n(3356),L=n(467),P=n(8168),B=n(4756),O=n.n(B),F=n(5192),M=n(3058),D=n(3182),T=n(652),H=n(8654),U=n(3486),V=n(384),z=n(7430),G=(0,w.A)((function(e){return{ribbon:{position:"relative",backgroundColor:function(t){return"success"===t.color?e.palette.success.main:e.palette.error.main},color:e.palette.primary.contrastText,padding:"4px 8px",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"40px",borderTopLeftRadius:"4px",borderTopRightRadius:"4px"}}}));const Y=function(e){var t=e.text,n=e.color,r=G({color:n});return a().createElement("div",{className:r.ribbon},a().createElement("span",null,t))};function W(e){return a().createElement(H.A,(0,P.A)({elevation:6,variant:"filled"},e))}(0,F.A)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(T.A);var j=(0,w.A)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:400},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}}));const J=function(e){e.children;var t=j(),n=(0,r.useState)(""),o=n[0],l=n[1],s=(0,r.useState)(null),i=s[0],c=s[1],u=(0,r.useState)(!1),p=u[0],d=u[1],g=(0,r.useState)(null),v=g[0],y=g[1],A=function(){var e=(0,L.A)(O().mark((function e(t){var n,r,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),y(null),c(null),e.prev=3,n=JSON.parse(sessionStorage.getItem("userData")),r=n.ephemeral_token,e.next=8,f().get("MISSING_ENV_VAR".API_URL+"/osu/rollout/check",{params:{esn:t},headers:{"x-api-key":r}});case 8:a=e.sent,c(a.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0.response?y(e.t0.response.data):e.t0.request?y({error:"No response received"}):y({error:"Request failed"});case 15:return e.prev=15,d(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}();return a().createElement("div",null,a().createElement(h.A,{style:{paddingLeft:"10px"}}),a().createElement("div",{className:"container my-5"},a().createElement("div",{className:"panel panel--flat panel-without-heading"},a().createElement("div",{className:"panel-content"},a().createElement(m.FormGroup,{className:"mb-4 mr-3 ml-3"},a().createElement(m.InputGroup,{inputProps:{className:"full-width mb-2",name:"hashESN"},title:"Device ESN:",placeholder:"e.g. LTABCDEF1234567",type:"text",value:o,onChange:function(e){return l(e.target.value.trim())}}),a().createElement("div",{className:"text-center"},a().createElement(m.Button,{disabled:!o||""===o.trim(),onClick:function(){return A(o)}},"Check Info"))),i&&a().createElement(U.A,{className:t.root},v?null:i.is_canary?a().createElement(Y,{text:"Canary Active",color:"success"}):a().createElement(Y,{text:"Canary InActive",color:"error"}),a().createElement("li",{key:"section",className:t.listSection},a().createElement("ul",{className:t.ul},["Firmware Version","SOC Name","Chipset Name","Model","Percentage","Rollout Percentage","Updated On"].map((function(e,t){return a().createElement(a().Fragment,null,"Firmware Version"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.firmwareVersion))})),"SOC Name"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.soc_name))})),"Chipset Name"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.chipset_name))})),"Model"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.model))})),"Percentage"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.percentage))})),"Rollout Percentage"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,i.rollout_percentage))})),"Updated On"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,E()(1e3*i.updated_on).format("Do MMM YYYY HH:mma")))})))}))))),v&&a().createElement("div",{style:{padding:"1rem 0.75rem"}},a().createElement(W,{severity:"error"},v.error)))),p&&a().createElement("div",null,a().createElement(M.A,{className:t.backdrop,open:!0},a().createElement(D.A,null)))))};var Z,q=n(2052),K=n(1620),X=n.n(K);const Q=((Z=function(e){function t(){return e.apply(this,arguments)||this}return(0,q.A)(t,e),t.prototype.render=function(){return X().createElement("svg",{className:"btn__icon",width:"460",height:"512",viewBox:"0 0 460 512",xmlns:"http://www.w3.org/2000/svg"},X().createElement("g",{id:"Page-1",fill:"none",fillRule:"evenodd"},X().createElement("g",{id:"bin",fill:"#D9534F",fillRule:"nonzero"},X().createElement("path",{d:"M441.378906,70.621094 L335.449219,70.621094 L335.449219,35.929688 C335.449219,16.121094 319.328125,0 299.519531,0 L159.515625,0 C139.707031,0 123.585938,16.121094 123.585938,35.929688 L123.585938,70.621094 L17.65625,70.621094 C7.90625,70.621094 -2.84217094e-14,78.515625 -2.84217094e-14,88.277344 C-2.84217094e-14,98.035156 7.90625,105.929688 17.65625,105.929688 L36.0625,105.929688 L50.714844,442.898438 C52.394531,481.65625 84.101562,512 122.890625,512 L336.148438,512 C374.933594,512 406.636719,481.65625 408.320312,442.898438 L422.972656,105.929688 L441.378906,105.929688 C451.128906,105.929688 459.035156,98.035156 459.035156,88.277344 C459.035156,78.515625 451.128906,70.621094 441.378906,70.621094 Z M159.515625,35.308594 L299.519531,35.308594 L300.136719,70.621094 L159.105469,70.621094 L159.515625,35.308594 Z M373.042969,441.378906 C372.179688,461.171875 355.976562,476.691406 336.144531,476.691406 L122.886719,476.691406 C103.058594,476.691406 86.851562,461.171875 85.988281,441.378906 L71.402344,105.929688 L387.628906,105.929688 L373.042969,441.378906 Z",id:"Shape"}),X().createElement("path",{d:"M229.515625,406.070312 C219.765625,406.070312 211.863281,398.171875 211.863281,388.414062 L211.863281,176.550781 C211.863281,166.792969 219.765625,158.898438 229.515625,158.898438 C239.265625,158.898438 247.171875,166.792969 247.171875,176.550781 L247.171875,388.414062 C247.171875,398.171875 239.265625,406.070312 229.515625,406.070312 Z",id:"Shape"}),X().createElement("path",{d:"M300.136719,406.070312 C290.386719,406.070312 282.484375,398.171875 282.484375,388.414062 L282.484375,176.550781 C282.484375,166.792969 290.386719,158.898438 300.136719,158.898438 C309.886719,158.898438 317.792969,166.792969 317.792969,176.550781 L317.792969,388.414062 C317.792969,398.171875 309.886719,406.070312 300.136719,406.070312 Z",id:"Shape"}),X().createElement("path",{d:"M158.898438,406.070312 C149.144531,406.070312 141.242188,398.171875 141.242188,388.414062 L141.242188,176.550781 C141.242188,166.792969 149.144531,158.898438 158.898438,158.898438 C168.648438,158.898438 176.550781,166.792969 176.550781,176.550781 L176.550781,388.414062 C176.550781,398.171875 168.648438,406.070312 158.898438,406.070312 Z",id:"Shape"}))))},t}(K.PureComponent)).displayName="RemoveIcon",Z);var ee,te=n(3528),ne=n(7941),re=n(5850),ae=n.n(re),oe=n(8550),le=n.n(oe),se=n(3222),ie=n.n(se),ce=(ee=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).toggle=function(){r.state.hasFocus&&(new Date).valueOf()-r.state.updated>200&&r.focusChanged(!r.state.hasFocus)},r.focusChanged=function(e){e!==r.state.hasFocus&&(r.setState({hasFocus:e,updated:(new Date).valueOf()}),r.props.onFocusChanged(e))},r._clickDocument=function(e){var t=le().findDOMNode(r);e.target===t||$(t).has(e.target).length?r.focusChanged(!0):r.focusChanged(!1)},r.state={hasFocus:!1},r}(0,q.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=le().findDOMNode(this);this.props.isHover?(t.addEventListener("mouseover",(function(){return e.focusChanged(!0)}),!1),t.addEventListener("mouseleave",(function(){return e.focusChanged(!1)}),!1)):window.addEventListener("mousedown",this._clickDocument,!1)},n.componentWillUnmount=function(){var e=this,t=le().findDOMNode(this);this.props.isHover?(t.removeEventListener("mouseover",(function(){return e.focusChanged(!0)}),!1),t.removeEventListener("mouseleave",(function(){return e.focusChanged(!1)}),!1)):window.removeEventListener("mousedown",this._clickDocument,!1)},n.render=function(){return this.props.children},t}(X().Component),ee.displayName="FocusMonitor",ee);ce.propTypes={children:ie().node.isRequired,isHover:ie().bool,onFocusChanged:ie().func.isRequired};const ue=ce;var me,pe=(me=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this)._focusChanged=function(e){return r.setState({isActive:e})},r.toggle=function(){r.focus.toggle()},r.isActive=function(){return r.state.isActive},r.state={isActive:!1},r}return(0,q.A)(t,e),t.prototype.render=function(){var e=this,t=ae()({in:this.state.isActive,popover:!0},this.props.contentClassName,this.props.className);return X().createElement(ue,{ref:function(t){return e.focus=t},onFocusChanged:this._focusChanged,isHover:this.props.isHover},X().createElement("div",{className:this.props.className},this.props.renderTitle(this.toggle,this.state.isActive),X().createElement("div",{className:"popover-inner"},X().createElement("div",{className:""+t},this.props.children(this.toggle)))))},t}(X().Component),me.displayName="Popover",me);pe.propTypes={children:ie().any,className:ie().string,isHover:ie().bool,renderTitle:ie().func};const de=pe;var fe,he=n(3957),ge=n.n(he),Ee=(fe=function(e){function t(){return e.apply(this,arguments)||this}(0,q.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.propTypes},n.render=function(){return X().createElement("div",{className:"panel panel-default "+(this.props.className||"")+" "+(this.props.title?"":"mt-2")},(this.props.title||this.props.action)&&X().createElement("div",{className:"panel-heading"},X().createElement(Row,{space:!0},X().createElement(Row,{className:"flex-1"},this.props.icon&&X().createElement("span",{className:"panel-icon"},X().createElement("span",{className:"icon "+this.props.icon})),X().createElement(Flex,{className:"m-b-0 title"},this.props.title)),this.props.action)),X().createElement("div",{className:"panel-content"},this.props.children,this.props.renderFooter&&this.props.renderFooter()))},t}(K.PureComponent),fe.displayName="Panel",fe);Ee.displayName="Panel",Ee.propTypes={children:ie().node,icon:ie().string,title:ie().any};const ve=Ee;var ye,Ae=(ye=function(e){function t(t,n){var r;(r=e.call(this,t,n)||this).renderContainer=function(e){var t=function(t){var n=t.index,a=t.style;return X().createElement("div",{style:a},r.props.renderRow(e[n]))};return e&&e.length>100&&r.props.itemHeight?X().createElement(ne.Y1,{style:{overflowX:"hidden"},height:10*r.props.itemHeight,itemCount:e.length,itemSize:r.props.itemHeight,width:"100%"},t):e.map(r.props.renderRow)};var a=ge().find(ge().get(t,"sorting",[]),{default:!0});return r.state={sortBy:a?a.value:null,sortOrder:a?a.order:null},r}(0,q.A)(t,e);var n=t.prototype;return n.filter=function(){var e=this.props.search||this.state.search||"";this.state.exact&&(e=e.replace(/^"+|"+$/g,""));var t=this.props.filter,n=this.props,r=n.filterRow,a=n.items;return r&&(e||t)?this.sort(ge().filter(a,(function(t,n){return r(t,e.toLowerCase(),n)}))):this.sort(a)},n.sort=function(e){var t=this.state,n=t.sortBy,r=t.sortOrder;return n?ge().orderBy(e,[n],[r]):e},n.onSort=function(e,t){var n=this;e.preventDefault();var r=this.state,a=r.sortBy,o=r.sortOrder;t.value===a?this.setState({sortOrder:"asc"===o?"desc":"asc"},(function(){n.props.onSortChange&&n.props.onSortChange({sortBy:n.state.sortBy,sortOrder:n.state.sortOrder})})):this.setState({sortBy:t.value,sortOrder:t.order},(function(){n.props.onSortChange&&n.props.onSortChange({sortBy:n.state.sortBy,sortOrder:n.state.sortOrder})}))},n.render=function(){var e,t,n=this,r=this.state,a=r.sortBy,o=r.sortOrder,l=this.props,s=l.action,i=l.goToPage,c=l.isLoading,u=l.items,m=l.nextPage,p=l.paging,d=l.prevPage,f=l.renderNoResults,h=l.sorting,g=this.filter(u),E=ge().find(h,{value:a}),v="",y=this.props.id;"features-list"==y&&(v="Search for flags"),"segment-list"==y&&(v="Search for segments"),"user-traits-list"==y&&(v="Search for traits"),"users-list"==y&&(v="Search with device id"),"rollout-history"==y&&(v="Search");var A=this.props.search||this.state.search||"";return this.state.exact&&(A=A.replace(/^"+|"+$/g,"")),A||g&&g.length||this.props.isLoading||this.props.renderSearchWithNoResults?X().createElement(ve,{className:this.props.className,title:this.props.title,icon:this.props.icon,renderFooter:this.props.renderFooter,action:this.props.filterRow||this.props.sorting?X().createElement(Row,null,!!this.props.sorting&&X().createElement(Row,{className:"mr-3 relative"},X().createElement(de,{renderTitle:function(e){return X().createElement("a",{onClick:e},X().createElement("div",{className:"flex-column ion ion-md-funnel"}),E?E.label:"Unsorted")}},(function(e){return X().createElement("div",{className:"popover-inner__content"},n.props.sorting.map((function(t,r){return X().createElement("a",{key:r,className:"popover-bt__list-item",href:"#",onClick:function(r){n.onSort(r,t),e()}},X().createElement(Row,{space:!0},X().createElement(Row,{className:"flex-1"},t.label),E&&E.value===t.value&&X().createElement(Row,null,X().createElement("div",{className:"flex-column ion "+("asc"===o?"ion-ios-arrow-up":"ion-ios-arrow-down")}))))})))}))),!!this.props.filterRow&&X().createElement(Row,null,this.props.showExactFilter&&X().createElement("div",{className:"mr-2",style:{width:200}},X().createElement(Select,{className:"select-sm",styles:{control:function(e){return(0,te.A)({},e,{"&:hover":{borderColor:"$bt-brand-secondary"},border:"1px solid $bt-brand-secondary",height:30})}},onChange:function(e){n.setState({exact:"Exact"===e.label}),n.props.search&&n.props.onChange&&n.props.onChange(n.state.exact?n.props.search.replace(/^"+|"+$/g,""):'"'+n.props.search+'"')},value:{label:this.state.exact?"Exact":this.props.filterLabel||"Contains"},options:[{label:"Contains",value:"Contains"},{label:"Exact",value:"Exact"}]})),X().createElement(Row,{onClick:function(){return n.input.focus()}},X().createElement("input",{ref:function(e){return n.input=e},onBlur:this.props.onBlur,onChange:function(e){var t=e.target.value;n.props.onChange?n.props.onChange(n.state.exact?'"'+t+'"':t):n.setState({search:e.target.value})},style:{padding:"0.5rem"},type:"text",value:A,className:"pl-4",placeholder:v}),X().createElement("span",{style:{marginLeft:10,position:"absolute"},className:"icon ion-ios-search"})))):s||null},this.props.searchPanel,X().createElement("div",{id:this.props.id,className:"search-list",style:c?{opacity:.5}:{}},!!p&&X().createElement(Paging,{paging:p,isLoading:c,nextPage:m,prevPage:d,goToPage:i}),this.props.header,!this.props.isLoading||g&&u?g&&g.length?this.renderContainer(g):f&&!A?f:X().createElement(Column,null,!c&&X().createElement("div",{className:"mx-2 pt-1 pb-2"},(null==(e=(t=this.props).noResultsText)?void 0:e.call(t,A))||X().createElement(X().Fragment,null,"No results ",A&&X().createElement("span",null,"for",X().createElement("strong",null,' "'+A+'"'))))):X().createElement("div",{className:"text-center"},X().createElement(Loader,null))),!!p&&g&&g.length>10&&X().createElement(Paging,{paging:p,isLoading:c,goToPage:i})):f||null},t}(K.Component),ye.displayName="PanelSearch",ye.propTypes={action:ie().node,filterRow:ie().func,goToPage:ie().func,isLoading:ie().bool,items:ie().any,nextPage:ie().func,noResultsText:ie().string,paging:ie().object,renderNoResults:ie().any,renderRow:ie().func,search:ie().string,searchPanel:ie().node,sorting:ie().array,title:ie().node},ye);const we=Ae;var be=n(8506),Ce=n(710);const Ne=function(e){var t=e.loading,n=e.isOpen,r=e.identifier,o=e.onClose,l=e.onSubmit;return a().createElement(Ce.A,{title:"Remove Identity Override",text:a().createElement("span",null,"Are you sure you want to remove the ",a().createElement("strong",null,r)," identity override?"),isOpen:n,loading:t,handleClose:o,handleSubmit:function(){return l(r)}})};var xe="MISSING_ENV_VAR".API_URL,Se=f().create({baseURL:xe});Se.interceptors.request.use((function(e){var t;return e.headers["x-api-key"]=(t=JSON.parse(sessionStorage.getItem("userData")))?t.ephemeral_token:null,e}),(function(e){return console.error("Error:",e),Promise.reject(e)}));var ke="/osu/overrides",Re=function(){var e=(0,L.A)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.get(ke).then((function(e){return e.data})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=(0,L.A)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.post(ke,t).then((function(e){return e})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,L.A)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.delete(ke+"/"+t).then((function(e){return e})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=(0,L.A)(O().mark((function e(t){var n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=""),n={limit:100},t&&(n.lastEvaluatedKey=encodeURIComponent(t)),e.next=5,Se.get(ke+"/history",{params:n}).then((function(e){return e.data})).catch((function(e){throw e}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=n(8587),Be=n(9312),Oe=n(8306),Fe=n(8448),Me=n(4630),De=["label","options","value","onChange"],Te=(0,w.A)((function(e){return{dropdown:{margin:e.spacing(1),minWidth:200},label:{color:e.palette.text.primary},menuItem:{"&:hover":{backgroundColor:e.palette.action.hover}}}}));function He(e){var t=e.label,n=e.options,r=e.value,o=e.onChange,l=(0,Pe.A)(e,De),s=Te();return a().createElement(Be.A,(0,P.A)({className:s.dropdown,fullWidth:!0},l),a().createElement(Oe.A,{className:s.label,id:t+"-label"},t),a().createElement(Fe.A,{labelId:t+"-label",value:r,onChange:o,label:t},n.map((function(e){return a().createElement(Me.A,{key:e.value,value:e.value,className:s.menuItem},e.label)}))))}var Ue=n(5014),Ve=n(5834),ze=n(820),Ge=n(2572),Ye=n(3845);y()(Ye.A,{insert:"head",singleton:!1}),Ye.A.locals;var We=[200,200];function je(){return Math.round(20*Math.random())-10}function Je(){var e=50+je(),t=50+je();return{top:e+"%",left:t+"%",transform:"translate(-"+e+"%, -"+t+"%)"}}var Ze=(0,w.A)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(4),outline:"none"}}}));const $e=function(){var e=Ze(),t=(0,r.useState)(!1),n=t[0],o=t[1],l=(0,r.useState)(!1),s=l[0],i=l[1],c=(0,r.useState)([]),u=(c[0],c[1]),d=(0,r.useState)([{identifier:"esn1",group:["group1","group2","group3"]},{identifier:"esnDemo",group:["group21","group22","group23"]}]),f=d[0],g=d[1],v=(0,r.useState)(null),y=v[0],A=v[1],w=(0,r.useState)(!1),b=w[0],C=w[1],x=(0,r.useState)(!1),S=(x[0],x[1]),k=(0,r.useState)(0),R=k[0],_=k[1],I=(0,r.useState)([]),L=I[0],P=I[1],B=(0,r.useState)(null),O=B[0],F=B[1],M=((0,r.useState)(Je)[0],(0,r.useState)(!1)),D=M[0],T=M[1],H=(0,r.useState)(null),G=H[0],Y=H[1],W=(0,r.useState)(!1),j=(W[0],W[1]),J=(0,r.useState)("option0"),Z=J[0],$=J[1],q=(0,r.useState)(!1),K=(q[0],q[1],(0,r.useState)("")),X=K[0],ee=K[1],te=(0,r.useState)(-1),ne=(te[0],te[1],(0,r.useState)("")),re=(ne[0],ne[1],(0,r.useState)(!0)),ae=(re[0],re[1]),oe=(0,r.useState)(!0),le=oe[0],se=oe[1],ie=(0,r.useState)(!1),ce=(ie[0],ie[1]),ue=(0,r.useState)([{value:"option0",label:"None"}]),me=ue[0],pe=ue[1],de=function(){Re().then((function(e){g(e),u(e)})).catch((function(e){console.error("Error:",e),e.response?F({type:"error",message:e.response.data}):F({type:"error",message:JSON.stringify(e)})})).finally((function(){return o(!1)}))},fe=function(e){i(!0);var t=[{esn:"esn1",fw_override_info:{fw_version:"1.0.0",soc_name:"soc1",chipset_name:"SD888",model:"Model 1",percentage:"80%",rollout_percentage:"20%",updated_on:"2024-01-01"}},{esn:"esnDemo",fw_override_info:{fw_version:"2.0.0",soc_name:"soc1",chipset_name:"2100",model:"Model 2",percentage:"90%",rollout_percentage:"10%",updated_on:"2024-02-01"}}].find((function(t){return t.esn===e}));t?Y(t.fw_override_info):(console.error("ESN not found"),Y(null)),T(!0),o(!0),setTimeout((function(){o(!1)}),2e3),i(!1)};(0,r.useEffect)((function(){o(!0),de()}),[]),(0,r.useEffect)((function(){ae(!X.trim()),se(!0),ce(!1)}),[X]);var he=p(function(){var e="undefined"==typeof document?"1":document.location.search;if(!e)return{};var t=e.replace(/(^\?)/,"1");return JSON.parse('{"'+t.replace(/&/g,'","').replace(/=/g,'":"')+'"}',(function(e,t){return"1"===e?t:decodeURIComponent(t)}))}().search,(function(){_(1)})),ge=he.search,Ee=he.searchInput,ve=he.setSearchInput,ye="option0"===Z;return(0,r.useEffect)((function(){console.log("Current count of addedESN:",L.length)}),[L]),(0,r.useEffect)((function(){D||o(!1)}),[D]),a().createElement("div",null,a().createElement(h.A,{style:{paddingLeft:"10px"}}),a().createElement(Ue.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:D,onClose:function(){Y(null),T(!1)},closeAfterTransition:!0,BackdropComponent:be.Backdrop,BackdropProps:{timeout:500}},a().createElement(Ve.A,{in:D},a().createElement("div",{className:e.paper},G&&a().createElement(U.A,{className:e.root},a().createElement("li",{key:"section",className:e.listSection},a().createElement("ul",{className:e.ul},["Firmware Version","SOC Name","Chipset Name","Model","Percentage","Rollout Percentage","Updated On"].map((function(e,t){return a().createElement(a().Fragment,null,"Firmware Version"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.fw_version))})),"SOC Name"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.soc_name))})),"Chipset Name"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.chipset_name))})),"Model"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.model))})),"Percentage"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.percentage))})),"Rollout Percentage"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,G.rollout_percentage))})),"Updated On"===e&&a().createElement(V.A,{key:"item-"+t},a().createElement(z.A,{primary:a().createElement("span",null,a().createElement("b",null,e," :  "),a().createElement("span",null,E()(G.updated_on).isValid()?E()(G.updated_on).format("Do MMM YYYY HH:mma"):"Invalid Date"))})))})))))))),a().createElement("div",{className:"container my-5 px-5 py-3",style:{background:"white"}},O&&a().createElement(N.A,{type:O.type,message:O.message,setApiError:F,className:"my-3",variant:"filled"}),a().createElement("h2",{className:"text-center"},"Identity Overrides"),a().createElement("div",{className:"mb-3 mt-5"},a().createElement("div",{className:"mb-3 mt-5 flex flex-row",style:{columnGap:"15px"}},a().createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",alignItems:"center",columnGap:"15px"}},a().createElement(a().Fragment,null,a().createElement(Ge.A,{id:"outlined-basic",label:"Search ESN",variant:"outlined",value:X,onChange:function(e){var t=e.target.value;ee(t),console.log("Search Input: ",t);var n=f.find((function(e){return e.identifier===t}));if(console.log("selectedOverride",n),n){console.log("Found matching override: ",n);var r=n.group.map((function(e){return{value:e,label:e.charAt(0).toUpperCase()+e.slice(1)}}));r.unshift({value:"option0",label:"None"}),console.log("New Options: ",r),pe(r),se(!1),console.log("Dropdown enabled, options updated.")}else console.log("No matching ESN found. Resetting options."),pe([{value:"option0",label:"None"}]),se(!0),console.log("Dropdown disabled, default option set.")},fullWidth:!0}),a().createElement(m.Button,{className:"btn btn-primary",onClick:function(){if(X.trim()){o(!0);var e=f.findIndex((function(e){return e.identifier===X.trim()}));setTimeout((function(){-1!==e?(console.log("Found our esn"),i(!1),F({type:"success",message:"ESN found."}),ce(!0),se(!1)):(F({type:"error",message:"ESN not found!"}),ce(!1),se(!0)),j(!0),o(!1)}),2e3)}},startIcon:n?a().createElement(be.CircularProgress,{size:24,color:"inherit"}):null,disabled:!X.trim()||n},"Go"))),a().createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",alignItems:"center",columnGap:"15px",justifyContent:"flex-end"}},a().createElement(a().Fragment,null,a().createElement(He,{label:"Associated Firmware Groups",value:Z,onChange:function(e){$(e.target.value),console.log("Value",value)},options:me,disabled:le}),a().createElement(m.Button,{className:"btn btn-primary",disabled:ye,onClick:function(){i(!0),ee(""),pe([{value:"option0",label:"None"}]),$("option0"),se(!0),F(null),P([]),S(!0),_e(L).then((function(){S(!1),P([]),de(),i(!1),F({type:"success",message:"ESN overridden successfully."})})).catch((function(e){i(!1),F({type:"success",message:"ESN overridden successfully."})}))}},"Add ESN")))),a().createElement(we,{id:"esn-overrides",title:"Overrides",isLoading:n,className:"esn-overrides no-pad",items:f.length?f:null,filter:ge,search:Ee,onChange:function(e){ve(e)},nextPage:function(){_(R+1)},prevPage:function(){_(R-1)},goToPage:function(e){_(e)},filterRow:function(e,t){return-1!==(""+e.identifier).toLowerCase().indexOf(t.toLowerCase())},renderRow:function(e,t){return r=t,o=e.identifier,l=e.group[0],a().createElement(m.Row,{className:"list-item py-2 audit__item",key:r},a().createElement("div",{style:{width:We[1]}},o),a().createElement("div",{style:{width:We[1]}},a().createElement("div",null,l)),a().createElement(m.Flex,{style:{alignItems:"center",flexDirection:"row",justifyContent:"flex-end"}},a().createElement(ze.A,{fontSize:"large",color:"primary",onClick:function(){if(ge&&""!==ge){var e=f.findIndex((function(e){return e.identifier===ge}));fe(f[e].identifier)}else fe(f[r].identifier)},style:{cursor:"pointer"}}),a().createElement(m.Button,{className:"btn btn--with-icon btn--remove",disabled:n,onClick:function(){if(ge&&""!==ge){var e=f.findIndex((function(e){return e.identifier===ge}));C(!0),A(f[e].identifier)}else C(!0),A(f[r].identifier)}},a().createElement(Q,null))));var r,o,l},header:a().createElement(a().Fragment,null,a().createElement(m.Row,{className:"table-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:"2px"}},a().createElement("span",{style:{width:"20%",marginRight:"0px"}},"ESN Value"),a().createElement("span",{style:{width:"20%",marginRight:"4px"}},"Group Info"),a().createElement(m.Flex,null))),renderNoResults:a().createElement(m.FormGroup,{className:"text-center"},"No active device overrides.")}),s&&a().createElement("div",null,a().createElement(be.Backdrop,{className:e.backdrop,open:!0},a().createElement(be.CircularProgress,null))))),a().createElement(Ne,{isOpen:b,loading:n,identifier:y,onClose:function(){return C(!1)},onSubmit:function(e){C(!1),i(!0),A(e),Ie(e).then((function(){F({type:"success",message:"ESN override removed successfully."}),de()})).catch((function(e){console.error("Error:",e),e.response?F({type:"error",message:e.response.data.error}):F({type:"error",message:JSON.stringify(e)})})).finally((function(){i(!1)}))}}))};var qe=n(6601),Ke=n.n(qe),Xe=n(5594),Qe=n(5479),et=n(9764),tt=n(648),nt=n(4896),rt=n(3148),at=n(6746);const ot=function(){var e=(0,r.useState)(null),t=e[0],n=e[1],o=(0,r.useState)(!0),l=o[0],s=o[1],i=(0,r.useState)(""),c=i[0],u=i[1],p=(0,r.useState)([]),d=p[0],f=p[1],g=(0,r.useState)(""),E=g[0],v=g[1],y=(0,r.useState)([]),A=y[0],w=y[1],b=new(Ke())(d,{keys:["chipset_name","firmware_version","rollout_percentage","soc_name","updated_by"],findAllMatches:!0,threshold:.3});return(0,r.useEffect)((function(){Le().then((function(e){f(e.items),w(e.items),n(e.lastEvaluatedKey)})).catch((function(e){var t,n;return v("string"==typeof(null==(t=e.response)?void 0:t.data)?null==(n=e.response)?void 0:n.data:e.message)})).finally((function(){return s(!1)}))}),[]),(0,r.useEffect)((function(){var e=setTimeout((function(){v("")}),5e3);return function(){clearTimeout(e)}}),[E]),(0,r.useEffect)((function(){if(""!==c){var e=b.search(c);w(e.map((function(e){return e.item})))}else w(d)}),[c]),a().createElement("div",null,a().createElement(h.A,{style:{paddingLeft:"10px"}}),a().createElement("div",{className:"container my-5 px-5 py-3",style:{background:"white"}},a().createElement("h2",{className:"text-center"},"Identity Overrides History"),a().createElement(m.Row,null,a().createElement(m.Flex,null,a().createElement(m.InputGroup,{inputProps:{className:"full-width mb-2",name:"overrides-history-search"},title:"Search for history",placeholder:"Search for history",type:"text",value:c,onChange:function(e){u(e.target.value)}}))),E.length>0&&a().createElement(m.Row,{className:"mb-1"},a().createElement(m.Flex,null,a().createElement(H.A,{severity:"error"},E))),a().createElement(tt.A,{component:rt.A},a().createElement(et.A,{size:"small","aria-label":"identity-overrides-history-table"},a().createElement(Qe.A,null,a().createElement(Xe.A,null,a().createElement(T.A,{align:"left"},"Identifier"),a().createElement(T.A,{align:"right"},"Updated_by"),a().createElement(T.A,{align:"right"},"Action"),a().createElement(T.A,{align:"right"},"Updated"))),a().createElement(nt.A,null,A.map((function(e,t){return a().createElement(Xe.A,{key:t},a().createElement(T.A,{component:"th",scope:"row"},e.identifier),a().createElement(T.A,{align:"right",style:{width:"200px"}},e.updated_by),a().createElement(T.A,{align:"right",style:{width:"100px"}},e.action),a().createElement(T.A,{align:"right",style:{width:"175px"}},new Date(1e3*e.updated_on).toLocaleString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})))}))))),0!==A.length&&a().createElement("div",{className:"flex justify-content-center mt-2"},a().createElement(at.A,{disabled:l||null===t,color:"primary",onClick:function(){return s(!0),void Le(encodeURIComponent(JSON.stringify(t))).then((function(e){var t=[].concat(d,e.items);f(t),w(t),n(e.lastEvaluatedKey)})).catch((function(e){var t,n;return v("string"==typeof(null==(t=e.response)?void 0:t.data)?null==(n=e.response)?void 0:n.data:e.message)})).finally((function(){return s(!1)}))}},"Show more"," ",l&&a().createElement(D.A,{size:20})))))};var lt=(0,c.A)({productionPrefix:"dl"});const st=function(e){var t=e.history;return a().createElement("div",null,a().createElement(u.Ay,{generateClassName:lt},a().createElement(i.Router,{history:t},a().createElement(i.Switch,null,a().createElement(i.Route,{path:"/",component:I.default}),a().createElement(i.Route,{path:"/rollout-history",component:_}),a().createElement(i.Route,{path:"/hash-esn",component:J}),a().createElement(i.Route,{path:"/target-devices",component:J}),a().createElement(i.Route,{path:"/overrides",component:$e}),a().createElement(i.Route,{path:"/overrides-history",component:ot})))))};var it=function(e,t){var n=t.onNavigate,r=t.defaultHistory,o=t.initialPath,i=r||(0,s.sC)({initialEntries:[o]});return n&&i.listen(n),l().render(a().createElement(st,{history:i}),e),{onParentNavigate:function(e){var t=e.pathname;i.location.pathname!==t&&i.push(t)}}}},3845:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(4991),a=n.n(r),o=n(6314),l=n.n(o)()(a());l.push([e.id,'.override-row:first-child {\n  border-top: 1px solid #e0e0e0;\n}\n\n.override-row {\n    background: white;\n    display: grid;\n    grid-template-columns: 2fr 50px;\n    padding-left: 15px;\n    align-items: center;\n    border-bottom: 1px solid #e0e0e0;\n}\n\n.overrides-search-bar> .input-container {\n    width: 100%;\n}\n\n.add-esn-block  [role="combobox"] {\n  width: 100%;\n}\n',"",{version:3,sources:["webpack://./src/components/IdentityOverrides/style.css"],names:[],mappings:"AAAA;EACE,6BAA6B;AAC/B;;AAEA;IACI,iBAAiB;IACjB,aAAa;IACb,+BAA+B;IAC/B,kBAAkB;IAClB,mBAAmB;IACnB,gCAAgC;AACpC;;AAEA;IACI,WAAW;AACf;;AAEA;EACE,WAAW;AACb",sourcesContent:['.override-row:first-child {\n  border-top: 1px solid #e0e0e0;\n}\n\n.override-row {\n    background: white;\n    display: grid;\n    grid-template-columns: 2fr 50px;\n    padding-left: 15px;\n    align-items: center;\n    border-bottom: 1px solid #e0e0e0;\n}\n\n.overrides-search-bar> .input-container {\n    width: 100%;\n}\n\n.add-esn-block  [role="combobox"] {\n  width: 100%;\n}\n'],sourceRoot:""}]);const s=l},2553:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(4991),a=n.n(r),o=n(6314),l=n.n(o)()(a());l.push([e.id,".panel.panel-default.no-pad.rollout-history .panel-content {\n    max-height: 65vh;\n    overflow: scroll;\n}","",{version:3,sources:["webpack://./src/components/RolloutHistory.css"],names:[],mappings:"AAAA;IACI,gBAAgB;IAChB,gBAAgB;AACpB",sourcesContent:[".panel.panel-default.no-pad.rollout-history .panel-content {\n    max-height: 65vh;\n    overflow: scroll;\n}"],sourceRoot:""}]);const s=l}}]);
//# sourceMappingURL=178.3ce8f3ba0a1f4ab558cd.js.map