(self.webpackChunkflagsmith_frontend=self.webpackChunkflagsmith_frontend||[]).push([[661],{49355:e=>{"use strict";e.exports=function(e,t){e._listeners=[],e.listenTo=function(e,t,a){return this._listeners.push({callback:a,event:t,store:e}),e.on(t,a),this._listeners.length},e.stopListening=function(e){const t=this._listeners[e];t.store.off(t.event,t.callback)},e.setTimedState=function(e,t,a){const n=this.state[e],r={};n!==t&&(r[e]=t,this.setState(r),setTimeout((()=>{r[e]=n,this.setState(r)}),a||500))},e.setPathState=function(e,t){return _.partial((()=>{const a={};a[e]=Utils.safeParseEventValue(t),this.setState(a)}))},e.toggleState=function(e){return _.partial((()=>{const t={};t[e]=!this.state[e],this.setState(t)}))},e.componentWillUnmount=function(){_.each(this._listeners,((e,t)=>{e&&this.stopListening(t)})),t&&t.call(e)}}},26326:e=>{"use strict";e.exports=(e,{USER_ID:t},a)=>`// Identify/create user\n\ncurl 'https://edge.api.flagsmith.com/api/v1/identities/?identifier=${a||t}'\n     -H 'x-environment-key: ${e}'\n`},27334:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,USER_ID:n},r)=>`using Flagsmith;\n\nstatic FlagsmithClient _flagsmithClient;\n_flagsmithClient = new("${e}");\n\n// Identify the user\nvar flags = await _flagsmithClient.GetIdentityFlags("${r||n}");\n\n// get the state / value of the user's flags \nvar isEnabled = await flags.IsFeatureEnabled("${t}");\nvar featureValue = await flags.GetFeatureValue("${a}");\n`},81580:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,USER_ID:n},r)=>`final flagsmithClient = FlagsmithClient(\n        apiKey: '${e}' \n        config: config, \n        seeds: <Flag>[\n            Flag.seed('feature', enabled: true),\n        ],\n    );\n\n//if you prefer async initialization then you should use\n//final flagsmithClient = await FlagsmithClient.init(\n//        apiKey: 'YOUR_ENV_API_KEY',\n//        config: config, \n//        seeds: <Flag>[\n//            Flag.seed('feature', enabled: true),\n//        ], \n//        update: false,\n//    );\n\n// This will create a user in the dashboard if they don't already exist\nfinal user = Identity(identifier: '${r||n}');\n\nbool featureEnabled = await flagsmithClient\n  .hasFeatureFlag('${t}', user: user);\n  \nfinal myRemoteConfig = await flagsmithClient\n  .getFeatureFlagValue('${a}', user: user);\n\n`},74558:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,USER_ID:n},r)=>`// The method below triggers a network request\nflags, _ := client.GetIdentityFlags("${r||n}", nil)\n\nisEnabled, _ := flags.IsFeatureEnabled("${t}")\nfeatureValue, _ := flags.GetFeatureValue("${a}")\n`},89771:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,USER_ID:n},r)=>`import FlagsmithClient\n\nfunc application(_ application: UIApplication,\n didFinishLaunchingWithOptions launchOptions:\n  [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\n\n  Flagsmith.shared.apiKey = "${e}"\n\n  // This will create a user in the dashboard if they don't already exist\n  // Check for a feature\n  Flagsmith.shared\n  .hasFeatureFlag(withID: "${t}", forIdentity: "${r||n}") { (result) in\n      print(result)\n  }\n\n  // Or, use the value of a feature\n  Flagsmith.shared\n  .getFeatureValue(withID: "${a}", forIdentity: "${r||n}") { (result) in\n      switch result {\n      case .success(let value):\n          print(value ?? "nil")\n      case .failure(let error):\n          print(error)\n      }\n  }\n}`},15100:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,LIB_NAME_JAVA:r,USER_ID:i},s)=>`${r} ${n} = ${r}\n    .newBuilder()\n    .setApiKey("${e}")\n    .build();\n\n// Identify the user\nFlags flags = flagsmith.getIdentityFlags("${s||i}");\n\n// get the state / value of the user's flags\nBoolean isEnabled = flags.isFeatureEnabled("${t}");\nObject featureValue = flags.getFeatureValue("${a}");\n`},24419:e=>{"use strict";e.exports=(e,{LIB_NAME:t,NPM_CLIENT:a,USER_FEATURE_FUNCTION:n,USER_FEATURE_NAME:r,USER_ID:i},s)=>`import ${t} from '${a}';\n\n// Standard project initialisation\n${t}.init({\n    environmentID: "${e}",\n        onChange: (oldFlags, params) => { // Occurs whenever flags are changed\n        // Determines if the update came from the server or local cached storage\n        const { isFromServer } = params;\n\n        // Check for a feature\n        if (${t}.hasFeature("${r}")) {\n            ${n}();\n        }\n\n        // Or, use the value of a feature\n        const ${r} = ${t}.getValue("${r}");\n\n        // Check whether value has changed\n        const ${r}Old = oldFlags["${r}"]\n         && oldFlags["${r}"].value;\n        if (${r} !== ${r}Old) {\n            // Value has changed, do something here\n        }\n    }\n});\n// This will create a user in the dashboard if they don't already exist\n${t}.identify("${s||i}");\n`},72905:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,TRAIT_NAME:r,USER_ID:i},s)=>`\n// Option 1: Identify clientside\n//Home Page\nimport flagsmith from '${n}/isomorphic';\nimport { useFlags, useFlagsmith } from 'flagsmith/react';\n\nexport default function HomePage() {\n  const flags = useFlags(['${t}','${a}']); // only causes re-render if specified flag values / traits change\n  const ${t} = flags.${t}.enabled\n  const ${a} = flags.${a}.value\n  \n  const identify = () => {\n    flagsmith.identify('${i}', {${r}: 21}); // only causes re-render if the user has overrides / segment overrides for ${t} or ${a}\n  };\n}\n\n//Option 2: Alternatively, if you wish to do this serverside\n\nexport default function App({ Component, pageProps, flagsmithState } {\n  return (\n    &lt;FlagsmithProvider\n      serverState={flagsmithState}\n      options={{\n        environmentID: '${e}',\n      }}\n      flagsmith={flagsmith}&gt;\n        &lt;Component {...pageProps} />\n    &lt;/FlagsmithProvider>\n  );\n}\n\nMyApp.getInitialProps = async () => {\n  // calls page's \`getInitialProps\` and fills \`appProps.pageProps\`\n  await flagsmith.init({ // fetches flags on the server\n      environmentID,\n      preventFetch: true\n  });\n  await flagsmith.identify('${s||i}', {${r}: 21}); // Will hydrate the app with the user's flags\n  return { flagsmithState: flagsmith.getState() }\n}\n`},11252:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,USER_ID:n},r)=>`const Flagsmith = require('flagsmith-nodejs');\n\nconst flagsmith = new Flagsmith(\n    environmentKey: '${e}'\n);\n\n// Identify the user\nconst flags = await flagsmith.getIdentityFlags('${r||n}', traitList);\n\n// get the state / value of the user's flags \nvar isEnabled = flags.isFeatureEnabled('${t}');\nvar featureValue = flags.getFeatureValue('${a}');\n`},9342:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,USER_ID:n},r)=>`use Flagsmith\\Flagsmith;\n\n$flagsmith = new Flagsmith('${e}');\n\n// Identify the user\n$flags = $flagsmith->getIdentityFlags('${r}', $traits);\n\n// get the state / value of the user's flags \n$isEnabled = $flags->isFeatureEnabled('${t}');\n$featureValue = $flags->getFeatureValue('${a}');\n`},19298:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,USER_ID:n},r)=>`from flagsmith import Flagsmith\n\nflagsmith = Flagsmith(environment_key="${e}")\n\n# Identify the user\nidentity_flags = flagsmith.get_identity_flags(identifier="${r||n}", traits=traits)\n\n# get the state / value of the user's flags\nis_enabled = identity_flags.is_feature_enabled("${t}")\nfeature_value = identity_flags.get_feature_value("${a}")\n`},82581:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,TRAIT_NAME:r,USER_ID:i},s)=>`\n// Home Page\nimport flagsmith from '${n}';\nimport { useFlags, useFlagsmith } from 'flagsmith/react';\n\nexport default function HomePage() {\n  const flags = useFlags(['${t}','${a}']); // only causes re-render if specified flag values / traits change\n  const ${t} = flags.${t}.enabled\n  const ${a} = flags.${a}.value\n  \n  const identify = () => {\n    flagsmith.identify('${s||i}', {${r}: 21}); // only causes re-render if the user has overrides / segment overrides for ${t} or ${a}\n  };\n}`},77728:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,NPM_RN_CLIENT:n,TRAIT_NAME:r,USER_ID:i},s)=>`\n// Home Page\nimport flagsmith from '${n}';\nimport { useFlags, useFlagsmith } from 'flagsmith/react';\n\nexport default function HomePage() {\n  const flags = useFlags(['${t}','${a}']); // only causes re-render if specified flag values / traits change\n  const ${t} = flags.${t}.enabled\n  const ${a} = flags.${a}.value\n  \n  const identify = () => {\n    flagsmith.identify('${s||i}', {${r}: 21}); // only causes re-render if the user has overrides / segment overrides for ${t} or ${a}\n  };\n}`},79132:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,USER_ID:n},r)=>`require "flagsmith"\n\n$flagsmith = Flagsmith::Client.new(\n    environment_key: '${e}'\n)\n\n// Identify the user\n$flags = $flagsmith.get_identity_flags('${r||n}')\n\n// get the state / value of the user's flags\n$is_enabled = $flags.is_feature_enabled('${t}')\n$feature_value = $flags.get_feature_value('${a}')\n`},25122:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,USER_ID:n},r)=>`\nuse flagsmith::{Flag, Flagsmith, FlagsmithOptions};\n\nlet options = FlagsmithOptions {..Default::default()};\nlet flagsmith = Flagsmith::new(\n    "${e}".to_string(),\n    options,\n);\n\n// Identify the user\nlet identity_flags = flagsmith.get_identity_flags("${r||n}", None).unwrap();\n\n// get the state / value of the user's flags\nlet is_enabled = identity_flags.is_feature_enabled("${t}").unwrap();\nlet feature_value = identity_flags.get_feature_value_as_string("${a}").unwrap();\n`},86856:e=>{"use strict";e.exports=e=>`\ncurl 'https://edge.api.flagsmith.com/api/v1/flags/'\n     -H 'x-environment-key: ${e}'\n`},6328:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a},n)=>`using Flagsmith;\n\nstatic FlagsmithClient _flagsmithClient;\n\n_flagsmithClient = new("${e}");\n\nvar flags = await _flagsmithClient.GetEnvironmentFlags();  # This method triggers a network request\n\n// Check for a feature\nvar isEnabled = await flags.IsFeatureEnabled("${n||t}");\n\n// Or, use the value of a feature\nvar featureValue = await flags.GetFeatureValue("${n||a}");\n`},44594:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a})=>`//In your application, initialise the Flagsmith client with your API key:\n\nfinal flagsmithClient = FlagsmithClient(\n        apiKey: '${e}'\n        config: config,\n        seeds: <Flag>[\n            Flag.seed('feature', enabled: true),\n        ],\n    );\n\n//if you prefer async initialization then you should use\n//final flagsmithClient = await FlagsmithClient.init(\n//        apiKey: 'YOUR_ENV_API_KEY',\n//        config: config,\n//        seeds: <Flag>[\n//            Flag.seed('feature', enabled: true),\n//        ],\n//        update: false,\n//    );\n\nawait flagsmithClient.getFeatureFlags(reload: true) // fetch updates from api\n\n// Check for a feature\nbool ${t} = await flagsmithClient.hasFeatureFlag("${t}");\n\n// Or, use the value of a feature\nfinal ${a} = await flagsmithClient.getFeatureFlagValue("${a}");\n`},62072:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a},n)=>`\nctx, cancel := context.WithCancel(context.Background())\ndefer cancel()\n\n// Initialise the Flagsmith client\nclient := flagsmith.NewClient('${e}', flagsmith.WithContext(ctx))\n\n// The method below triggers a network request\nflags, _ := client.GetEnvironmentFlags()\nisEnabled, _ := flags.IsFeatureEnabled("${n||t}")\nfeatureValue, _ := flags.GetFeatureValue("${n||a}")\n`},49929:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a})=>`import FlagsmithClient\n\nfunc application(_ application: UIApplication,\n didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\n\n  Flagsmith.shared.apiKey = "${e}"\n  // Check for a feature\n  Flagsmith.shared\n  .hasFeatureFlag(withID: "${t}", forIdentity: nil) { (result) in\n      print(result)\n  }\n\n  // Or, use the value of a feature\n  Flagsmith.shared\n  .getFeatureValue(withID: "${a}", forIdentity: nil) { (result) in\n      switch result {\n      case .success(let value):\n          print(value ?? "nil")\n      case .failure(let error):\n          print(error)\n      }\n  }\n}`},34518:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,LIB_NAME_JAVA:r},i)=>`${r} ${n} = ${r}\n    .newBuilder()\n    .setApiKey("${e}")\n    .build();\n\nFlags flags = flagsmith.getEnvironmentFlags();\n\n// Check for a feature\nboolean isEnabled = flags.isFeatureEnabled("${i||t}");\n\n// Or, use the value of a feature\nObject featureValue = flags.getFeatureValue("${i||a}");\n`},51845:e=>{"use strict";e.exports=(e,{FEATURE_FUNCTION:t,FEATURE_NAME:a,FEATURE_NAME_ALT:n,LIB_NAME:r,NPM_CLIENT:i},s)=>`import ${r} from "${i}"; //Add this line if you're using ${r} via npm\n\n${r}.init({\n    environmentID:"${e}",\n    onChange: (oldFlags, params) => { // Occurs whenever flags are changed\n        // Determines if the update came from the server or local cached storage\n        const { isFromServer } = params;\n\n        // Check for a feature\n        if (${r}.hasFeature("${s||a}")) {\n            ${t}();\n        }\n\n        // Or, use the value of a feature\n        const ${n} = ${r}.getValue("${s||n}");\n\n        // Check whether value has changed\n        const ${n}Old = oldFlags["${s||n}"]\n        && oldFlags["${s||n}"].value;\n\n        if (${n} !== ${n}Old) {\n            // Value has changed, do something here\n        }\n    }\n});\n`},91863:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,NPM_CLIENT:r})=>`// pages/_app.js\nimport ${n} from "${r}/isomorphic";\nimport { FlagsmithProvider } from 'flagsmith/react';\n\nexport default function App({ Component, pageProps, flagsmithState } {\n  return (\n    &lt;FlagsmithProvider\n      serverState={flagsmithState}\n      options={{\n        environmentID: '${e}',\n      }}\n      flagsmith={flagsmith}&gt;\n        &lt;Component {...pageProps} />\n    &lt;/FlagsmithProvider>\n  );\n}\n\nApp.getInitialProps = async () => {\n  await flagsmith.init({ // fetches flags on the server and passes them to the App \n      environmentID,\n  });\n  return { flagsmithState: flagsmith.getState() }\n}\n\n// pages/index.js\nimport flagsmith from 'flagsmith/isomorphic';\nimport { useFlags, useFlagsmith } from 'flagsmith/react';\n\nexport default function HomePage() {\n  const flags = useFlags(['${t}','${a}']); // only causes re-render if specified flag values / traits change\n  const ${t} = flags.${t}.enabled\n  const ${a} = flags.${a}.value\n  return (\n    &lt;>{...}&lt;/>\n  );\n}`},3046:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,NPM_NODE_CLIENT:r},i)=>`import Flagsmith from "${r}"; // Add this line if you're using ${n} via npm\n\nconst ${n} = new Flagsmith({\n    environmentKey: '${e}'\n});\n\nconst flags = await flagsmith.getEnvironmentFlags();\n\n// Check for a feature\nvar isEnabled = flags.isFeatureEnabled("${i||t}")\n\n// Or, use the value of a feature\nvar featureValue = flags.getFeatureValue('${i||a}');\n`},96812:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a})=>`use Flagsmith\\Flagsmith;\n\n$flagsmith = new Flagsmith('${e}');\n\n// Check for a feature\n$${t} = $flags->isFeatureEnabled('${t}');\n\n// Or use the value of a feature\n$${a} = $flags->getFeatureValue('${a}')\n`},16996:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a})=>`from flagsmith import Flagsmith\n\nflagsmith = Flagsmith(environment_key="${e}")\n\n# The method below triggers a network request\nflags = flagsmith.get_environment_flags()\n\n# Check for a feature\nis_enabled = flags.is_feature_enabled("${t}")\n\n# Or, use the value of a feature\nfeature_value = json.loads(flags.get_feature_value("${a}"))\n`},77603:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,NPM_CLIENT:r})=>`// App root\nimport ${n} from "${r}";\nimport { FlagsmithProvider } from 'flagsmith/react';\n\nexport default function App() {\n  return (\n    &lt;FlagsmithProvider\n      options={{\n        environmentID: '${e}',\n      }}\n      flagsmith={flagsmith}&gt;\n      {...Your app}\n    &lt;/FlagsmithProvider>\n  );\n}\n\n// Home Page\nimport flagsmith from 'flagsmith';\nimport { useFlags, useFlagsmith } from 'flagsmith/react';\n\nexport default function HomePage() {\n  const flags = useFlags(['${t}','${a}']); // only causes re-render if specified flag values / traits change\n  const ${t} = flags.${t}.enabled\n  const ${a} = flags.${a}.value\n  return (\n    &lt;>{...}&lt;/>\n  );\n}`},1978:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,NPM_RN_CLIENT:r})=>`// App root\nimport ${n} from "${r}";\nimport { FlagsmithProvider } from 'flagsmith/react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport default function App() {\n  return (\n    &lt;FlagsmithProvider\n      options={{\n        environmentID: '${e}',\n        cacheFlags: true,\n        AsyncStorage: AsyncStorage, // Pass in whatever storage you use if you wish to cache flag values\n      }}\n      flagsmith={flagsmith}&gt;\n      {...Your app}\n    &lt;/FlagsmithProvider>\n  );\n}\n\n// Home Page\nimport flagsmith from 'flagsmith';\nimport { useFlags, useFlagsmith } from 'flagsmith/react';\n\nexport default function HomePage() {\n  const flags = useFlags(['${t}','${a}']); // only causes re-render if specified flag values / traits change\n  const ${t} = flags.${t}.enabled\n  const ${a} = flags.${a}.value\n  return (\n    &lt;>{...}&lt;/>\n  );\n}`},87534:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a},n)=>`require "flagsmith"\n\n$flagsmith = Flagsmith::Client.new(\n    environment_key: '${e}'\n)\n\n// Check for a feature\n$is_enabled = $flags.is_feature_enabled('${n||t}')\n\n// Or, use the value of a feature\n$feature_value = $flags.get_feature_value('${n||a}')\n`},65052:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a})=>`\nuse flagsmith::{Flag, Flagsmith, FlagsmithOptions};\n\nlet options = FlagsmithOptions {..Default::default()};\nlet flagsmith = Flagsmith::new(\n    "${e}".to_string(),\n    options,\n);\n\n// The method below triggers a network request\nlet flags = flagsmith.get_environment_flags().unwrap();\n\n// Check for a feature\nlet show_button = flags.is_feature_enabled("${t}").unwrap();\n\nlet button_data = flags.get_feature_value_as_string("${a}").unwrap();\n`},36962:e=>{"use strict";e.exports=()=>'You can access the API directly with tools like <a href="https://curl.haxx.se/">curl</a> or <a href=\'https://httpie.org/\'>httpie</a>, \nor with clients for languages that we do not currently have SDKs for.\n\nYou can view the API via Swagger at <a href="https://api.flagsmith.com/api/v1/docs/">https://api.flagsmith.com/api/v1/docs/</a>.\n'},89250:(e,t,a)=>{"use strict";var n,r=(n=a(73719))&&n.__esModule?n:{default:n};e.exports=()=>`// Package Manager\nPM> Install-Package Flagsmith -Version 4.0.0\n\n// .NET CLI\ndotnet add package Flagsmith --version 4.0.0\n\n// PackageReference\n${r.default.escapeHtml('<PackageReference Include="Flagsmith" Version="4.0.0" />')}\n\n// Paket CLI\npaket add Flagsmith --version 4.0.0\n`},26896:e=>{"use strict";e.exports=()=>"The client library is available from the <a href='https://pub.dev/packages/flagsmith'>https://pub.dev/packages/flagsmith</a>:\n\ndependencies:\n  flagsmith:\n"},52986:e=>{"use strict";e.exports=()=>'go get github.com/flagsmith/flagsmith-go-client\n\nimport (\n  "github.com/flagsmith/flagsmith-go-client"\n)\n'},94055:e=>{"use strict";e.exports=()=>"// cocoapods\npod 'FlagsmithClient', '~> 1.0.1'\n"},22752:(e,t,a)=>{"use strict";var n,r=(n=a(73719))&&n.__esModule?n:{default:n};e.exports=()=>`// Maven\n${r.default.escapeHtml("<dependency>")}\n${r.default.escapeHtml("<groupId>com.flagsmith</groupId>")}\n${r.default.escapeHtml("<artifactId>flagsmith-java-client</artifactId>")}\n${r.default.escapeHtml("<version>5.0.0/version>")}\n</dependency>\n\n// Gradle\nimplementation 'com.flagsmith:flagsmith-java-client:5.0.0'\n`},64783:(e,t,a)=>{"use strict";var n,r=(n=a(73719))&&n.__esModule?n:{default:n};e.exports=({NPM_CLIENT:e,URL_CLIENT:t})=>`// npm\nnpm i ${e} --save\n\n// yarn\nyarn add ${e}\n\n// Or script tag\n${r.default.escapeHtml(`<script src="${t}"><\/script>`)}\n`},60096:e=>{"use strict";e.exports=({NPM_NODE_CLIENT:e})=>`// npm\nnpm i ${e} --save\n\n// yarn\nyarn add ${e}\n`},31730:e=>{"use strict";e.exports=()=>"composer require flagsmith/flagsmith-php-client\n"},58182:e=>{"use strict";e.exports=()=>"pip install flagsmith\n"},44452:e=>{"use strict";e.exports=({NPM_CLIENT:e,NPM_RN_CLIENT:t})=>`// npm\nnpm i ${e} ${t} --save\n\n// yarn\nyarn add ${e} ${t}\n\n`},27168:e=>{"use strict";e.exports=()=>"gem install flagsmith\n"},49886:e=>{"use strict";e.exports=()=>'The package can be found at <a href="https://crates.io/crates/flagsmith">https://crates.io/crates/flagsmith</a>;'},52450:e=>{"use strict";e.exports=(e,{TRAIT_NAME:t,USER_ID:a},n)=>`# This will create a user in the dashboard if they don't already exist\n\ncurl -X "POST" "https://edge.api.flagsmith.com/api/v1/identities/"\n     -H 'x-environment-key: ${e}'\n     -H 'Content-Type: application/json; charset=utf-8'\n     -d $'{\n  "traits": [\n    {\n      "trait_key": "${t}",\n      "trait_value": 42\n    },\n  ],\n  "identifier": "${n||a}"\n}'\n`},58882:e=>{"use strict";e.exports=(e,{TRAIT_NAME:t},a)=>`using Flagsmith;\n\nFlagsmithClient _flagsmithClient;\n_flagsmithClient = new("${e}");\n\nvar traitList = new List<Trait> { new Trait(${t}, 42) };\n\n# Identify a user, set their traits and retrieve the flags\nvar flags = _flagsmithClient.GetIdentityFlags(${a}, traitList).Result;\n`},41520:e=>{"use strict";e.exports=(e,{TRAIT_NAME:t,USER_ID:a},n)=>`\nfinal user = Identity(identifier: '${n||a}');\n\n// Create a new user trait for the above identity\nflagsmithClient.createTrait(\n    value: TraitWithIdentity(\n    identity: user\n    key: '${t}',\n    value: '21',\n    ),\n);\n\n// Update the previously created trait with a new value\nflagsmithClient.updateTraits(value: [\n    TraitWithIdentity(\n    identity: user,\n    key: '${t}',\n    value: '20',\n    ),\n]);\n`},58138:e=>{"use strict";e.exports=(e,{TRAIT_NAME:t,USER_ID:a},n)=>`trait := flagsmith.Trait{TraitKey: "${t}", TraitValue: "42"}\ntraits = []*flagsmith.Trait{&trait}\n\n// Identify a user, set their traits and retrieve the flags\nflags, _ := client.GetIdentityFlags("${n||a}", traits)\n`},9607:e=>{"use strict";e.exports=(e,{TRAIT_NAME:t},a)=>`do {\n    let trait = Trait(key: "${t}", value: 42)\n    try await flagsmith.setTrait(trait, forIdentity: "${a}")\n} catch {\n    print(error)\n}\n`},95168:e=>{"use strict";e.exports=(e,{LIB_NAME:t,LIB_NAME_JAVA:a,TRAIT_NAME:n},r)=>`${a} ${t} = ${a}\n.newBuilder()\n.setApiKey("${e}")\n.build();\n\nMap<String, Object> traits = new HashMap<String, Object>();\ntraits.put("${n}", 42);\n\n// Identify a user, set their traits and retrieve the flags \nFlags flags = flagsmith.getIdentityFlags("${r}", traits);\n`},96111:e=>{"use strict";e.exports=(e,{LIB_NAME:t,TRAIT_NAME:a,USER_ID:n},r)=>`${t}.identify("${r||n}"); // This will create a user in the dashboard if they don't already exist\n\n// Set a user trait, setting traits will retrieve new flags and trigger an onChange event\n${t}.setTrait("${a}", 21);\n`},10957:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,TRAIT_NAME:r},i)=>`\n// Option 1: Identify clientside\n//Home Page\nimport flagsmith from '${n}/isomorphic';\nimport { useFlags, useFlagsmith } from 'flagsmith/react';\n\nexport default function HomePage() {\n  const flags = useFlags(['${t}','${a}']); // only causes re-render if specified flag values / traits change\n  const ${t} = flags.${t}.enabled\n  const ${a} = flags.${a}.value\n\n  const identify = () => {\n    flagsmith.identify('${i}', {${r}:21}); // only causes re-render if the user has overrides / segment overrides for ${t} or ${a}\n  };\n\n  const setTrait = () => {\n    ${n}.setTrait("${r}", 22 // only causes re-render if the user has overrides / segment overrides for ${t} or ${a}\n  };\n\n  return (\n    &lt;>{...}&lt;/>\n  );\n}\n\n//Option 2: Alternatively, if you wish to do this serverside\n\nexport default function App({ Component, pageProps, flagsmithState } {\n  return (\n    &lt;FlagsmithProvider\n      serverState={flagsmithState}\n      options={{\n        environmentID: '${e}',\n      }}\n      flagsmith={flagsmith}&gt;\n        &lt;Component {...pageProps} />\n    &lt;/FlagsmithProvider>\n  );\n}\n\nMyApp.getInitialProps = async () => {\n  // calls page's \`getInitialProps\` and fills \`appProps.pageProps\`\n  await flagsmith.init({ // fetches flags on the server\n      environmentID,\n      preventFetch: true\n  });\n  await flagsmith.identify('${i}', {${r}: 21}); // Will hydrate the app with the user's flags\n  await flagsmith.setTrait('${r}', 22); // Will hydrate the app with the user's flags, re-evaluating segments\n  return { flagsmithState: flagsmith.getState() }\n}\n`},39968:e=>{"use strict";e.exports=(e,{TRAIT_NAME:t,USER_ID:a})=>`const Flagsmith = require('flagsmith-nodejs');\n\nconst flagsmith = new Flagsmith(\n    environmentKey: '${e}'\n);\n\n// Identify a user, set their traits and retrieve the flags\nconst traits = { ${t}: 'robin_reliant' };\nconst flags = await flagsmith.getIdentityFlags('${a}', traits);\n`},2034:e=>{"use strict";e.exports=(e,{TRAIT_NAME:t},a)=>`use Flagsmith\\Flagsmith;\n\n$flagsmith = new Flagsmith('${e}');\n\n$traits = (object) [ '${t}' => 42 ];\n\n// Identify a user, set their traits and retrieve the flags\n$flags = $flagsmith->getIdentityFlags("${a}", $traits);\n`},98694:e=>{"use strict";e.exports=(e,{TRAIT_NAME:t},a)=>`from flagsmith import Flagsmith\n\nflagsmith = Flagsmith(environment_key="${e}")\n\ntraits = {"${t}": 42}\n\n# Identify a user, set their traits and retrieve the flags\nidentity_flags = flagsmith.get_identity_flags(identifier="${a}", traits=traits)\n`},17465:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,TRAIT_NAME:r},i)=>`\n// Home Page\nimport flagsmith from '${n}';\nimport { useFlags, useFlagsmith } from 'flagsmith/react';\n\nexport default function HomePage() {\n  const flags = useFlags(['${t}','${a}']); // only causes re-render if specified flag values / traits change\n  const ${t} = flags.${t}.enabled\n  const ${a} = flags.${a}.value\n\n  const identify = () => {\n    flagsmith.identify('${i}', {${r}:21}); // only causes re-render if the user has overrides / segment overrides for ${t} or ${a}\n  };\n\n  const setTrait = () => {\n    ${n}.setTrait("${r}", 22); // only causes re-render if the user has overrides / segment overrides for ${t} or ${a}\n  };\n\n  return (\n    &lt;>{...}&lt;/>\n  );\n}`},26308:e=>{"use strict";e.exports=(e,{FEATURE_NAME:t,FEATURE_NAME_ALT:a,LIB_NAME:n,NPM_RN_CLIENT:r,TRAIT_NAME:i},s)=>`\n// Home Page\nimport flagsmith from '${r}';\nimport { useFlags, useFlagsmith } from 'flagsmith/react';\n\nexport default function HomePage() {\n  const flags = useFlags(['${t}','${a}']); // only causes re-render if specified flag values / traits change\n  const ${t} = flags.${t}.enabled\n  const ${a} = flags.${a}.value\n  \n  const identify = () => {\n    flagsmith.identify('${s}', {${i}:21}); // only causes re-render if the user has overrides / segment overrides for ${t} or ${a}\n  };\n  \n  const setTrait = () => {\n    ${n}.setTrait("${i}", 22); // only causes re-render if the user has overrides / segment overrides for ${t} or ${a}\n  };\n  \n  const decrementTrait = () => {\n   ${n}.incrementTrait("${i}", -1); // only causes re-render if the user has overrides / segment overrides for ${t} or ${a}\n  };\n  \n  return (\n    &lt;>{...}&lt;/>\n  );\n}`},76192:e=>{"use strict";e.exports=(e,{TRAIT_NAME:t},a)=>`require "flagsmith"\n\n$flagsmith = Flagsmith::Client.new(\n    environment_key: '${e}'\n)\n\ntraits = {"${t}": 42}\n\n// Identify a user, set their traits and retrieve the flags\nidentity_flags = $flagsmith.get_identity_flags("${a}", traits)\n`},84510:e=>{"use strict";e.exports=(e,{USER_ID:t},a)=>`\nuse flagsmith::{Flag, Flagsmith, FlagsmithOptions};\nuse flagsmith_flag_engine::types::{FlagsmithValue, FlagsmithValueType};\nuse flagsmith_flag_engine::identities::Trait;\n\nlet options = FlagsmithOptions {..Default::default()};\nlet flagsmith = Flagsmith::new(\n    "${e}".to_string(),\n    options,\n);\n\nlet trait_key = "trait_key1";\nlet trait_value = "trai_value1";\n\nlet traits = vec![Trait {\n    trait_key: trait_key.to_string(),\n    trait_value: FlagsmithValue {\n        value: trait_value.to_string(),\n        value_type: FlagsmithValueType::String,\n    },\n}];\n// The method below triggers a network request\nlet identity_flags = flagsmith.get_identity_flags("${a||t}", Some(traits)).unwrap();\n`},12339:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={FEATURE_FUNCTION:"myCoolFeature",FEATURE_NAME:"my_cool_feature",FEATURE_NAME_ALT:"banner_size",FEATURE_NAME_ALT_VALUE:"big",LIB_NAME:"flagsmith",LIB_NAME_JAVA:"FlagsmithClient",NPM_CLIENT:"flagsmith",NPM_NODE_CLIENT:"flagsmith-nodejs",NPM_RN_CLIENT:"react-native-flagsmith",SEGMENT_NAME:"superUsers",TRAIT_NAME:"age",URL_CLIENT:"https://cdn.jsdelivr.net/npm/flagsmith/index.js",USER_FEATURE_FUNCTION:"myEvenCoolerFeature",USER_FEATURE_NAME:"my_even_cooler_feature",USER_ID:"user_123456"};t.default={codeHelp:{CREATE_USER:(e,t=n.USER_ID)=>({".NET":a(27334)(e,n,t),Flutter:a(81580)(e,n,t),Go:a(74558)(e,n,t),Java:a(15100)(e,n,t),JavaScript:a(24419)(e,n,t),"Next.js":a(72905)(e,n,t),"Node JS":a(11252)(e,n,t),PHP:a(9342)(e,n,t),Python:a(19298)(e,n,t),React:a(82581)(e,n,t),"React Native":a(77728)(e,n,t),Ruby:a(79132)(e,n,t),Rust:a(25122)(e,n,t),curl:a(26326)(e,n,t),iOS:a(89771)(e,n,t)}),INIT:e=>({".NET":a(6328)(e,n),Flutter:a(44594)(e,n),Go:a(62072)(e,n),Java:a(34518)(e,n),JavaScript:a(51845)(e,n),"Next.js":a(91863)(e,n),"Node JS":a(3046)(e,n),PHP:a(96812)(e,n),Python:a(16996)(e,n),React:a(77603)(e,n),"React Native":a(1978)(e,n),Ruby:a(87534)(e,n),Rust:a(65052)(e,n),curl:a(86856)(e,n),iOS:a(49929)(e,n)}),INSTALL:{".NET":a(89250)(n),Flutter:a(26896)(n),Go:a(52986)(n),Java:a(22752)(n),JavaScript:a(64783)(n),"Next.js":a(64783)(n),"Node JS":a(60096)(n),PHP:a(31730)(n),Python:a(58182)(n),React:a(64783)(n),"React Native":a(44452)(n),Ruby:a(27168)(n),Rust:a(49886)(n),curl:a(36962)(n),iOS:a(94055)(n)},USER_TRAITS:(e,t)=>({".NET":a(58882)(e,n,t),Flutter:a(41520)(e,n,t),Go:a(58138)(e,n,t),Java:a(95168)(e,n,t),JavaScript:a(96111)(e,n,t),"Next.js":a(10957)(e,n,t),"Node JS":a(39968)(e,n,t),PHP:a(2034)(e,n,t),Python:a(98694)(e,n,t),React:a(17465)(e,n,t),"React Native":a(26308)(e,n,t),Ruby:a(76192)(e,n,t),Rust:a(84510)(e,n,t),curl:a(52450)(e,n,t),iOS:a(9607)(e,n,t)}),keys:{Java:"java",JavaScript:"javascript","Node JS":"javascript","React Native":"javascript"}},defaultRule:{operator:"EQUAL",property:"",value:""},environmentPermissions:e=>`To manage this feature you need the <i>${e}</i> permission.<br/>Please contact a member who has administrator privileges.`,events:{ACCEPT_INVITE:e=>({category:"Invite",event:"Invite accepted",extra:e}),CREATE_ENVIRONMENT:{category:"Environment",event:"Environment created"},CREATE_FEATURE:{category:"Features",event:"Feature created"},CREATE_FIRST_FEATURE:{category:"First",event:"First Feature created"},CREATE_FIRST_ORGANISATION:{category:"First",event:"First Organisation created"},CREATE_FIRST_PROJECT:{category:"First",event:"First Project created"},CREATE_FIRST_SEGMENT:{category:"First",event:"First Segment created"},CREATE_GROUP:{category:"Group",event:"Group created"},CREATE_ORGANISATION:{category:"Organisation",event:"Organisation created"},CREATE_PROJECT:{category:"Project",event:"Project created"},CREATE_SEGMENT:{category:"Segments",event:"Segment created"},CREATE_USER_FEATURE:{category:"User Features",event:"User feature created"},DELETE_GROUP:{category:"Group",event:"Group deleted"},DELETE_INVITE:{category:"Invite",event:"Invite deleted"},DELETE_ORGANISATION:{category:"Organisation",event:"Organisation deleted"},DELETE_USER:{category:"Organisation",event:"User deleted"},EDIT_ENVIRONMENT:{category:"Environment",event:"Environment edited"},EDIT_FEATURE:{category:"Features",event:"Feature edited"},EDIT_ORGANISATION:{category:"Organisation",event:"Organisation edited"},EDIT_PROJECT:{category:"Project",event:"Project edited"},EDIT_USER_FEATURE:{category:"Features",event:"User feature edited"},INVITE:{category:"Invite",event:"Invite sent"},LOGIN:{category:"User",event:"User login"},OAUTH:e=>({category:"User",event:`User oauth ${e}`}),REFERRER_CONVERSION:e=>({category:"Referrer",event:`${e} converted`}),REFERRER_REGISTERED:e=>({category:"Referrer",event:`${e} registered`}),REGISTER:{category:"User",event:"User register"},REMOVE_ENVIRONMENT:{category:"Environment",event:"Environment edited"},REMOVE_FEATURE:{category:"Features",event:"Feature removed"},REMOVE_PROJECT:{category:"Project",event:"Project removed"},REMOVE_USER_FEATURE:{category:"User Features",event:"User feature removed"},RESEND_INVITE:{category:"Invite",event:"Invite resent"},TOGGLE_FEATURE:{category:"Features",event:"Feature toggled"},TOGGLE_USER_FEATURE:{category:"User Features",event:"User feature toggled"},TRY_IT:{category:"TryIt",event:"Try it clicked"},UPDATE_USER_ROLE:{category:"Organisation",event:"Updated user role"},VIEW_FEATURE:{category:"Features",event:"Feature viewed"},VIEW_SEGMENT:{category:"Segment",event:"Segment viewed"},VIEW_USER_FEATURE:{category:"User Features",event:"User feature viewed"}},exampleAuditWebhook:'{\n "created_date": "2020-02-23T17:30:57.006318Z",\n "log": "New Flag / Remote Config created: my_feature",\n "author": {\n  "id": 3,\n  "email": "user@domain.com",\n  "first_name": "Kyle",\n  "last_name": "Johnson"\n },\n "environment": null,\n "project": {\n  "id": 6,\n  "name": "Project name",\n  "organisation": 1\n },\n "related_object_id": 6,\n "related_object_type": "FEATURE"\n}',exampleWebhook:'{\n "data": {\n  "changed_by": "Ben Rometsch",\n  "new_state": {\n   "enabled": true,\n   "environment": {\n    "id": 23,\n    "name": "Development"\n   },\n   "feature": {\n    "created_date": "2021-02-10T20:03:43.348556Z",\n    "default_enabled": false,\n    "description": "Show html in a butter bar for certain users",\n    "id": 7168,\n    "initial_value": null,\n    "name": "butter_bar",\n    "project": {\n     "id": 12,\n     "name": "Flagsmith Website"\n    },\n    "type": "CONFIG"\n   },\n   "feature_segment": null,\n   "feature_state_value": "<strong>\\nYou are using the develop environment.\\n</strong>",\n   "identity": null,\n   "identity_identifier": null\n  },\n  "previous_state": {\n   "enabled": false,\n   "environment": {\n    "id": 23,\n    "name": "Development"\n   },\n   "feature": {\n    "created_date": "2021-02-10T20:03:43.348556Z",\n    "default_enabled": false,\n    "description": "Show html in a butter bar for certain users",\n    "id": 7168,\n    "initial_value": null,\n    "name": "butter_bar",\n    "project": {\n     "id": 12,\n     "name": "Flagsmith Website"\n    },\n    "type": "CONFIG"\n   },\n   "feature_segment": null,\n   "feature_state_value": "<strong>\\nYou are using the develop environment.\\n</strong>",\n   "identity": null,\n   "identity_identifier": null\n  },\n  "timestamp": "2021-06-18T07:50:26.595298Z"\n },\n "event_type": "FLAG_UPDATED"\n}',forms:{maxLength:{FEATURE_ID:150,SEGMENT_ID:150,TRAITS_ID:150}},modals:{PAYMENT:"Payment Modal"},organisationPermissions:e=>`To manage this feature you need the <i>${e}</i> permission for this organisastion.<br/>Please contact a member of this organisation who has administrator privileges.`,pages:{ACCOUNT:"Account Page",AUDIT_LOG:"Audit Log Page",COMING_SOON:"Coming Soon Page",CREATE_ENVIRONMENT:"Create Environment Page",DOCUMENTATION:"Documentation Page",ENVIRONMENT_SETTINGS:"Environment Settings Page",FEATURES:"Features Page",HOME:"Home Page",INTEGRATIONS:"Integrations Page",INVITE:"User Invited Page",NOT_FOUND:"404 Page",ORGANISATION_SETTINGS:"Organisation Settings Page",POLICIES:"Terms & Policies Page",PRICING:"Pricing Page",PROJECT_SELECT:"Project Select Page",PROJECT_SETTINGS:"Project Settings Page",RESET_PASSWORD:"Reset Password Page",USER:"User Page",USERS:"Users Page",WHAT_ARE_FEATURE_FLAGS:"What are feature flags Page"},projectPermissions:e=>`To use this feature you need the <i>${e}</i> permission for this project.<br/>Please contact a member of this project who has administrator privileges.`,roles:{ADMIN:"Organisation Administrator",USER:"User"},simulate:{},strings:{AUDIT_WEBHOOKS_DESCRIPTION:"Receive a webhook for when an audit log is received.",ENVIRONMENT_DESCRIPTION:"Environments are versions of your projects, environments within a project all share the same features but can be individually turned on/off or have different values.",ENVIRONMENT_OVERRIDE_DESCRIPTION:e=>"Features are created once per project.",FEATURE_FLAG_DESCRIPTION:"A feature that you can turn on or off per user, e.g. instant messaging for a mobile app or an endpoint for an API.",HIDE_FROM_SDKS_DESCRIPTION:"Enable this if you want to prevent the Flagsmith API from returning this feature regardless of if it is enabled. Use this if you don't want users to see that a feature name whilst it is in development.",IDENTITY_OVERRIDES_DESCRIPTION:"See which identities have specific overridden values for this feature.<br/>Identity overrides take priority over segment overrides.",ORGANISATION_DESCRIPTION:"This is used to create a default organisation for team members to create and manage projects.",REMOTE_CONFIG_DESCRIPTION:"Features can have values as well as being simply on or off, e.g. a font size for a banner.",REMOTE_CONFIG_DESCRIPTION_VARIATION:"Features can have values as well as being simply on or off, e.g. a font size for a banner.<br/>Variation values are set per project.",SEGMENT_OVERRIDES_DESCRIPTION:"Set different values for your feature based on what segments users are in.",TAGS_DESCRIPTION:'Organise your flags with tags, tagging your features as "<strong>protected</strong>" will prevent them from accidentally being deleted.',USER_PROPERTY_DESCRIPTION:"The name of the user trait or custom property belonging to the user, e.g. firstName",WEBHOOKS_DESCRIPTION:"Receive a webhook for when feature values are changed."},tagColors:["#3d4db6","#ea5a45","#f1d502","#60bd4e","#fe5505","#1492f4","#14c0f4","#c277e0","#039587","#344562","#ffa500","#3cb371","#d3d3d3","#5D6D7E","#641E16","#5B2C6F","#D35400","#F08080","#AAC200","#DE3163"]}},98606:e=>{"use strict";function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},t.apply(this,arguments)}e.exports={_request(e,a,n,r={}){const i={headers:t({Accept:"application/json"},r),method:e,timeout:6e4};"get"!==e&&(i.headers["Content-Type"]="application/json; charset=utf-8"),this.token&&(i.headers.AUTHORIZATION=`Token ${this.token}`);let s=a;const o=a.split(/^(https?:\/\/)?([^@/:]+:[^@/:]+)@/);if(4===o.length&&(s=(o[1]||"http://")+o[o.length-1],i.headers.AUTHORIZATION=`Basic ${btoa(o[o.length-2])}`),n)if("get"===e){const e=(e=>{const t=encodeURIComponent;return Object.keys(e).map((a=>`${t(a)}=${t(e[a])}`)).join("&")})(n);s+=-1!==s.indexOf("?")?`&${e}`:`?${e}`}else i.body=JSON.stringify(n);else"post"!==e&&"put"!==e||(i.body="{}");return fetch(s,i).then(this.status).then((e=>{let t=e.headers.get("content-type");return t||(t=e.headers.get("Content-Type")),t&&-1!==t.indexOf("application/json")?e.json():{}})).then((e=>e))},delete(e,t,a){return this._request("delete",e,t,a)},get(e,t,a){return this._request("get",e,t||null,a)},post(e,t,a){return this._request("post",e,t,a)},put(e,t,a){return this._request("put",e,t,a)},setToken(e){this.token=e},status:e=>e.status>=200&&e.status<300?Promise.resolve(e):(401===e.status&&AppActions.setUser(null),e.clone().text().then((e=>{0})),Promise.reject(e)),token:"",type:""}},60472:(e,t,a)=>{"use strict";const n=Object.assign({},a(32143),{ACCEPT_INVITE:"ACCEPT_INVITE",ACTION_CHANGE_REQUEST:"ACTION_CHANGE_REQUEST",CHANGE_USER_FLAG:"CHANGE_USER_FLAG",CONFIRM_TWO_FACTOR:"CONFIRM_TWO_FACTOR",CREATE_ENV:"CREATE_ENV",CREATE_FLAG:"CREATE_FLAG",CREATE_GROUP:"CREATE_GROUP",CREATE_ORGANISATION:"CREATE_ORGANISATION",CREATE_PROJECT:"CREATE_PROJECT",DELETE_CHANGE_REQUEST:"DELETE_CHANGE_REQUEST",DELETE_ENVIRONMENT:"DELETE_ENVIRONMENT",DELETE_IDENTITY_TRAIT:"DELETE_IDENTITY_TRAIT",DELETE_INVITE:"DELETE_INVITE",DELETE_ORGANISATION:"DELETE_ORGANISATION",DELETE_PROJECT:"DELETE_PROJECT",DELETE_USER:"DELETE_USER",DISABLE_TWO_FACTOR:"DISABLE_TWO_FACTOR",EDIT_ENVIRONMENT:"EDIT_ENVIRONMENT",EDIT_ENVIRONMENT_FLAG:"EDIT_ENVIRONMENT_FLAG",EDIT_ENVIRONMENT_FLAG_CHANGE_REQUEST:"EDIT_ENVIRONMENT_FLAG_CHANGE_REQUEST",EDIT_FEATURE:"EDIT_FEATURE",EDIT_FEATURE_MV:"EDIT_FEATURE_MV",EDIT_ORGANISATION:"EDIT_ORGANISATION",EDIT_PROJECT:"EDIT_PROJECT",EDIT_TRAIT:"EDIT_TRAIT",EDIT_USER_FLAG:"EDIT_USER_FLAG",ENABLE_TWO_FACTOR:"ENABLE_TWO_FACTOR",GET_CHANGE_REQUEST:"GET_CHANGE_REQUEST",GET_CHANGE_REQUESTS:"GET_CHANGE_REQUESTS",GET_ENVIRONMENT:"GET_ENVIRONMENT",GET_FEATURE_USAGE:"GET_FEATURE_USAGE",GET_FLAGS:"GET_FLAGS",GET_GROUPS:"GET_GROUPS",GET_IDENTITY:"GET_IDENTITY",GET_IDENTITY_SEGMENTS:"GET_IDENTITY_SEGMENTS",GET_ORGANISATION:"GET_ORGANISATION",GET_PROJECT:"GET_PROJECT",INVALIDATE_INVITE_LINK:"INVALIDATE_INVITE_LINK",INVITE_USERS:"INVITE_USERS",MIGRATE_PROJECT:"MIGRATE_PROJECT",OAUTH:"OAUTH",REFRESH_FEATURES:"REFRESH_FEATURES",REMOVE_FLAG:"REMOVE_FLAG",REMOVE_MULTIVARIATE_OPTION:"REMOVE_MULTIVARIATE_OPTION",REMOVE_USER_FLAG:"REMOVE_USER_FLAG",RESEND_INVITE:"RESEND_INVITE",RESTORE_MULTIVARIATE_OPTION:"RESTORE_MULTIVARIATE_OPTION",SEARCH_FLAGS:"SEARCH_FLAGS",SELECT_ENVIRONMENT:"SELECT_ENVIRONMENT",SELECT_ORGANISATION:"SELECT_ORGANISATION",TOGGLE_FLAG:"TOGGLE_FLAG",TOGGLE_USER_FLAG:"TOGGLE_USER_FLAG",TWO_FACTOR_LOGIN:"TWO_FACTOR_LOGIN",UPDATE_CHANGE_REQUEST:"UPDATE_CHANGE_REQUEST",UPDATE_GROUP:"UPDATE_GROUP",UPDATE_SUBSCRIPTION:"UPDATE_SUBSCRIPTION",UPDATE_USER_ROLE:"UPDATE_USER_ROLE",GET_ALL_TRAITS:"GET_ALL_TRAITS",GET_LOKI_VERSION:"GET_LOKI_VERSION",GET_BUNDLE_VERSIONS:"GET_BUNDLE_VERSIONS"});window.Actions=n,e.exports=n},6837:(e,t,a)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},n.apply(this,arguments)}const r=a(5243),i=Object.assign({},a(17084),{acceptInvite(e){r.handleViewAction({actionType:Actions.ACCEPT_INVITE,id:e})},actionChangeRequest(e,t,a){r.handleViewAction({action:t,actionType:Actions.ACTION_CHANGE_REQUEST,cb:a,id:e})},changeUserFlag(e){r.handleViewAction({actionType:Actions.CHANGE_USER_FLAG,identity:e})},confirmTwoFactor(e,t){r.handleViewAction({actionType:Actions.CONFIRM_TWO_FACTOR,onError:t,pin:e})},createEnv(e,t,a,n){r.handleViewAction({actionType:Actions.CREATE_ENV,cloneId:a,description:n,name:e,projectId:t})},createFlag(e,t,a,n){r.handleViewAction({actionType:Actions.CREATE_FLAG,environmentId:t,flag:a,projectId:e,segmentOverrides:n})},createGroup(e,t){r.handleViewAction({actionType:Actions.CREATE_GROUP,data:t,orgId:e})},createOrganisation(e){r.handleViewAction({actionType:Actions.CREATE_ORGANISATION,name:e})},createProject(e){r.handleViewAction({actionType:Actions.CREATE_PROJECT,name:e})},deleteChangeRequest(e,t){r.handleViewAction({actionType:Actions.DELETE_CHANGE_REQUEST,cb:t,id:e})},deleteEnv(e){r.handleViewAction({actionType:Actions.DELETE_ENVIRONMENT,env:e})},deleteIdentityTrait(e,t,a){r.handleViewAction({actionType:Actions.DELETE_IDENTITY_TRAIT,envId:e,id:a,identity:t})},deleteInvite(e){r.handleViewAction({actionType:Actions.DELETE_INVITE,id:e})},deleteOrganisation(){r.handleViewAction({actionType:Actions.DELETE_ORGANISATION})},deleteProject(e){r.handleViewAction({actionType:Actions.DELETE_PROJECT,id:e})},deleteUser(e){r.handleViewAction({actionType:Actions.DELETE_USER,id:e})},disableTwoFactor(){r.handleViewAction({actionType:Actions.DISABLE_TWO_FACTOR})},editEnv(e){r.handleViewAction({actionType:Actions.EDIT_ENVIRONMENT,env:e})},editEnvironmentFlag(e,t,a,n,i,s,o,l){r.handleViewAction({actionType:Actions.EDIT_ENVIRONMENT_FLAG,environmentFlag:i,environmentId:t,flag:a,mode:o,onComplete:l,projectFlag:n,projectId:e,segmentOverrides:s})},editEnvironmentFlagChangeRequest(e,t,a,n,i,s,o,l){r.handleViewAction({actionType:Actions.EDIT_ENVIRONMENT_FLAG_CHANGE_REQUEST,changeRequest:o,commit:l,environmentFlag:i,environmentId:t,flag:a,projectFlag:n,projectId:e,segmentOverrides:s})},editFeature(e,t,a){r.handleViewAction({actionType:Actions.EDIT_FEATURE,flag:t,onComplete:a,projectId:e})},editFeatureMv(e,t,a){r.handleViewAction({actionType:Actions.EDIT_FEATURE_MV,flag:t,onComplete:a,projectId:e})},editOrganisation(e){r.handleViewAction({actionType:Actions.EDIT_ORGANISATION,org:e})},editProject(e,t){r.handleViewAction({actionType:Actions.EDIT_PROJECT,id:e,project:t})},editTrait(e){r.handleViewAction(n({actionType:Actions.EDIT_TRAIT},e))},editUserFlag(e){r.handleViewAction(n({actionType:Actions.EDIT_USER_FLAG},e))},enableTwoFactor(){r.handleViewAction({actionType:Actions.ENABLE_TWO_FACTOR})},getChangeRequest(e,t,a){r.handleViewAction({actionType:Actions.GET_CHANGE_REQUEST,environmentId:a,id:e,projectId:t})},getChangeRequests(e,t,a){},getFeatureUsage(e,t,a,n){r.handleViewAction({actionType:Actions.GET_FEATURE_USAGE,environmentId:t,flag:a,period:n,projectId:e})},getFeatures(e,t,a,n,i,s,o,l){r.handleViewAction({actionType:Actions.GET_FLAGS,environmentId:t,filter:o,force:a,page:s,pageSize:l,projectId:e,search:n,sort:i})},getGroups(e){r.handleViewAction({actionType:Actions.GET_GROUPS,orgId:e})},getIdentity(e,t){r.handleViewAction({actionType:Actions.GET_IDENTITY,envId:e,id:t})},getIdentitySegments(e,t){r.handleViewAction({actionType:Actions.GET_IDENTITY_SEGMENTS,id:t,projectId:e})},getOrganisation(e){r.handleViewAction({actionType:Actions.GET_ORGANISATION,id:e})},getProject(e){r.handleViewAction({actionType:Actions.GET_PROJECT,projectId:e})},invalidateInviteLink(e){r.handleViewAction({actionType:Actions.INVALIDATE_INVITE_LINK,link:e})},inviteUsers(e){r.handleViewAction({actionType:Actions.INVITE_USERS,invites:e})},migrateProject(e){r.handleViewAction({actionType:Actions.MIGRATE_PROJECT,projectId:e})},oauthLogin(e,t){r.handleViewAction({actionType:Actions.OAUTH,data:t,oauthType:e})},refreshFeatures(e,t){r.handleViewAction({actionType:Actions.REFRESH_FEATURES,environmentId:t,projectId:e})},refreshOrganisation(){r.handleViewAction({actionType:Actions.GET_ORGANISATION,force:!0})},removeFlag(e,t){r.handleViewAction({actionType:Actions.REMOVE_FLAG,flag:t,projectId:e})},removeMultivariateOption(e,t,a){r.handleViewAction({actionType:Actions.REMOVE_MULTIVARIATE_OPTION,featureId:t,optionId:a,projectId:e})},removeUserFlag({environmentId:e,identity:t,identityFlag:a}){r.handleViewAction({actionType:Actions.REMOVE_USER_FLAG,environmentId:e,identity:t,identityFlag:a})},resendInvite(e){r.handleViewAction({actionType:Actions.RESEND_INVITE,id:e})},resetPassword(e){r.handleViewAction(n({actionType:Actions.RESET_PASSWORD},e))},saveEnv(e){r.handleViewAction({actionType:Actions.EDIT_ENVIRONMENT,name:e})},searchFeatures(e,t,a,n,i,s,o,l){r.handleViewAction({actionType:Actions.SEARCH_FLAGS,environmentId:t,filter:o,force:a,page:s,pageSize:l,projectId:e,search:n,sort:i})},selectOrganisation(e){r.handleViewAction({actionType:Actions.SELECT_ORGANISATION,id:e})},toggleFlag(e,t,a,n,i){r.handleViewAction({actionType:Actions.TOGGLE_FLAG,comment:a,environmentFlags:n,environments:t,index:e,projectFlags:i})},toggleUserFlag(e){r.handleViewAction(n({actionType:Actions.TOGGLE_USER_FLAG},e))},twoFactorLogin(e,t){r.handleViewAction({actionType:Actions.TWO_FACTOR_LOGIN,onError:t,pin:e})},updateChangeRequest(e){r.handleViewAction({actionType:Actions.UPDATE_CHANGE_REQUEST,changeRequest:e})},updateGroup(e,t){r.handleViewAction({actionType:Actions.UPDATE_GROUP,data:t,orgId:e})},updateSubscription(e){r.handleViewAction({actionType:Actions.UPDATE_SUBSCRIPTION,hostedPageId:e})},updateUserRole(e,t){r.handleViewAction({actionType:Actions.UPDATE_USER_ROLE,id:e,role:t})}});e.exports=i,window.AppActions=i},32143:e=>{"use strict";e.exports={LOGIN:"LOGIN",LOGOUT:"LOGOUT",REFRESH:"REFRESH",REGISTER:"REGISTER",REGISTER_NOTIFICATIONS:"REGISTER_NOTIFICATIONS",RESET_PASSWORD:"RESET_PASSWORD",SET_TOKEN:"SET_TOKEN",SET_USER:"SET_USER"}},17084:e=>{"use strict";e.exports={login(e){Dispatcher.handleViewAction({actionType:Actions.LOGIN,details:e})},logout(){Dispatcher.handleViewAction({actionType:Actions.LOGOUT})},refresh(){Dispatcher.handleViewAction({actionType:Actions.REFRESH})},register(e,t){Dispatcher.handleViewAction({actionType:Actions.REGISTER,details:e,isInvite:t})},registerNotifications(e){Dispatcher.handleViewAction({actionType:Actions.REGISTER_NOTIFICATIONS,data:e})},setToken(e){Dispatcher.handleViewAction({actionType:Actions.SET_TOKEN,token:e})},setUser(e){Dispatcher.handleViewAction({actionType:Actions.SET_USER,user:e})}}},5243:(e,t,a)=>{"use strict";const n=new(a(31985)),r=Object.assign(n,{handleViewAction(e){const t={action:e,source:"VIEW_ACTION"};this.dispatch(t)}});window.Dispatcher=n,e.exports=r},99229:(e,t,a)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},n.apply(this,arguments)}const r="undefined"==typeof window?a.g:window;e.exports=a.g.Project=n({api:"https://fflags.lokistore-test.vzolab.com/api/v1/",env:"test",envTitle:"Sandbox",flagsmith:"VIZIO",maintenance:!1},r.projectOverrides||{})},8803:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=o(a(42736)),s=o(a(76922));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c=(n=class extends r.Component{constructor(e,t){super(e,t),u(this,"login",(e=>{AppActions.login(e)})),u(this,"register",((e,t)=>{AppActions.register(e,t)})),this.state={isLoading:i.default.isLoading,organisation:i.default.getOrganisation(),organisations:i.default.getOrganisations(),user:i.default.getUser()}}componentDidMount(){ES6Component(this),this.listenTo(i.default,"change",(()=>{this.setState({error:i.default.error,isLoading:i.default.isLoading,isSaving:i.default.isSaving,organisation:i.default.getOrganisation(),organisations:i.default.getOrganisations(),user:i.default.getUser()})})),this.listenTo(i.default,"loaded",(()=>{this.props.onLogin&&this.props.onLogin()})),this.listenTo(i.default,"saved",(()=>{this.props.onSave&&this.props.onSave(i.default.savedId)})),this.listenTo(i.default,"logout",(()=>{this.setState({isLoading:!1,isSaving:!1,organisation:i.default.getOrganisation(),user:i.default.getUser()}),this.props.onLogout&&this.props.onLogout()})),this.listenTo(i.default,"no-user",(()=>{this.setState({isLoading:!1,isSaving:!1,organisation:i.default.getOrganisation(),user:i.default.getUser()}),this.props.onNoUser&&this.props.onNoUser()})),this.listenTo(i.default,"problem",(()=>{this.setState({error:i.default.error,isLoading:i.default.isLoading,isSaving:i.default.isSaving})})),this.listenTo(i.default,"removed",(()=>{this.props.onRemove&&this.props.onRemove(),this.props.onLogin&&this.setState({isLoading:!1,isSaving:!1,organisation:i.default.getOrganisation(),user:i.default.getUser()})}))}render(){const e=this.state,t=e.error,a=e.isLoading,n=e.isSaving,i=e.organisation,o=e.organisations,l=e.user;return a?r.default.createElement(s.default,null):this.props.children({error:t,isLoading:a,isSaving:n,organisation:i,organisations:o,user:l},{acceptInvite:AppActions.acceptInvite,confirmTwoFactor:AppActions.confirmTwoFactor,createOrganisation:AppActions.createOrganisation,deleteOrganisation:AppActions.deleteOrganisation,disableTwoFactor:AppActions.disableTwoFactor,editOrganisation:AppActions.editOrganisation,enableTwoFactor:AppActions.enableTwoFactor,login:this.login,register:this.register,selectOrganisation:AppActions.selectOrganisation,twoFactorLogin:AppActions.twoFactorLogin})}},u(n,"displayName","AccountProvider"),n);c.propTypes={children:OptionalFunc,onLogin:OptionalFunc,onLogout:OptionalFunc,onNoUser:OptionalFunc,onRemove:OptionalFunc,onSave:OptionalFunc},e.exports=c},23186:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=o(a(71416)),i=o(a(5556)),s=o(a(88929));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u.apply(this,arguments)}function c(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=e=>{class t extends n.Component{constructor(e){super(e),this.state={error:s.default.error,isLoading:!s.default.model||s.default.isLoading},ES6Component(this)}componentDidMount(){this.listenTo(s.default,"change",(()=>{this.setState({error:s.default.error,isLoading:s.default.isLoading})}))}render(){const t=this.state,a=t.error,i=t.isLoading,s=r.default.getValue,o=r.default.hasFeature;return n.default.createElement(e,u({ref:"wrappedComponent",isLoading:i,error:a,router:this.context.router},this.props,{getValue:s,hasFeature:o}))}}return c(t,"contextTypes",{router:i.default.object.isRequired}),t}},54354:(e,t,a)=>{"use strict";var n=o(a(96540)),r=o(a(4478));const i=["tempId"];var s;function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u.apply(this,arguments)}function c(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=(s=class extends n.default.Component{constructor(e,t){super(e,t),c(this,"toggleFlag",((e,t,a,n,r)=>{AppActions.toggleFlag(e,t,a,n,r)})),c(this,"createFlag",((e,t,a,n,r,i,s)=>{AppActions.createFlag(e,t,a,i)})),c(this,"editFeatureValue",((e,t,a,n,r,s)=>{let o=u({},r);o.feature={id:r.feature},AppActions.editFeatureMv(e,Object.assign({},n,{multivariate_options:a.multivariate_options&&a.multivariate_options.map((e=>{let t=e.tempId,a=l(e,i);const r=n.multivariate_options&&n.multivariate_options.find((e=>e.id===a.id))||a;return u({},a,{custom_id:a.custom_id||t,default_percentage_allocation:r.default_percentage_allocation})}))}),(n=>{AppActions.editEnvironmentFlag(e,t,a,n,u({},o,{multivariate_feature_state_values:n.multivariate_options.map(((e,t)=>u({},a.multivariate_options[t],{id:e.id})))}),null,"VALUE")}))})),c(this,"editFeatureSegments",((e,t,a,n,r,i,s)=>{AppActions.editEnvironmentFlag(e,t,a,n,u({},r,{multivariate_feature_state_values:a.multivariate_options}),i,"SEGMENT",s)})),c(this,"editFeatureSettings",((e,t,a,n)=>{AppActions.editFeature(e,Object.assign({},n,a,{multivariate_options:a.multivariate_options&&a.multivariate_options.map((e=>{const t=n.multivariate_options&&n.multivariate_options.find((t=>t.id===e.id))||e;return u({},e,{default_percentage_allocation:t.default_percentage_allocation})}))}),(()=>{r.default.isSaving=!1,r.default.trigger("saved"),r.default.trigger("change")}))})),c(this,"createChangeRequest",((e,t,a,n,r,i,s,o)=>{AppActions.editFeatureMv(e,Object.assign({},n,a,{multivariate_options:a.multivariate_options&&a.multivariate_options.map((e=>{const t=n.multivariate_options&&n.multivariate_options.find((t=>t.id===e.id))||e;return u({},e,{default_percentage_allocation:t.default_percentage_allocation})}))}),(n=>{AppActions.editEnvironmentFlagChangeRequest(e,t,a,n,u({},r,{multivariate_feature_state_values:a.multivariate_options}),i,s,o)}))})),c(this,"removeFlag",((e,t)=>{AppActions.removeFlag(e,t)})),this.state={environmentFlags:r.default.getEnvironmentFlags(),isLoading:r.default.isLoading,isSaving:r.default.isSaving,lastSaved:r.default.getLastSaved(),projectFlags:r.default.getProjectFlags(),usageData:r.default.getFeatureUsage()},ES6Component(this),this.listenTo(r.default,"change",(()=>{this.setState({environmentFlags:r.default.getEnvironmentFlags(),error:r.default.error,isLoading:r.default.isLoading,isSaving:r.default.isSaving,lastSaved:r.default.getLastSaved(),projectFlags:r.default.getProjectFlags(),usageData:r.default.getFeatureUsage()})})),this.listenTo(r.default,"saved",(()=>{this.props.onSave&&this.props.onSave()})),this.listenTo(r.default,"problem",(()=>{this.setState({error:r.default.error,isLoading:r.default.isLoading,isSaving:r.default.isSaving,lastSaved:r.default.getLastSaved(),usageData:r.default.getFeatureUsage()}),this.props.onError&&this.props.onError(r.default.error)}))}render(){return this.props.children(u({},this.state),{createChangeRequest:this.createChangeRequest,createFlag:this.createFlag,editFeatureSegments:this.editFeatureSegments,editFeatureSettings:this.editFeatureSettings,editFeatureValue:this.editFeatureValue,environmentHasFlag:r.default.hasFlagInEnvironment,removeFlag:this.removeFlag,toggleFlag:this.toggleFlag})}},c(s,"displayName","FeatureListProvider"),s);d.propTypes={children:OptionalFunc,onError:OptionalFunc,onSave:OptionalFunc},e.exports=d},98126:(e,t,a)=>{"use strict";var n,r=o(a(96540)),i=o(a(4478)),s=o(a(10749));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function u(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c=(n=class extends r.default.Component{constructor(e,t){super(e,t),u(this,"toggleFlag",(({environmentFlag:e,environmentId:t,identity:a,identityFlag:n,projectFlag:r})=>{AppActions.toggleUserFlag({environmentFlag:e,environmentId:t,identity:a,identityFlag:n,projectFlag:r})})),u(this,"editFeatureValue",(({environmentFlag:e,environmentId:t,identity:a,identityFlag:n,projectFlag:r,rolloutPercentValue:i,countries:s})=>{AppActions.editUserFlag({environmentFlag:e,environmentId:t,identity:a,identityFlag:n,projectFlag:r,rolloutPercentValue:i,countries:s})})),u(this,"editTrait",(({environmentId:e,identity:t,trait:a})=>{AppActions.editTrait({environmentId:e,identity:t,trait:a})})),u(this,"createTrait",(({environmentId:e,identity:t,isCreate:a,trait:n})=>{AppActions.editTrait({environmentId:e,identity:t,isCreate:a,trait:n})})),u(this,"removeFlag",(({environmentId:e,identity:t,identityFlag:a})=>{AppActions.removeUserFlag({environmentId:e,identity:t,identityFlag:a})})),u(this,"changeUserFlag",(({environmentId:e,identity:t,identityFlag:a,payload:n})=>{AppActions.changeUserFlag({environmentId:e,identity:t,identityFlag:a,payload:n})})),this.state={environmentFlags:i.default.getEnvironmentFlags(),identity:s.default.model,identityFlags:s.default.getIdentityFlags(),isLoading:!0,projectFlags:i.default.getProjectFlags()},ES6Component(this)}componentDidMount(){this.listenTo(s.default,"change",(()=>{this.setState({identity:s.default.model,identityFlags:s.default.getIdentityFlags(),isLoading:s.default.isLoading||i.default.isLoading,isSaving:s.default.isSaving,traits:s.default.getTraits()})})),this.listenTo(i.default,"change",(()=>{this.setState({environmentFlags:i.default.getEnvironmentFlags(),isLoading:s.default.isLoading||i.default.isLoading,projectFlags:i.default.getProjectFlags()})})),this.listenTo(s.default,"saved",(()=>{this.props.onSave&&this.props.onSave()}))}render(){const e=this.changeUserFlag,t=this.createTrait,a=this.editFeatureValue,n=this.editTrait,r=this.removeFlag,i=this.toggleFlag;return this.props.children(l({},this.state),{changeUserFlag:e,createTrait:t,editFeatureValue:a,editTrait:n,removeFlag:r,toggleFlag:i})}},u(n,"displayName","IdentityProvider"),n);c.propTypes={children:OptionalFunc,onSave:OptionalFunc},e.exports=c},76136:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=s(a(96540)),i=s(a(16952));function s(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o.apply(this,arguments)}const l=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(n=class extends r.default.Component{constructor(e,t){super(e,t),this.state={isLoading:i.default.isLoading,segments:i.default.model[e.id],segmentsPaging:i.default.paging},ES6Component(this)}componentDidMount(){this.props.fetch&&AppActions.getIdentitySegments(this.props.projectId,this.props.id),this.listenTo(i.default,"change",(()=>{this.setState({isLoading:i.default.isLoading,segments:i.default.model[this.props.id],segmentsPaging:i.default.paging})}))}render(){return this.props.children(o({},this.state),{})}},"displayName","IdentitySegmentsProvider"),n);l.propTypes={children:OptionalFunc,fetch:OptionalBool,id:RequiredString,projectId:RequiredString};t.default=l},12310:(e,t,a)=>{"use strict";var n,r=a(96540),i=l(a(46797)),s=l(a(42736)),o=l(a(84022));function l(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u.apply(this,arguments)}function c(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=(n=class extends r.Component{constructor(e,t){super(e,t),c(this,"createProject",(e=>{AppActions.createProject(e)})),c(this,"selectProject",(e=>{AppActions.getProject(e)})),this.state={groups:o.default.getGroups(),invites:i.default.getInvites(),isLoading:i.default.isLoading,name:s.default.getOrganisation()&&s.default.getOrganisation().name,project:i.default.getProject(),projects:i.default.getProjects(),subscriptionMeta:i.default.getSubscriptionMeta(),users:i.default.getUsers()},ES6Component(this),this.listenTo(i.default,"change",(()=>{this.setState({groups:o.default.getGroups(),inviteLinks:i.default.getInviteLinks(),invites:i.default.getInvites(),isLoading:i.default.isLoading,isSaving:i.default.isSaving,project:i.default.getProject(),projects:i.default.getProjects(this.props.id),subscriptionMeta:i.default.getSubscriptionMeta(),users:i.default.getUsers()})})),this.listenTo(i.default,"saved",(()=>{this.props.onSave&&this.props.onSave(i.default.savedId)}))}render(){return this.props.children(u({groups:o.default.getGroups(),inviteLinks:i.default.getInviteLinks(),invites:i.default.getInvites(),isLoading:i.default.isLoading,isSaving:i.default.isSaving,project:i.default.getProject(),projects:i.default.getProjects(this.props.id),subscriptionMeta:i.default.getSubscriptionMeta(),users:i.default.getUsers()},{createProject:this.createProject,invalidateInviteLink:AppActions.invalidateInviteLink,selectProject:this.selectProject}))}},c(n,"displayName","OrganisationProvider"),n);d.propTypes={children:OptionalFunc,id:OptionalString,onSave:OptionalFunc},e.exports=d},93328:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useHasPermission=t.default=void 0;var n=s(a(96540)),r=a(56407),i=s(a(42736));function s(e){return e&&e.__esModule?e:{default:e}}const o=({id:e,level:t,permission:a})=>{const n=(0,r.useGetPermissionQuery)({id:e,level:t}),s=n.data;return{isLoading:n.isLoading,permission:!!s?.[a]||!!s?.ADMIN||i.default.isAdmin()}};t.useHasPermission=o;t.default=({children:e,id:t,level:a,permission:r})=>{const s=o({id:t,level:a,permission:r}),l=s.isLoading,u=s.permission;return n.default.createElement(n.default.Fragment,null,e({isLoading:l,permission:u||i.default.isAdmin()})||n.default.createElement("div",null))}},57765:(e,t,a)=>{"use strict";var n,r=o(a(96540)),i=o(a(91646)),s=o(a(46797));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function u(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c=(n=class extends r.default.Component{constructor(e,t){super(e,t),u(this,"createEnv",((e,t,a,n)=>{AppActions.createEnv(e,t,a,n)})),u(this,"editEnv",(e=>{AppActions.editEnv(e)})),u(this,"deleteEnv",(e=>{AppActions.deleteEnv(e)})),u(this,"editProject",((e,t)=>{AppActions.editProject(e,t)})),u(this,"deleteProject",(e=>{AppActions.deleteProject(e)})),this.state=Object.assign({isLoading:!i.default.getEnvs()||i.default.id!==this.props.id},{project:i.default.model||{}}),ES6Component(this),this.listenTo(i.default,"saved",(()=>{this.props.onSave&&this.props.onSave(i.default.savedEnv)}))}componentDidMount(){this.listenTo(i.default,"change",(()=>{this.setState(Object.assign({isLoading:i.default.isLoading,isSaving:i.default.isSaving},{project:i.default.model||{}}))})),this.listenTo(i.default,"removed",(()=>{this.props.onRemoveEnvironment&&this.props.onRemoveEnvironment()})),this.listenTo(s.default,"removed",(()=>{this.props.onRemove&&this.props.onRemove()}))}render(){return this.props.children(l({},this.state,{createEnv:this.createEnv,deleteEnv:this.deleteEnv,deleteProject:this.deleteProject,editEnv:this.editEnv,editProject:this.editProject}))}},u(n,"displayName","ProjectProvider"),n);c.propTypes={children:OptionalFunc,id:RequiredString,onRemove:RequiredFunc,onRemoveEnvironment:RequiredFunc,onSave:OptionalFunc},e.exports=c},74187:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(98606)),r=s(a(91646)),i=s(a(4478));function s(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o.apply(this,arguments)}function l(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=e=>{class t extends React.Component{constructor(e){super(e),l(this,"getOverrides",(()=>{this.props.projectFlag&&Promise.all([this.fetchFeatureSegments(),this.fetchFeatureStates()]).then(this.processOverrides)})),l(this,"fetchFeatureSegments",(()=>{const e=r.default.getEnvironmentIdFromKey(this.props.environmentId);return n.default.get(`${Project.api}features/feature-segments/?environment=${e}&feature=${this.props.projectFlag.id}`)})),l(this,"fetchFeatureStates",(()=>{const e=r.default.getEnvironmentIdFromKey(this.props.environmentId);return n.default.get(`${Project.api}features/featurestates/?environment=${e}&feature=${this.props.projectFlag.id}`)})),l(this,"processOverrides",(([e,t])=>{const a=e.results,n=t.results,r=t.results.find((e=>!e.feature_segment&&!e.identity));n.forEach((e=>{if(e.feature_segment){const n=_.findIndex(a,{id:e.feature_segment});if(-1!==n){a[n].value=Utils.featureStateToValue(e.feature_state_value),a[n].enabled=e.enabled,a[n].feature_segment_value=e,a[n].multivariate_options=e.multivariate_feature_state_values;const r=t.results.find((t=>t.feature_segment===e.feature_segment));a[n].multivariate_feature_state_values=r&&r.multivariate_feature_state_values||[]}}}));const i=e.results||[],s=a.concat((this.props.newSegmentOverrides||[]).map(((e,t)=>o({},e,{priority:i.length+t}))));this.setState({environmentVariations:r?.multivariate_feature_state_values||[],originalSegmentOverrides:_.cloneDeep(s),segmentOverrides:s})})),l(this,"onEnvironmentVariationsChange",(e=>{this.setState({environmentVariations:e})})),l(this,"removeMultivariateOption",(e=>{this.setState((t=>({segmentOverrides:t.segmentOverrides.map((t=>o({},t,{multivariate_options:t.multivariate_options?.filter((t=>t.multivariate_feature_option!==e))})))})))})),l(this,"updateSegments",(e=>{this.setState({segmentOverrides:e})})),ES6Component(this),this.listenTo(i.default,"saved",(()=>{this.getOverrides()})),this.state={}}componentDidMount(){this.getOverrides()}render(){return React.createElement(e,o({ref:"wrappedComponent",updateSegments:this.updateSegments,onEnvironmentVariationsChange:this.onEnvironmentVariationsChange,removeMultivariateOption:this.removeMultivariateOption},this.props,this.state))}}return l(t,"displayName","withFoo"),t}},31661:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.service=t.baseApiOptions=void 0;var n=a(51789);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}const i=a(99229),s=a(98606),o=e=>({baseQuery:(0,n.fetchBaseQuery)(r({baseUrl:i.api,prepareHeaders:async(e,{endpoint:t,getState:a})=>{a();if("register"!==t&&"createConfirmEmail"!==t&&"createResetPassword"!==t&&"createResendConfirmationEmail"!==t&&"createForgotPassword"!==t)try{const t=s.token;t&&e.set("Authorization",`Token ${t}`)}catch(e){}return e}},e)),refetchOnFocus:!0,refetchOnReconnect:!0});t.baseApiOptions=o;t.service=(0,n.createApi)(r({},o(),{endpoints:()=>({}),reducerPath:"service"}))},10025:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGroupAdmin=async function(e,t,a){return e.dispatch(r.endpoints.createGroupAdmin.initiate(t,a)),Promise.all(e.dispatch(r.util.getRunningQueriesThunk()))},t.deleteGroup=async function(e,t,a){return e.dispatch(r.endpoints.deleteGroup.initiate(t,a)),Promise.all(e.dispatch(r.util.getRunningQueriesThunk()))},t.deleteGroupAdmin=async function(e,t,a){return e.dispatch(r.endpoints.deleteGroupAdmin.initiate(t,a)),Promise.all(e.dispatch(r.util.getRunningQueriesThunk()))},t.getGroup=async function(e,t,a){return e.dispatch(r.endpoints.getGroup.initiate(t,a))},t.getGroups=async function(e,t,a){return e.dispatch(r.endpoints.getGroups.initiate(t,a)),Promise.all(e.dispatch(r.util.getRunningQueriesThunk()))},t.useGetGroupsQuery=t.useGetGroupQuery=t.useDeleteGroupMutation=t.useDeleteGroupAdminMutation=t.useCreateGroupAdminMutation=t.groupService=void 0;var n=a(31661);const r=t.groupService=n.service.enhanceEndpoints({addTagTypes:["Group"]}).injectEndpoints({endpoints:e=>({createGroupAdmin:e.mutation({invalidatesTags:[{id:"LIST",type:"Group"}],query:e=>({body:{},method:"POST",url:`organisations/${e.orgId}/groups/${e.group}/users/${e.user}/make-admin`})}),deleteGroup:e.mutation({invalidatesTags:[{id:"LIST",type:"Group"}],query:e=>({body:e,method:"DELETE",url:`organisations/${e.orgId}/groups/${e.id}/`})}),deleteGroupAdmin:e.mutation({invalidatesTags:[{id:"LIST",type:"Group"}],query:e=>({body:{},method:"POST",url:`organisations/${e.orgId}/groups/${e.group}/users/${e.user}/remove-admin`})}),getGroup:e.query({providesTags:e=>[{id:e?.id,type:"Group"}],query:e=>({url:`organisations/${e.orgId}/groups/${e.id}/`})}),getGroups:e.query({providesTags:[{id:"LIST",type:"Group"}],query:e=>({url:`organisations/${e.orgId}/groups/?page=${e.page}`})})})});t.useCreateGroupAdminMutation=r.useCreateGroupAdminMutation,t.useDeleteGroupAdminMutation=r.useDeleteGroupAdminMutation,t.useDeleteGroupMutation=r.useDeleteGroupMutation,t.useGetGroupQuery=r.useGetGroupQuery,t.useGetGroupsQuery=r.useGetGroupsQuery},81206:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIdentities=async function(e,t,a){return e.dispatch(l.endpoints.createIdentities.initiate(t,a)),Promise.all(e.dispatch(l.util.getRunningQueriesThunk()))},t.deleteIdentity=async function(e,t,a){return e.dispatch(l.endpoints.deleteIdentity.initiate(t,a)),Promise.all(e.dispatch(l.util.getRunningQueriesThunk()))},t.getIdentities=async function(e,t,a){return e.dispatch(l.endpoints.getIdentities.initiate(t,a)),Promise.all(e.dispatch(l.util.getRunningQueriesThunk()))},t.useGetIdentitiesQuery=t.useDeleteIdentityMutation=t.useCreateIdentitiesMutation=t.identityService=void 0;var n,r=a(31661),i=(n=a(7621))&&n.__esModule?n:{default:n};function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s.apply(this,arguments)}const o=(e,t)=>`environments/${e}/${t?"edge-identities":"identities"}`,l=t.identityService=r.service.enhanceEndpoints({addTagTypes:["Identity"]}).injectEndpoints({endpoints:e=>({createIdentities:e.mutation({invalidatesTags:[{id:"LIST",type:"Identity"}],queryFn:async(e,t,a,n)=>Promise.all(e.identifiers.map((t=>n({body:{environment:e.environmentId,identifier:t},method:"POST",url:`${o(e.environmentId,e.isEdge)}/`})))).then((e=>e.find((e=>!!e?.error))||e[e.length-1]))}),deleteIdentity:e.mutation({invalidatesTags:[{id:"LIST",type:"Identity"}],query:e=>({body:e,method:"DELETE",url:`${o(e.environmentId,e.isEdge)}/${e.id}/`})}),getIdentities:e.query({providesTags:[{id:"LIST",type:"Identity"}],query:e=>{const t=e.environmentId,a=e.isEdge,n=e.page,r=e.page_size,i=void 0===r?10:r,s=e.pageType,l=e.pages,u=e.search,c=e.countOnly;let d=`${o(t,a)}/?q=${encodeURIComponent((u?'"'+u+'"':u)||"")}&page_size=${i}`,p=null;return c&&(d+=`&count_only=${c}`),a||(d+=`&page=${n}`),"NEXT"===s?p=l?.[l.length-1]:"PREVIOUS"===s&&(p=l?.length?l[l.length-1]:null),p&&(d+=`&last_evaluated_key=${encodeURIComponent(p)}`),{url:d}},transformResponse(e,t,a){const n=a.isEdge,r=(a.page,a.page_size),o=void 0===r?10:r,l=a.pageType,u=a.pages;if(n){let t=u?u.concat([]):[];const a=e.last_evaluated_key;return"NEXT"===l?t.push(a):"PREVIOUS"===l?t.unshift():t=[],s({},e,{next:e.results.length<o?void 0:"1",pages:t,previous:t.length?"1":void 0,results:e.results?.map((e=>e.id?e:s({},e,{id:e.identity_uuid})))})}return(0,i.default)(a,e)}})})});t.useCreateIdentitiesMutation=l.useCreateIdentitiesMutation,t.useDeleteIdentityMutation=l.useDeleteIdentityMutation,t.useGetIdentitiesQuery=l.useGetIdentitiesQuery},56407:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPermission=async function(e,t,a){return e.dispatch(r.endpoints.getPermission.initiate(t,a)),Promise.all(e.dispatch(r.util.getRunningQueriesThunk()))},t.useGetPermissionQuery=t.permissionService=void 0;var n=a(31661);const r=t.permissionService=n.service.enhanceEndpoints({addTagTypes:["Permission"]}).injectEndpoints({endpoints:e=>({getPermission:e.query({providesTags:(e,t,a)=>[{id:`${a.level}${a.id}`,type:"Permission"}],query:({id:e,level:t})=>({url:`${t}s/${e}/my-permissions/`}),transformResponse(e){const t={ADMIN:e.admin};return e.permissions.forEach((e=>{t[e]=!0})),t}})})});t.useGetPermissionQuery=r.useGetPermissionQuery},11272:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProjectAuditLogs=async function(e,t,a){return e.dispatch(r.endpoints.getProjectAuditLogs.initiate(t,a)),Promise.all(e.dispatch(r.util.getRunningQueriesThunk()))},t.useGetProjectAuditLogsQuery=t.projectAuditLogService=void 0;var n=a(31661);const r=t.projectAuditLogService=n.service.enhanceEndpoints({addTagTypes:["ProjectAuditLog"]}).injectEndpoints({endpoints:e=>({getProjectAuditLogs:e.query({providesTags:e=>[{id:e?.id,type:"ProjectAuditLog"}],query:e=>({url:`projects/${e.id}/audit/?${Utils.toParam(e.params)}`})})})});t.useGetProjectAuditLogsQuery=r.useGetProjectAuditLogsQuery},93267:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSegment=async function(e,t,a){return e.dispatch(u.endpoints.createSegment.initiate(t,a)),Promise.all(e.dispatch(u.util.getRunningQueriesThunk()))},t.deleteSegment=async function(e,t,a){return e.dispatch(u.endpoints.deleteSegment.initiate(t,a)),Promise.all(e.dispatch(u.util.getRunningQueriesThunk()))},t.getAffectedIdentities=async function(e,t,a){return e.dispatch(u.endpoints.getAffectedIdentitiesCount.initiate(t,a)),Promise.all(e.dispatch(u.util.getRunningQueriesThunk()))},t.getAllTraits=async function(e,t,a){return e.dispatch(u.endpoints.getAllTraits.initiate(t,a)),Promise.all(e.dispatch(u.util.getRunningQueriesThunk()))},t.getSegment=async function(e,t,a){return e.dispatch(u.endpoints.getSegment.initiate(t,a)),Promise.all(e.dispatch(u.util.getRunningQueriesThunk()))},t.getSegments=async function(e,t,a){return e.dispatch(u.endpoints.getSegments.initiate(t,a)),Promise.all(e.dispatch(u.util.getRunningQueriesThunk()))},t.segmentService=void 0,t.updateSegment=async function(e,t,a){return e.dispatch(u.endpoints.updateSegment.initiate(t,a)),Promise.all(e.dispatch(u.util.getRunningQueriesThunk()))},t.useUpdateSegmentMutation=t.useGetSegmentsQuery=t.useGetSegmentQuery=t.useGetAllTraitsQuery=t.useGetAffectedIdentitiesCountMutation=t.useDeleteSegmentMutation=t.useCreateSegmentMutation=void 0;var n,r=a(31661),i=(n=a(73719))&&n.__esModule?n:{default:n};const s=["projectId"],o=["environmentId"];function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const u=t.segmentService=r.service.enhanceEndpoints({addTagTypes:["Segment","Traits"]}).injectEndpoints({endpoints:e=>({createSegment:e.mutation({invalidatesTags:(e,t,a)=>[{id:`LIST${a.projectId}`,type:"Segment"}],query:e=>({body:e.segment,method:"POST",url:`projects/${e.projectId}/segments/`})}),deleteSegment:e.mutation({invalidatesTags:(e,t,a)=>[{id:`LIST${a.projectId}`,type:"Segment"}],query:e=>({body:e,method:"DELETE",url:`projects/${e.projectId}/segments/${e.id}/`})}),getSegment:e.query({providesTags:e=>[{id:e?.id,type:"Segment"}],query:e=>({url:`projects/${e.projectId}/segments/${e.id}/`})}),getSegments:e.query({providesTags:(e,t,a)=>[{id:`LIST${a.projectId}`,type:"Segment"}],query:e=>{let t=e.projectId,a=l(e,s);return{url:`projects/${t}/segments/?${i.default.toParam(a)}`}}}),getAllTraits:e.query({providesTags:(e,t,a)=>[{id:`LIST${a.environmentId}`,type:"Traits"}],query:e=>{let t=e.environmentId;l(e,o);return{url:`environments/${t}/trait-keys/`}}}),updateSegment:e.mutation({invalidatesTags:(e,t,a)=>[{id:`LIST${a.projectId}`,type:"Segment"},{id:`${a.segment.id}`,type:"Segment"}],query:e=>({body:e.segment,method:"PUT",url:`projects/${e.projectId}/segments/${e.segment.id}/`})}),getAffectedIdentitiesCount:e.mutation({query:e=>({body:e.segment,method:"POST",url:"segments/identities/count"})})})});t.useCreateSegmentMutation=u.useCreateSegmentMutation,t.useDeleteSegmentMutation=u.useDeleteSegmentMutation,t.useGetSegmentQuery=u.useGetSegmentQuery,t.useGetSegmentsQuery=u.useGetSegmentsQuery,t.useUpdateSegmentMutation=u.useUpdateSegmentMutation,t.useGetAllTraitsQuery=u.useGetAllTraitsQuery,t.useGetAffectedIdentitiesCountMutation=u.useGetAffectedIdentitiesCountMutation},52014:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTag=async function(e,t,a){return e.dispatch(r.endpoints.createTag.initiate(t,a)),Promise.all(e.dispatch(r.util.getRunningQueriesThunk()))},t.deleteTag=async function(e,t,a){return e.dispatch(r.endpoints.deleteTag.initiate(t,a)),Promise.all(e.dispatch(r.util.getRunningQueriesThunk()))},t.getTags=async function(e,t,a){return e.dispatch(r.endpoints.getTags.initiate(t,a)),Promise.all(e.dispatch(r.util.getRunningQueriesThunk()))},t.tagService=void 0,t.updateTag=async function(e,t,a){return e.dispatch(r.endpoints.updateTag.initiate(t,a)),Promise.all(e.dispatch(r.util.getRunningQueriesThunk()))},t.useUpdateTagMutation=t.useGetTagsQuery=t.useDeleteTagMutation=t.useCreateTagMutation=void 0;var n=a(31661);const r=t.tagService=n.service.enhanceEndpoints({addTagTypes:["Tag"]}).injectEndpoints({endpoints:e=>({createTag:e.mutation({invalidatesTags:[{id:"LIST",type:"Tag"}],query:e=>({body:e.tag,method:"POST",url:`projects/${e.projectId}/tags/`})}),deleteTag:e.mutation({invalidatesTags:[{id:"LIST",type:"Tag"}],query:e=>({body:{},method:"DELETE",url:`projects/${e.projectId}/tags/${e.id}/`})}),getTags:e.query({providesTags:[{id:"LIST",type:"Tag"}],query:e=>({url:`projects/${e.projectId}/tags/`}),transformResponse:e=>e.results}),updateTag:e.mutation({invalidatesTags:e=>[{id:"LIST",type:"Tag"},{id:e?.id,type:"Tag"}],query:e=>({body:e.tag,method:"PUT",url:`projects/${e.projectId}/tags/${e.tag.id}/`})})})});t.useCreateTagMutation=r.useCreateTagMutation,t.useDeleteTagMutation=r.useDeleteTagMutation,t.useGetTagsQuery=r.useGetTagsQuery,t.useUpdateTagMutation=r.useUpdateTagMutation},32799:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStore=t.getPersistor=void 0;var n=a(30038),r=a(41385),i=a(31661);let s,o;t.getPersistor=()=>o;t.getStore=function(){return s||(s=(()=>{const e=a(69282).A,t=(0,n.combineReducers)({[i.service.reducerPath]:i.service.reducer});return(0,n.configureStore)({middleware:e=>e({serializableCheck:{ignoredActions:[r.FLUSH,r.REHYDRATE,r.PAUSE,r.PERSIST,r.PURGE,r.REGISTER]}}).concat(i.service.middleware),reducer:(0,r.persistReducer)({key:"root",storage:e,version:1,whitelist:["user"]},t)})})(),o=(0,r.persistStore)(s),s)}},42736:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(12339))&&n.__esModule?n:{default:n};function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}const s=a(5243),o=a(3327),l=a(98606),u={acceptInvite:e=>(c.saving(),API.setInvite(""),API.setInviteType(""),l.post(`${Project.api}users/join/link/${e}/`).catch((()=>l.post(`${Project.api}users/join/${e}/`))).then((void 0).handleInviteResponse).catch((e=>API.ajaxHandler(c,e)))),handleInviteResponse:e=>{c.savedId=e.id,c.model.organisations.push(e),(void 0).logInviteEvent(e.name),(void 0).saveUserToLocalStorage()},logInviteEvent:e=>{const t=r.default.events.ACCEPT_INVITE(e);API.postEvent(t.event+(t.extra?` ${t.extra}`:""),"first_events").catch((()=>{})).finally((()=>c.saved()))},saveUserToLocalStorage:()=>{AsyncStorage.setItem("user",JSON.stringify(c.model)),c.saved()},confirmTwoFactor:(e,t)=>(c.saving(),l.post(`${Project.api}auth/app/activate/confirm/`,{code:e}).then((void 0).handleTwoFactorSuccess).catch((e=>(void 0).handleTwoFactorError(e,t)))),handleTwoFactorSuccess:e=>{c.model.backupCodes=e.backup_codes,c.model.twoFactorEnabled=!0,c.model.twoFactorConfirmed=!0,c.saved()},handleTwoFactorError:(e,t)=>{t&&t(),API.ajaxHandler(c,e)},createOrganisation:e=>{c.saving(),AccountStore.model.organisations&&AccountStore.model.organisations.length||API.trackEvent(r.default.events.CREATE_FIRST_ORGANISATION),API.trackEvent(r.default.events.CREATE_ORGANISATION),API.getReferrer()?(API.postEvent(`${e} from ${API.getReferrer().utm_source}`),API.trackEvent(r.default.events.REFERRER_CONVERSION(API.getReferrer().utm_source))):API.postEvent(`${e}`),l.post(`${Project.api}organisations/`,{name:e}).then((e=>{c.model.organisations=c.model.organisations.concat([i({},e,{role:"ADMIN"})]),AsyncStorage.setItem("user",JSON.stringify(c.model)),c.savedId=e.id,c.saved()}))},deleteOrganisation:()=>{API.trackEvent(r.default.events.DELETE_ORGANISATION),l.delete(`${Project.api}organisations/${c.organisation.id}/`).then((()=>{c.model.organisations=_.filter(c.model.organisations,(e=>e.id!==c.organisation.id)),c.organisation=c.model.organisations.length?c.model.organisations[0]:null,c.trigger("removed"),AsyncStorage.setItem("user",JSON.stringify(c.model))}))},disableTwoFactor:()=>(c.saving(),l.post(`${Project.api}auth/app/deactivate/`).then((()=>{c.model.twoFactorEnabled=!1,c.model.twoFactorConfirmed=!1,c.saved()}))),editOrganisation:e=>{API.trackEvent(r.default.events.EDIT_ORGANISATION),l.put(`${Project.api}organisations/${c.organisation.id}/`,e).then((e=>{const t=_.findIndex(c.model.organisations,{id:c.organisation.id});-1!==t&&(c.model.organisations[t]=e,c.organisation=e),c.saved()}))},enableTwoFactor:()=>(c.saving(),l.post(`${Project.api}auth/app/activate/`).then((e=>{c.model.twoFactor=e,c.model.twoFactorEnabled=!0,c.saved()}))),getOrganisations:()=>Promise.all([l.get(`${Project.api}organisations/`),l.get(`${Project.api}auth/users/me/`),l.get(`${Project.api}auth/mfa/user-active-methods/`)]).then((([e,t,a])=>{u.setUser(i({},t,{organisations:e.results,twoFactorConfirmed:!!a.length,twoFactorEnabled:!!a.length,twoFactorPrompt:c.ephemeral_token&&!!a.length}))})).catch((e=>API.ajaxHandler(c,e))),login:({email:e,password:t})=>{c.loading(),l.post(`${Project.api}auth/login/`,{email:e,password:t}).then((e=>(API.trackEvent(r.default.events.LOGIN),e.ephemeral_token?(c.ephemeral_token=e.ephemeral_token,c.model={twoFactorEnabled:!0,twoFactorPrompt:!0},void c.loaded()):(l.setToken(e.key),u.onLogin())))).catch((e=>API.ajaxHandler(c,e)))},oauth:(e,t)=>{c.loading(),API.trackEvent(r.default.events.OAUTH(e)),l.post("saml"===e?`${Project.api}auth/saml/login/`:`${Project.api}auth/oauth/${e}/`,i({},t||{},{sign_up_type:API.getInviteType()})).then((e=>(l.setToken(e.key),u.onLogin()))).catch((e=>API.ajaxHandler(c,e)))},onLogin:e=>(e||API.setCookie("t",l.token),u.getOrganisations()),register:({email:e,first_name:t,last_name:a,marketing_consent_given:n,password:i})=>{c.saving(),l.post(`${Project.api}auth/users/`,{email:e,first_name:t,last_name:a,marketing_consent_given:n,password:i,referrer:API.getReferrer()||"",sign_up_type:API.getInviteType()}).then((e=>(l.setToken(e.key),API.trackEvent(r.default.events.REGISTER),API.getReferrer()&&API.trackEvent(r.default.events.REFERRER_REGISTERED(API.getReferrer().utm_source)),c.isSaving=!1,u.onLogin()))).catch((e=>API.ajaxHandler(c,e)))},resetPassword:(e,t,a,n)=>{c.saving(),l.post(`${Project.api}auth/users/reset_password_confirm/`,{new_password:a,re_new_password:n,token:t,uid:e}).then((()=>{c.saved()})).catch((e=>API.ajaxHandler(c,e)))},selectOrganisation:e=>{c.organisation=_.find(c.model.organisations,{id:e}),c.changed()},setToken:e=>(c.loading(),c.user={},l.setToken(e),u.onLogin()),setUser(e){e?this.handleUserLogin(e):this.handleUserLogout()},handleUserLogin(e){c.model=e,this.setOrganisation(e),Project.delighted&&this.sendDelightedSurvey(),AsyncStorage.setItem("user",JSON.stringify(c.model)),API.alias(e.email),API.identify(e.email,e),c.loaded()},setOrganisation(e){if(e.organisations){c.organisation=e.organisations[0];const t=API.getCookie("organisation");if(t){const a=e.organisations.find((e=>`${e.id}`===t));a&&(c.organisation=a)}}},sendDelightedSurvey(){delighted.survey({createdAt:c.organisation&&c.organisation.created_date,email:c.model.email,name:`${c.model.first_name} ${c.model.last_name}`,properties:{company:c.organisation&&c.organisation.name}})},handleUserLogout(){c.ephemeral_token=null,AsyncStorage.clear(),API.setCookie("t",""),l.setToken(null),c.model=null,c.organisation=null,c.trigger("logout"),API.reset()},twoFactorLogin:(e,t)=>(c.saving(),l.post(`${Project.api}auth/login/code/`,{code:e,ephemeral_token:c.ephemeral_token}).then((e=>{c.model=null,API.trackEvent(r.default.events.LOGIN),l.setToken(e.key),c.ephemeral_token=null,u.onLogin()})).catch((e=>{t&&t(),API.ajaxHandler(c,e)}))),updateSubscription:e=>{l.post(`${Project.api}organisations/${c.organisation.id}/update-subscription/`,{hosted_page_id:e}).then((e=>{const t=_.findIndex(c.model.organisations,{id:c.organisation.id});if(-1!==t){c.model.organisations[t]=e;try{e&&e.subscription&&e.subscription.plan&&API.postEvent(e.subscription.plan,"chargebee")}catch(e){}c.organisation=e}c.saved()})).catch((e=>API.ajaxHandler(c,e)))}},c=Object.assign({},o,{forced2Factor:()=>!(!c.model||!c.model.organisations)&&(!c.model.twoFactorConfirmed&&(Utils.getFlagsmithHasFeature("forced_2fa")&&c.getOrganisations()&&c.getOrganisations().find((e=>e.force_2fa)))),getActiveOrgPlan:()=>c.organisation&&c.organisation.subscription&&c.organisation.subscription.plan,getDate:()=>c.getOrganisation()&&c.getOrganisation().created_date,getOrganisation:()=>c.organisation,getOrganisationPlan(e){const t=c.getOrganisations(),a=t&&t.find((t=>t.id===e));return a?!!a.subscription?.subscription_id:null},getOrganisationRole:e=>c.model&&c.model.organisations&&_.get(_.find(c.model.organisations,(t=>e?t.id===e:t.id===(c.organisation&&c.organisation.id))),"role"),getOrganisations:()=>c.model&&c.model.organisations,getPlans:()=>c.model?_.filter(c.model.organisations.map((e=>e.subscription&&e.subscription.plan)),(e=>!!e)):[],getUser:()=>c.model,getUserId:()=>c.model&&c.model.id,id:"account",isAdmin(){const e=c.organisation&&c.organisation.id;return e&&"ADMIN"===c.getOrganisationRole(e)},setToken(e){l.token=e},setUser(e){u.setUser(e)}});c.dispatcherIndex=s.register(c,(e=>{const t=e.action;switch(t.actionType){case Actions.SET_USER:u.setUser(t.user);break;case Actions.SET_TOKEN:u.setToken(t.token);break;case Actions.SELECT_ORGANISATION:u.selectOrganisation(t.id);break;case Actions.CREATE_ORGANISATION:u.createOrganisation(t.name);break;case Actions.ACCEPT_INVITE:u.acceptInvite(t.id);break;case Actions.DELETE_ORGANISATION:u.deleteOrganisation();break;case Actions.EDIT_ORGANISATION:u.editOrganisation(t.org);break;case Actions.LOGOUT:u.setUser(null);break;case Actions.REGISTER:u.register(t.details,t.isInvite);break;case Actions.RESET_PASSWORD:u.resetPassword(t.uid,t.token,t.new_password1,t.new_password2);break;case Actions.LOGIN:u.login(t.details);break;case Actions.GET_ORGANISATIONS:u.getOrganisations();break;case Actions.ENABLE_TWO_FACTOR:u.enableTwoFactor();break;case Actions.CONFIRM_TWO_FACTOR:u.confirmTwoFactor(t.pin,t.onError);break;case Actions.DISABLE_TWO_FACTOR:u.disableTwoFactor();break;case Actions.OAUTH:u.oauth(t.oauthType,t.data);break;case Actions.TWO_FACTOR_LOGIN:u.twoFactorLogin(t.pin,t.onError);break;case Actions.UPDATE_SUBSCRIPTION:u.updateSubscription(t.hostedPageId)}})),u.store=c;t.default=u.store},3327:(e,t,a)=>{"use strict";const n=a(37007).EventEmitter,r="change";e.exports=Object.assign({},n.prototype,{_maxListeners:Number.MAX_VALUE,changed(){this.trigger(r)},goneABitWest(){this.hasLoaded=!0,this.isLoading=!1,this.isSaving=!1,this.trigger(r),this.trigger("problem")},hasLoaded:!1,id:"",isLoading:!1,isSaving:!1,loaded(){this.hasLoaded=!0,this.error=null,this.isLoading=!1,this.trigger("loaded"),this.trigger(r)},loading(){this.hasLoaded=!1,this.isLoading=!0,this.trigger(r),this.trigger("loading")},off(e,t){this.removeListener(e||r,t)},on(e,t){this.addListener(e||r,t)},saved(e){this.isSaving=!1,this.trigger("saved",e),this.trigger(r)},saving(){this.isSaving=!0,this.trigger(r),this.trigger("saving")},subscriptions:{},trigger(e,t){this.emit(e||r,t)}})},78874:(e,t,a)=>{"use strict";const n=a(5243),r=a(3327),i=a(98606),s={actionChangeRequest:(e,t,a)=>{o.loading(),i.post(`${Project.api}features/workflows/change-requests/${e}/${t}/`).then((()=>{i.get(`${Project.api}features/workflows/change-requests/${e}/`).then((t=>{o.model[e]=t,a&&a(),o.loaded()}))})).catch((e=>API.ajaxHandler(o,e)))},deleteChangeRequest:(e,t)=>{o.loading(),i.delete(`${Project.api}features/workflows/change-requests/${e}/`).then((()=>{o.loaded(),t()})).catch((e=>API.ajaxHandler(o,e)))},getChangeRequest:(e,t,a)=>{o.loading(),i.get(`${Project.api}features/workflows/change-requests/${e}/`).then((n=>Promise.all([i.get(`${Project.api}environments/${a}/featurestates/?feature=${n.feature_states[0].feature}`),i.get(`${Project.api}projects/${t}/features/${n.feature_states[0].feature}/`)]).then((([t,a])=>{o.model[e]=n,o.flags[e]={environmentFlag:t.results[0],projectFlag:a},o.loaded()})))).catch((e=>API.ajaxHandler(o,e)))},getChangeRequests:(e,{committed:t,live_from_after:a},n)=>{if(!(Utils.getPlansPermission("4_EYES")||Utils.getPlansPermission("SCHEDULE_FLAGS")))return;if(!e)return;o.loading(),o.envId=e;const r=""+(t||a?"committed=1":"committed=0"),s=a?`&live_from_after=${a}`:"",l=t?`&live_from_before=${(new Date).toISOString()}`:"";let u=n||`${Project.api}environments/${e}/list-change-requests/?${r}${s}${l}`;u.includes("page_size")||(u+="&page_size=20"),i.get(u).then((r=>{r.currentPage=n?parseInt(n.split("page=")[1]):1,r.pageSize=20,a?o.scheduled[e]=r:t?o.committed[e]=r:o.model[e]=r,o.loaded()})).catch((e=>API.ajaxHandler(o,e)))},updateChangeRequest:e=>{o.loading(),i.put(`${Project.api}features/workflows/change-requests/${e.id}/`,e).then((t=>{o.model[e.id]=t,o.loaded()})).catch((e=>API.ajaxHandler(o,e)))}},o=Object.assign({},r,{committed:{},flags:{},id:"change-request-store",model:{},scheduled:{}});o.dispatcherIndex=n.register(o,(e=>{const t=e.action;switch(t.actionType){case Actions.GET_CHANGE_REQUESTS:s.getChangeRequests(t.environment,{committed:t.committed,live_from_after:t.live_from_after},t.page);break;case Actions.GET_CHANGE_REQUEST:s.getChangeRequest(t.id,t.projectId,t.environmentId);break;case Actions.UPDATE_CHANGE_REQUEST:s.updateChangeRequest(t.changeRequest);break;case Actions.DELETE_CHANGE_REQUEST:s.deleteChangeRequest(t.id,t.cb);break;case Actions.ACTION_CHANGE_REQUEST:s.actionChangeRequest(t.id,t.action,t.cb)}})),s.store=o,e.exports=s.store},88929:(e,t,a)=>{"use strict";var n,r=(n=a(99229))&&n.__esModule?n:{default:n};const i=a(5243),s=a(3327);window.Project=a(99229);const o={get(){l.loading()},loaded(e){"true"===localStorage.getItem("darkmode")?.toLowerCase()&&document.body.classList.add("dark"),e&&Object.keys(e).length?l.changed():l.loaded(),l.model=flagsmith.getAllFlags()},onError(){l.error=!0,l.goneABitWest()}},l=Object.assign({},s,{id:"config"});l.dispatcherIndex=i.register(l,(e=>{e.action.actionType})),flagsmith.init({AsyncStorage,api:r.default.flagsmithClientAPI,cacheFlags:!0,enableAnalytics:r.default.flagsmithAnalytics,environmentID:r.default.flagsmith,onChange:o.loaded,realtime:!0}).catch((()=>{o.onError()})),o.store=l,e.exports=o.store},4478:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(12339)),r=o(a(91646));const i=["tempId","custom_id"],s=["approvals","featureStateId","multivariate_options"];function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}const p=a(5243),m=a(3327),f=a(46797),g=a(98606);let h=!1;function v(e,t){return g.get(e).then((e=>{let a;return a=t?d({},t,{results:t.results.concat(e.results)}):e,e.next?v(e.next,a):Promise.resolve(a)}))}const E={async createFlag(e,t,a){y.saving(),API.trackEvent(n.default.events.CREATE_FEATURE),this.handleFirstFeatureCreation();try{const n=await this.createFeature(e,a);await this.processMultivariateOptions(e,n,a.multivariate_options),await this.updateFeatureStates(e,t,n.id),y.saved()}catch(e){API.ajaxHandler(y,e)}},handleFirstFeatureCreation(){h||flagsmith.getTrait("first_feature")||1!==AccountStore.model.organisations.length||1!==f.model.projects.length||y.model.features&&y.model.features.length||(h=!0,flagsmith.setTrait("first_feature","true"),API.trackEvent(n.default.events.CREATE_FIRST_FEATURE))},createFeature:async(e,t)=>await g.post(`${Project.api}projects/${e}/features/`,d({},t,{initial_value:void 0!==t.initial_value&&null!==t.initial_value?`${t.initial_value}`:t.initial_value,multivariate_options:void 0,project:e,type:t.multivariate_options&&t.multivariate_options.length?"MULTIVARIATE":"STANDARD"})),async processMultivariateOptions(e,t,a=[]){for(const n of a){const a=n.tempId,r=(n.custom_id,c(n,i));await g.post(`${Project.api}projects/${e}/features/${t.id}/mv-options/`,d({},r,{custom_id:a,feature:t.id}))}},async updateFeatureStates(e,t,a){const n=l(await Promise.all([g.get(`${Project.api}projects/${e}/features/`),g.get(`${Project.api}environments/${t}/featurestates/`)]),2),r=n[0],i=n[1];y.model={features:r.results,keyedEnvironmentFeatures:i&&_.keyBy(i.results,"feature")},y.model.lastSaved=(new Date).valueOf()},editFeature(e,t,a){t.skipSaveProjectFeature?a(d({},t,{skipSaveProjectFeature:void 0})):g.put(`${Project.api}projects/${e}/features/${t.id}/`,t).then((e=>{if(a&&a(e),y.model){const e=_.findIndex(y.model.features,{id:t.id});y.model.features[e]=E.parseFlag(t),y.model.lastSaved=(new Date).valueOf(),y.changed()}})).catch((e=>{a?a(t):API.ajaxHandler(y,e)}))},async editFeatureMv(e,t,a){if(t.skipSaveProjectFeature)return void a(d({},t,{skipSaveProjectFeature:void 0}));const n=this.getOriginalFlag(t);try{await this.processMultivariateOptionsSequentially(e,t,n),await this.deleteMultivariateOptions(e,t,n),a&&a(t)}catch(e){API.ajaxHandler(y,e)}},getOriginalFlag:e=>y.model&&y.model.features?y.model.features.find((t=>t.id===e.id)):e,async processMultivariateOptionsSequentially(e,t,a){for(const r of(t.multivariate_options||[]).entries()){var n=l(r,2);const i=n[0],s=n[1],o=s.id||s.custom_id?a.multivariate_options.find((e=>e.id===s.id||e.custom_id===s.custom_id)):null,u=`${Project.api}projects/${e}/features/${t.id}/mv-options/`,c=d({},s,{default_percentage_allocation:0,feature:t.id});let p;o?p=await g.put(`${u}${o.id}/`,c):(delete c.custom_id,p=await g.post(u,c)),t.multivariate_options[i]=p,o||this.updateFeatureMultivariateOptions(t)}},updateFeatureMultivariateOptions(e){y.model.feature=[...y.model.features].map((t=>t.id===e.id?d({},t,{multivariate_options:[...e.multivariate_options]}):t)),y.model.lastSaved=(new Date).valueOf(),y.saved()},async deleteMultivariateOptions(e,t,a){const n=a.multivariate_options.filter((e=>!t.multivariate_options.find((t=>e.id===t.id))));for(const a of n)await g.delete(`${Project.api}projects/${e}/features/${t.id}/mv-options/${a.id}/`)},editFeatureState:(e,t,a,r,i,s,o,l)=>{let u;const c=(s||[]).map(((e,t)=>()=>e.toRemove?(e.id?g.delete(`${Project.api}features/feature-segments/${e.id}/`):Promise.resolve()).then((()=>{s=s.filter((t=>e.id!==t.id))})):e.id?Promise.resolve():g.post(`${Project.api}features/feature-segments/`,{environment:e.environment,feature:e.feature,priority:e.priority,segment:e.segment}).then((a=>g.post(`${Project.api}features/featurestates/`,{enabled:e.enabled,environment:e.feature_segment_value.environment,feature:e.feature_segment_value.feature,feature_segment:a.id,feature_state_value:Utils.valueToFeatureState(e.value)}).then((n=>{const r=d({},a,{enabled:s[t].enabled,feature_segment_value:n,multivariate_options:s[t].multivariate_options,segment_name:e.segment_name,value:s[t].value});s[t]=r})))))).reduce(((e,t)=>e.then((e=>t(e)))),Promise.resolve());y.saving(),API.trackEvent(n.default.events.EDIT_FEATURE),c.then((()=>{u="VALUE"!==o?Promise.resolve():i?g.get(`${Project.api}environments/${t}/featurestates/${i.id}/`).then((e=>{const n=e.multivariate_feature_state_values&&e.multivariate_feature_state_values.map((e=>{const t=i.multivariate_feature_state_values.find((t=>t.id===e.multivariate_feature_option))||{};return d({},e,{percentage_allocation:t.default_percentage_allocation})}));return i.multivariate_feature_state_values=n,g.put(`${Project.api}environments/${t}/featurestates/${i.id}/`,Object.assign({},i,{enabled:a.default_enabled,feature_state_value:a.initial_value,hide_from_client:a.hide_from_client}))})):g.post(`${Project.api}environments/${t}/featurestates/`,Object.assign({},a,{enabled:!1,environment:t,feature:r}));const e="SEGMENT"===o&&s?(s.length?g.post(`${Project.api}features/feature-segments/update-priorities/`,s.map(((e,t)=>({id:e.id,priority:t})))):Promise.resolve([])).then((()=>Promise.all(s.map((e=>g.put(`${Project.api}features/featurestates/${e.feature_segment_value.id}/`,d({},e.feature_segment_value,{enabled:e.enabled,feature_state_value:Utils.valueToFeatureState(e.value),multivariate_feature_state_values:e.multivariate_options&&e.multivariate_options.map((e=>e.multivariate_feature_option?e:{multivariate_feature_option:i.multivariate_feature_state_values[e.multivariate_feature_option_index].multivariate_feature_option,percentage_allocation:e.percentage_allocation}))}))))))):Promise.resolve();Promise.all([u,e]).then((([e,t])=>{if(y.model&&(y.model.keyedEnvironmentFeatures[r.id]=e,t)){const e=_.find(y.model.features,(e=>e.id===r.id));e&&(e.feature_segments=_.map(t.feature_segments,(e=>d({},e,{segment:e.segment.id}))))}y.model&&(y.model.lastSaved=(new Date).valueOf()),l&&l(),y.saved()}))}))},editFeatureStateChangeRequest:(e,t,a,r,i,o,l,u)=>{y.saving(),API.trackEvent(n.default.events.EDIT_FEATURE);const p=g.get(`${Project.api}environments/${t}/featurestates/${i.id}/`).then((()=>{const n=l.approvals,i=l.featureStateId,o=l.multivariate_options,p=c(l,s),m=n.filter((e=>Object.keys(e).includes("user"))),f=n.filter((e=>Object.keys(e).includes("group"))),h=d({approvals:m,feature_states:[{enabled:a.default_enabled,feature:r.id,feature_state_value:Utils.valueToFeatureState(a.initial_value),id:i,live_from:l.live_from||(new Date).toISOString()}],group_assignments:f},p),v=h.id?"put":"post",E=h.id?`${Project.api}features/workflows/change-requests/${h.id}/`:`${Project.api}environments/${t}/create-change-request/`;return g[v](E,h).then((a=>{let n=Promise.resolve();o&&(a.feature_states[0].multivariate_feature_state_values=a.feature_states[0].multivariate_feature_state_values.map((e=>{const t=o.find((t=>(e.multivariate_feature_option||e.id)===(t.multivariate_feature_option||t.id)));return d({},e,{percentage_allocation:t?"number"==typeof t.percentage_allocation?t.percentage_allocation:t.default_percentage_allocation:e.percentage_allocation})}))),n=g.put(`${Project.api}features/workflows/change-requests/${a.id}/`,d({},a)).then((a=>{u?AppActions.actionChangeRequest(a.id,"commit",(()=>{AppActions.refreshFeatures(e,t)})):AppActions.getChangeRequest(a.id,e,t)})),n.then((()=>{AppActions.getChangeRequests(t,{}),AppActions.getChangeRequests(t,{committed:!0}),AppActions.getChangeRequests(t,{live_from_after:(new Date).toISOString()}),i&&AppActions.getChangeRequest(p.id,e,t)}))}))}));Promise.all([p]).then((()=>{y.saved(),"undefined"!=typeof closeModal&&closeModal()}))},getFeatureUsage(e,t,a,n){g.get(`${Project.api}projects/${e}/features/${a}/evaluation-data/?period=${n}&environment_id=${t}`).then((e=>{const t=e[0],a=t&&e[e.length-1],n=t?moment(a.day,"YYYY-MM-DD").diff(moment(t.day,"YYYY-MM-DD"),"days"):0;t&&n&&_.range(0,n).map((a=>{const n=moment(t.day).add(a,"days").format("YYYY-MM-DD");e.find((e=>e.day===n))||e.push({count:0,day:n})})),y.model.usageData=_.sortBy(e,(e=>moment(e.day,"YYYY-MM-DD").valueOf())).map((e=>d({},e,{day:moment(e.day,"YYYY-MM-DD").format("Do MMM")}))),y.changed()}))},getFeatures:(e,t,a,n,i,s)=>{if(!y.model||y.envId!==t||a){y.loading(),y.envId=t,y.projectId=e,y.environmentId=t,y.page=n,y.filter=i;let a="";const o=Utils.fromParam().feature;Object.keys(y.filter).length&&(a=`&${Utils.toParam(y.filter)}`),r.default.getEnvironmentIdFromKeyAsync(e,t).then((r=>{let i="string"==typeof n?n:`${Project.api}projects/${e}/features/?page=${n||1}&page_size=${s||200}${a}`;return y.search&&(i+=`&search=${y.search}`),y.sort&&(i+=`&environment=${r}&sort_field=${y.sort.sortBy}&sort_direction=${y.sort.sortOrder.toUpperCase()}`),Promise.all([g.get(i),v(`${Project.api}environments/${t}/featurestates/?page_size=200`),o?g.get(`${Project.api}projects/${e}/features/${o}/`).then((e=>{y.model.feature=[...y.model.features].map((t=>t.id===Number(o)?e:t)),y.model.lastSaved=(new Date).valueOf()})):Promise.resolve()]).then((([e,t,a])=>{if(y.paging.next=e.next,y.paging.pageSize=200,y.paging.count=e.count,y.paging.previous=e.previous,y.paging.currentPage=-1!==i.indexOf("?page=")?parseInt(i.substr(i.indexOf("?page=")+6)):1,a){-1===e.results.findIndex((e=>e.id===a.id))&&e.results.push(d({},a,{ignore:!0}))}e.results.length&&(h=!0),y.model={features:e.results.map(E.parseFlag),keyedEnvironmentFeatures:t.results&&_.keyBy(t.results,"feature")},y.loaded()})).catch((e=>{document.location.href="/",API.ajaxHandler(y,e)}))}))}},parseFlag:e=>d({},e,{feature_segments:e.feature_segments&&e.feature_segments.map((e=>d({},e,{segment:e.segment.id})))}),removeFlag:(e,t)=>(y.saving(),API.trackEvent(n.default.events.REMOVE_FEATURE),g.delete(`${Project.api}projects/${e}/features/${t.id}/`).then((()=>{y.model.features=_.filter(y.model.features,(e=>e.id!==t.id)),y.model.lastSaved=(new Date).valueOf(),y.saved()}))),removeMultivariateOption:(e,t,a)=>(y.saving(),g.delete(`${Project.api}projects/${e}/features/${t}/mv-options/${a}/`).then((()=>{y.model.lastSaved=(new Date).valueOf(),y.saved()})).catch((e=>API.ajaxHandler(y,e)))),searchFeatures:_.throttle(((e,t,a,n,r)=>{y.search=e,E.getFeatures(a,t,!0,0,n,r)}),1e3),toggleFlag:(e,t,a,r,i)=>{const s=(i||y.model.features)[e];return y.saving(),API.trackEvent(n.default.events.TOGGLE_FEATURE),Promise.all(t.map((e=>{if(y.hasFlagInEnvironment(s.id,r)){const t=(r||y.model.keyedEnvironmentFeatures)[s.id];let a=d({},t);return a.feature={id:t.feature},g.put(`${Project.api}environments/${e.api_key}/featurestates/${t.id}/`,Object.assign({},a,{enabled:!t.enabled}))}return g.post(`${Project.api}environments/${e.api_key}/featurestates/`,Object.assign({},{comment:a,enabled:!0,feature:s.id}))}))).then((e=>{r||(y.model.keyedEnvironmentFeatures[s.id]=e[0]),y.model&&(y.model.lastSaved=(new Date).valueOf()),y.saved()}))}},y=Object.assign({},m,{getEnvironmentFlags:()=>y.model&&y.model.keyedEnvironmentFeatures,getFeatureUsage:()=>y.model&&y.model.usageData,getLastSaved:()=>y.model&&y.model.lastSaved,getProjectFlags:()=>y.model&&y.model.features,hasFlagInEnvironment(e,t){const a=t||y.model&&y.model.keyedEnvironmentFeatures;return a&&a.hasOwnProperty(e)},id:"features",paging:{},sort:{default:!0,label:"Name",sortBy:"name",sortOrder:"asc"}});y.dispatcherIndex=p.register(y,(e=>{const t=e.action;switch(t.actionType){case Actions.SEARCH_FLAGS:E.searchFeatures(t.search,t.environmentId,t.projectId,t.filter,t.pageSize);break;case Actions.GET_FLAGS:y.search=t.search||"",t.sort&&(y.sort=t.sort),E.getFeatures(t.projectId,t.environmentId,t.force,t.page,t.filter,t.pageSize);break;case Actions.REFRESH_FEATURES:t.projectId===y.projectId&&t.environmentId===y.environmentId&&E.getFeatures(y.projectId,y.environmentId,!0,y.page,y.filter);break;case Actions.TOGGLE_FLAG:E.toggleFlag(t.index,t.environments,t.comment,t.environmentFlags,t.projectFlags);break;case Actions.GET_FEATURE_USAGE:E.getFeatureUsage(t.projectId,t.environmentId,t.flag,t.period);break;case Actions.CREATE_FLAG:E.createFlag(t.projectId,t.environmentId,t.flag,t.segmentOverrides);break;case Actions.EDIT_ENVIRONMENT_FLAG:E.editFeatureState(t.projectId,t.environmentId,t.flag,t.projectFlag,t.environmentFlag,t.segmentOverrides,t.mode,t.onComplete);break;case Actions.EDIT_ENVIRONMENT_FLAG_CHANGE_REQUEST:E.editFeatureStateChangeRequest(t.projectId,t.environmentId,t.flag,t.projectFlag,t.environmentFlag,t.segmentOverrides,t.changeRequest,t.commit);break;case Actions.EDIT_FEATURE:E.editFeature(t.projectId,t.flag,t.onComplete);break;case Actions.EDIT_FEATURE_MV:E.editFeatureMv(t.projectId,t.flag,t.onComplete);break;case Actions.REMOVE_FLAG:E.removeFlag(t.projectId,t.flag);break;case Actions.REMOVE_MULTIVARIATE_OPTION:E.removeMultivariateOption(t.projectId,t.featureId,t.optionId)}})),E.store=y;t.default=E.store},16952:(e,t,a)=>{"use strict";const n=a(5243),r=a(3327),i=a(98606),s={getIdentitySegments:(e,t,a)=>{o.loading();const n=a||`${Project.api}projects/${e}/segments/?identity=${t}`;return i.get(n).then((e=>{o.model[t]=e.results&&_.sortBy(e.results,(e=>e.name)),o.paging.next=e.next,o.paging.count=e.count,o.paging.previous=e.previous,o.paging.currentPage=-1!==n.indexOf("?page=")?parseInt(n.substr(n.indexOf("?page=")+6)):1,o.loaded()})).catch((e=>API.ajaxHandler(o,e)))}},o=Object.assign({},r,{id:"identity-segments",model:{},paging:{}});o.dispatcherIndex=n.register(o,(e=>{const t=e.action;switch(t.actionType){case Actions.GET_IDENTITY_SEGMENTS:s.getIdentitySegments(t.projectId,t.id);break;case Actions.GET_IDENTITY_SEGMENTS_PAGE:s.getIdentitySegments(null,null,t.page)}})),s.store=o,e.exports=s.store},10749:(e,t,a)=>{"use strict";var n,r=(n=a(12339))&&n.__esModule?n:{default:n};function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}const s=a(5243),o=a(3327),l=a(98606),u={changeUserFlag({environmentId:e,identity:t,identityFlag:a,onSuccess:n,payload:i}){c.saving(),API.trackEvent(r.default.events.TOGGLE_USER_FEATURE);l.put(`${Project.api}environments/${e}/${Utils.getIdentitiesEndpoint()}/${t}/${Utils.getFeatureStatesEndpoint()}/${a}/`,Object.assign({},i)).then((()=>{n&&n(),c.saved()}))},deleteIdentityTrait(e,t,a){c.saving(),Utils.getShouldUpdateTraitOnDelete()?u.editTrait({environmentId:e,identity:t,trait:{trait_key:a,trait_value:null}}):l.delete(`${Project.api}environments/${e}/${Utils.getIdentitiesEndpoint()}/${t}/traits/${a}/`).then((()=>{const e=_.findIndex(c.model.traits,(e=>e.id===a));-1!==e&&c.model.traits.splice(e,1),c.saved()})).catch((e=>API.ajaxHandler(c,e)))},editTrait({environmentId:e,identity:t,trait:a}){const n=a.id,r=a.trait_key,s=a.trait_value;c.saving(),l[Utils.getTraitEndpointMethod(n)](Utils.getUpdateTraitEndpoint(e,t,n),i({identity:Utils.getShouldSendIdentityToTraits()?{identifier:c.model&&c.model.identity.identifier}:void 0,trait_key:r},Utils.getIsEdge()?{trait_value:s}:Utils.valueToTrait(s))).then((()=>u.getIdentity(e,t).then((()=>c.saved())))).catch((e=>API.ajaxHandler(c,e)))},editUserFlag({environmentId:e,identity:t,identityFlag:a,projectFlag:n}){c.saving(),API.trackEvent(r.default.events.EDIT_USER_FEATURE);(a.identity||a.identity_uuid?l.put(`${Project.api}environments/${e}/${Utils.getIdentitiesEndpoint()}/${t}/${Utils.getFeatureStatesEndpoint()}/${a.id||a.featurestate_uuid}/`,Object.assign({},{enabled:a.enabled,feature:{id:n.id},feature_state_value:a.feature_state_value,id:a.id||a.featurestate_uuid,multivariate_feature_state_values:a.multivariate_options})):l.post(`${Project.api}environments/${e}/${Utils.getIdentitiesEndpoint()}/${t}/${Utils.getFeatureStatesEndpoint()}/`,{enabled:a.enabled,feature:n.id,feature_state_value:a.feature_state_value,multivariate_feature_state_values:a.multivariate_options})).then((()=>u.getIdentity(e,t).then((()=>c.saved()))))},getIdentity:(e,t)=>(c.loading(),l.get(`${Project.api}environments/${e}/${Utils.getIdentitiesEndpoint()}/${t}/`).then((a=>Promise.all([l.get(Utils.getTraitEndpoint(e,t)),Promise.resolve(a),l.get(`${Project.api}environments/${e}/${Utils.getIdentitiesEndpoint()}/${t}/${Utils.getFeatureStatesEndpoint()}/`)]))).then((([e,t,a])=>{const n=a&&a.results||a,r=Utils.getIsEdge()?e:e&&e.results&&e.results.map((e=>({id:e.id,trait_key:e.trait_key,trait_value:Utils.featureStateToValue(e)})));c.model=c.model||{},c.model.features=n&&_.keyBy(n,(e=>e.feature)),c.model.traits=r,c.model.identity=t,c.loaded()})).catch((e=>API.ajaxHandler(c,e)))),removeUserFlag(e,t,a){c.saving(),API.trackEvent(r.default.events.REMOVE_USER_FEATURE),l.delete(`${Project.api}environments/${a}/${Utils.getIdentitiesEndpoint()}/${e}/${Utils.getFeatureStatesEndpoint()}/${t.id||t.featurestate_uuid}/`).then((()=>u.getIdentity(a,e).then((()=>c.saved()))))},toggleUserFlag({environmentFlag:e,environmentId:t,identity:a,identityFlag:n,projectFlag:i}){c.saving(),API.trackEvent(r.default.events.TOGGLE_USER_FEATURE);(n.identity||n.identity_uuid?l.put(`${Project.api}environments/${t}/${Utils.getIdentitiesEndpoint()}/${a}/${Utils.getFeatureStatesEndpoint()}/${n.id||n.featurestate_uuid}/`,Object.assign({},{enabled:!n.enabled,feature:{id:i.id},feature_state_value:n?n.feature_state_value:e&&e.feature_state_value,id:n.id||n.featurestate_uuid})):l.post(`${Project.api}environments/${t}/${Utils.getIdentitiesEndpoint()}/${a}/${Utils.getFeatureStatesEndpoint()}/`,{enabled:!e||!e.enabled,feature:i.id,feature_state_value:e?e.feature_state_value:void 0})).then((e=>{c.model.features[e.feature]=e,c.saved()}))}},c=Object.assign({},o,{getIdentityFlags:()=>c.model&&c.model.features,getIdentityForEditing:()=>c.model&&_.cloneDeep(c.model),getTraits:()=>c.model&&c.model.traits,id:"identity"});c.dispatcherIndex=s.register(c,(e=>{const t=e.action,a=t.environmentFlag,n=t.environmentId,r=t.identity,i=t.identityFlag,s=t.projectFlag,o=t.trait;switch(t.actionType){case Actions.GET_IDENTITY:u.getIdentity(t.envId,t.id);break;case Actions.TOGGLE_USER_FLAG:u.toggleUserFlag({environmentFlag:a,environmentId:n,identity:r,identityFlag:i,projectFlag:s});break;case Actions.EDIT_USER_FLAG:u.editUserFlag({environmentFlag:a,environmentId:n,identity:r,identityFlag:i,projectFlag:s});break;case Actions.EDIT_TRAIT:u.editTrait({environmentId:n,identity:r,trait:o});break;case Actions.REMOVE_USER_FLAG:u.removeUserFlag(r,i,n);break;case Actions.DELETE_IDENTITY_TRAIT:u.deleteIdentityTrait(t.envId,t.identity,t.id);break;case Actions.CHANGE_USER_FLAG:u.changeUserFlag(t.identity)}})),u.store=c,e.exports=u.store},46797:(e,t,a)=>{"use strict";var n,r=(n=a(12339))&&n.__esModule?n:{default:n};function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const l=a(5243),u=a(3327),c=a(98606),d=a(2543),p={createProject:e=>{m.saving(),p.shouldTrackFirstProject()&&API.trackEvent(r.default.events.CREATE_FIRST_PROJECT),API.trackEvent(r.default.events.CREATE_PROJECT),c.post(`${Project.api}projects/`,{name:e,organisation:m.id}).then((e=>p.setupEnvironmentsForProject(e)))},shouldTrackFirstProject:()=>!(1!==AccountStore.model.organisations.length||m.model.projects&&m.model.projects.length),setupEnvironmentsForProject:e=>{Promise.all([p.createEnvironment(e.id,"Development")]).then((t=>{e.environments=t,m.model.projects=m.model.projects.concat(e),m.savedId={environmentId:t[0].api_key,projectId:e.id},m.saved()}))},createEnvironment:(e,t)=>c.post(`${Project.api}environments/`,{name:t,project:e}),deleteInvite:e=>{m.saving(),c.delete(`${Project.api}organisations/${m.id}/invites/${e}/`).then((()=>{API.trackEvent(r.default.events.DELETE_INVITE),m.model&&(m.model.invites=d.filter(m.model.invites,(t=>t.id!==e))),m.saved()})).catch((e=>API.ajaxHandler(m,e)))},deleteProject:e=>{m.saving(),m.model&&(m.model.projects=d.filter(m.model.projects,(t=>t.id!==e)),m.model.keyedProjects=d.keyBy(m.model.projects,"id")),API.trackEvent(r.default.events.REMOVE_PROJECT),c.delete(`${Project.api}projects/${e}/`).then((()=>{m.trigger("removed")}))},deleteUser:e=>{m.saving(),c.post(`${Project.api}organisations/${m.id}/remove-users/`,[{id:e}]).then((()=>{API.trackEvent(r.default.events.DELETE_USER),m.model&&(m.model.users=d.filter(m.model.users,(t=>t.id!==e))),m.saved()})).catch((e=>API.ajaxHandler(m,e)))},editOrganisation:e=>{m.saving(),c.put(`${Project.api}organisations/${m.id}/`,{name:e}).then((e=>{const t=d.findIndex(m.model.organisations,{id:m.organisation.id});-1!==t&&(m.model.organisations[t]=e,m.organisation=e),m.saved()}))},getOrganisation:(e,t)=>{(e!==m.id||t)&&(m.id=e,m.loading(),Promise.all([c.get(`${Project.api}projects/?organisation=${e}`),c.get(`${Project.api}organisations/${e}/users/`)].concat("ADMIN"===AccountStore.getOrganisationRole(e)?[c.get(`${Project.api}organisations/${e}/invites/`)]:[])).then((t=>{e===m.id&&p.handleOrganisationData(e,t)})))},handleOrganisationData:(e,t)=>{let a=s(t,4),n=a[0],r=a[1],o=a[2],l=a[3],u=n;m.model=i({},m.model,{invites:o&&o.results,subscriptionMeta:l,users:r}),Project.hideInviteLinks?m.loaded():p.loadInviteLinks(e),p.loadProjectEnvironments(u)},loadInviteLinks:e=>{c.get(`${Project.api}organisations/${e}/invite-links/`).then((t=>{m.model.inviteLinks=t,t&&t.length?m.loaded():p.createInviteLinks(e)}))},createInviteLinks:e=>{Promise.all([c.post(`${Project.api}organisations/${e}/invite-links/`,{role:"ADMIN"}),c.post(`${Project.api}organisations/${e}/invite-links/`,{role:"USER"})]).then((()=>{c.get(`${Project.api}organisations/${e}/invite-links/`).then((e=>{m.model.inviteLinks=e,m.loaded()}))}))},loadProjectEnvironments:e=>{Promise.all(e.map(((t,a)=>c.get(`${Project.api}environments/?project=${t.id}`).then((t=>{e[a].environments=d.sortBy(t.results,"name")})).catch((()=>{e[a].environments=[]}))))).then((()=>{m.model.projects=e,m.model.keyedProjects=d.keyBy(m.model.projects,"id"),m.loaded()}))},invalidateInviteLink:e=>{const t=AccountStore.getOrganisation().id;c.delete(`${Project.api}organisations/${t}/invite-links/${e.id}/`).then((()=>c.post(`${Project.api}organisations/${t}/invite-links/`,{role:"ADMIN"}))).then((()=>{c.get(`${Project.api}organisations/${t}/invite-links/`).then((e=>{m.model.inviteLinks=e,m.loaded()}))}))},inviteUsers:e=>{m.saving(),c.post(`${Project.api}organisations/${m.id}/invite/`,{frontend_base_url:`${document.location.origin}/email-invite/`,invites:e.map((e=>(API.trackEvent(r.default.events.INVITE),{email:e.emailAddress,role:e.role.value})))}).then((e=>{m.model.invites=m.model.invites||[],m.model.invites=m.model.invites.concat(e),m.saved(),toast("Invite(s) sent successfully")})).catch((e=>{m.saved(),toast(`Failed to send invite(s). ${e&&e.error?e.error:"Please try again later"}`)}))},resendInvite:e=>{c.post(`${Project.api}organisations/${m.id}/invites/${e}/resend/`).then((()=>{API.trackEvent(r.default.events.RESEND_INVITE),toast("Invite resent successfully")})).catch((e=>{toast(`Failed to resend invite. ${e&&e.error?e.error:"Please try again later"}`)}))},updateUserRole:(e,t)=>{c.post(`${Project.api}organisations/${m.id}/users/${e}/update-role/`,{role:t}).then((()=>{API.trackEvent(r.default.events.UPDATE_USER_ROLE);const a=d.findIndex(m.model.users,(t=>t.id===e));-1!==a&&(m.model.users[a].role=t,m.saved())})).catch((e=>{toast(`Failed to update this user's role. ${e&&e.error?e.error:"Please try again later"}`)}))}},m=Object.assign({},u,{getInviteLinks:()=>m.model&&m.model.inviteLinks,getInvites:()=>m.model&&m.model.invites,getProject:e=>m.model&&m.model.keyedProjects&&m.model.keyedProjects[e],getProjects:()=>m.model&&m.model.projects,getSubscriptionMeta:()=>m.model&&m.model.subscriptionMeta,getUsers:()=>m.model&&m.model.users,id:"account"});m.dispatcherIndex=l.register(m,(e=>{const t=e.action;switch(t.actionType){case Actions.GET_ORGANISATION:p.getOrganisation(t.id||m.id,t.force);break;case Actions.CREATE_PROJECT:p.createProject(t.name);break;case Actions.DELETE_PROJECT:p.deleteProject(t.id);break;case Actions.INVITE_USERS:p.inviteUsers(t.invites);break;case Actions.DELETE_INVITE:p.deleteInvite(t.id);break;case Actions.DELETE_USER:p.deleteUser(t.id);break;case Actions.RESEND_INVITE:p.resendInvite(t.id);break;case Actions.UPDATE_USER_ROLE:p.updateUserRole(t.id,t.role);break;case Actions.INVALIDATE_INVITE_LINK:p.invalidateInviteLink(t.link);break;case Actions.LOGOUT:m.id=null}})),p.store=m,e.exports=p.store},91646:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(12339))&&n.__esModule?n:{default:n};const i=a(5243),s=a(3327),o=a(46797),l=a(98606),u={createEnv:(e,t,a,n)=>{API.trackEvent(r.default.events.CREATE_ENVIRONMENT);(a?l.post(`${Project.api}environments/${a}/clone/`,{description:n,name:e}):l.post(`${Project.api}environments/`,{description:n,name:e,project:t})).then((a=>l.put(`${Project.api}environments/${a.api_key}/`,{description:n,name:e,project:t}).then((t=>l.post(`${Project.api}environments/${t.api_key}/${Utils.getIdentitiesEndpoint()}/`,{environment:t.api_key,identifier:`${e.toLowerCase()}_user_123456`}).then((()=>{c.savedEnv=t,c.model&&c.model.environments&&(c.model.environments=c.model.environments.concat([t])),c.saved(),AppActions.refreshOrganisation()}))))))},deleteEnv:e=>{API.trackEvent(r.default.events.REMOVE_ENVIRONMENT),l.delete(`${Project.api}environments/${e.api_key}/`).then((()=>{c.model.environments=_.filter(c.model.environments,(t=>t.id!==e.id)),c.trigger("removed"),c.saved(),AppActions.refreshOrganisation()}))},editEnv:e=>{API.trackEvent(r.default.events.EDIT_ENVIRONMENT),l.put(`${Project.api}environments/${e.api_key}/`,e).then((t=>{const a=_.findIndex(c.model.environments,{id:e.id});c.model.environments[a]=t,c.saved(),AppActions.refreshOrganisation()}))},editProject:e=>{c.saving(),l.put(`${Project.api}projects/${e.id}/`,e).then((e=>{c.model=Object.assign(c.model,e),c.saved()}))},getProject:(e,t,a)=>{if(a)return c.loading(),Promise.all([l.get(`${Project.api}projects/${e}/`),l.get(`${Project.api}environments/?project=${e}`).catch((()=>[]))]).then((([a,n])=>{c.model=Object.assign(a,{environments:_.sortBy(n.results,"name")}),a.organisation!==o.id&&(AppActions.selectOrganisation(a.organisation),AppActions.getOrganisation(a.organisation)),c.id=e,c.loaded(),t&&t()})).catch((()=>{document.location.href="/"}));c.model&&c.model.environments&&c.id===e||(c.loading(),Promise.all([l.get(`${Project.api}projects/${e}/`),l.get(`${Project.api}environments/?project=${e}`).catch((()=>[]))]).then((([a,n])=>{c.model=Object.assign(a,{environments:_.sortBy(n.results,"name")}),a.organisation!==o.id&&(AppActions.selectOrganisation(a.organisation),AppActions.getOrganisation(a.organisation)),c.id=e,c.loaded(),t&&t()})).catch((()=>{document.location.href="/"})))},migrateProject:e=>{c.loading(),l.post(`${Project.api}projects/${e}/migrate-to-edge/`).then((()=>{u.getProject(e,(()=>c.saved()),!0)}))}},c=Object.assign({},s,{getEnvironment:e=>c.model&&_.find(c.model.environments,{api_key:e}),getEnvironmentIdFromKey:e=>{const t=_.find(c.model.environments,{api_key:e});return t&&t.id},getEnvironmentIdFromKeyAsync:async(e,t)=>c.model&&`${c.model.id}`==`${e}`?await Promise.resolve(c.getEnvironmentIdFromKey(t)):await u.getProject(e,null,!0).then((()=>Promise.resolve(c.getEnvironmentIdFromKey(t)))),getEnvs:()=>c.model&&c.model.environments,id:"project",model:null});c.dispatcherIndex=i.register(c,(e=>{const t=e.action;switch(t.actionType){case Actions.MIGRATE_PROJECT:u.migrateProject(t.projectId);break;case Actions.GET_PROJECT:u.getProject(t.projectId);break;case Actions.CREATE_ENV:u.createEnv(t.name,t.projectId,t.cloneId,t.description);break;case Actions.EDIT_ENVIRONMENT:u.editEnv(t.env);break;case Actions.DELETE_ENVIRONMENT:u.deleteEnv(t.env);break;case Actions.EDIT_PROJECT:u.editProject(t.id,t.project)}})),u.store=c;t.default=u.store},84022:(e,t,a)=>{"use strict";const n=a(5243),r=a(3327),i=a(98606),s=a(10025),o=s.createGroupAdmin,l=s.deleteGroupAdmin,u=s.getGroups,c=a(32799).getStore,d={createGroup:(e,t)=>{p.saving(),i.post(`${Project.api}organisations/${e}/groups/`,t).then((a=>{let n=Promise.resolve();t.users&&(n=i.post(`${Project.api}organisations/${e}/groups/${a.id}/add-users/`,{user_ids:t.users.map((e=>e.id))})),n.then((a=>{Utils.getFlagsmithHasFeature("group_admins")?Promise.all((t.usersToAddAdmin||[]).map((t=>o(c(),{group:a.id,orgId:e,user:t.id})))).then((()=>{d.getGroups(e)})):d.getGroups(e)}))})).catch((e=>API.ajaxHandler(p,e)))},getGroups:e=>{p.loading(),u(c(),{orgId:`${e}`,page:1},{forceRefetch:!0}).then((e=>{p.groups=e[0].data.results,p.loaded(),p.saved()}))},updateGroup:(e,t)=>{p.saving(),i.put(`${Project.api}organisations/${e}/groups/${t.id}/`,t).then((a=>{const n=t.usersToRemove.filter((e=>!!a.users.find((t=>t.id===e.id)))),r=t.users.filter((e=>!a.users.find((t=>t.id===e.id))));Promise.all([i.post(`${Project.api}organisations/${e}/groups/${t.id}/add-users/`,{user_ids:r.map((e=>e.id))}),i.post(`${Project.api}organisations/${e}/groups/${t.id}/remove-users/`,{user_ids:n.map((e=>e.id))})]).then((()=>{Utils.getFlagsmithHasFeature("group_admins")?Promise.all((t.usersToAddAdmin||[]).map((a=>o(c(),{group:t.id,orgId:e,user:a.id}))).concat((t.usersToRemoveAdmin||[]).map((a=>l(c(),{group:t.id,orgId:e,user:a.id}))))).then((()=>{d.getGroups(e)})):d.getGroups(e)}))})).catch((e=>API.ajaxHandler(p,e)))}},p=Object.assign({},r,{getGroups:()=>p.groups,getPaging:()=>p.paging,id:"identitylist",paging:{pageSize:999}});p.dispatcherIndex=n.register(p,(e=>{const t=e.action;switch(t.actionType){case Actions.UPDATE_GROUP:d.updateGroup(t.orgId,t.data);break;case Actions.CREATE_GROUP:d.createGroup(t.orgId,t.data);break;case Actions.GET_GROUPS:d.getGroups(t.orgId)}})),d.store=p,e.exports=d.store},7621:(e,t)=>{"use strict";function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},a.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return a({},t,{currentPage:e.page||1,pageSize:e.page_size})}},37236:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=a(96540),i=(n=a(96209))&&n.__esModule?n:{default:n};function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s.apply(this,arguments)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=(e,t,a=100)=>{const n=o((0,r.useState)(1),2),l=n[0],u=n[1],c=o((0,r.useState)(null),2),d=c[0],p=c[1],m=o((0,r.useState)(""),2),f=m[0],g=m[1],h=e(s({},t,{page:l,q:f}));(0,r.useEffect)((()=>{h?.data&&(1===h.originalArgs?.page?p(h?.data):p((e=>s({},h.data,{results:e?.results?e.results.concat(h.data?.results||[]):h.data?.results}))))}),[h?.data]);const v=(0,i.default)((e=>{g(e),u(1)}),a),E=(0,r.useCallback)((()=>{u(1)}),[]);return{data:d,isLoading:h.isLoading,loadMore:()=>{h?.data?.next&&u((e=>e+1))},refresh:E,response:h,searchItems:v}}},61509:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){const n=s((0,r.useState)(e||""),2),o=n[0],l=n[1],u=s((0,r.useState)(o),2),c=u[0],d=u[1],p=(0,i.default)((e=>{l(e),t?.()}),100);return(0,r.useEffect)((()=>{a?(c.length>a||0===c.length)&&p(c):p(c)}),[c]),{search:o,searchInput:c,setSearchInput:d}};var n,r=a(96540),i=(n=a(96209))&&n.__esModule?n:{default:n};function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}},96209:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=(o=(0,n.useState)(null),l=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(o,l)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}(o,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],s=a[1];var o,l;return function(){const a=arguments;i&&clearTimeout(i);const n=setTimeout((function(){e(...a),n===i&&s(null)}),t);s(n)}};var n=a(96540);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}},91822:e=>{"use strict";const t={GUID(e){let t=(new Date).getTime();const a="xxxx-xxxx-xxxx".replace(/[xy]/g,(e=>{const a=(t+crypto.getRandomValues(new Uint8Array(1))[0]%16)%16;return t=Math.floor(t/16),("x"==e?a:3&a|8).toString(16)}));return e?`${a}-${e}`:a},accents:[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],emailRegex:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]*[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)*$/i,fromParam(e){const t="undefined"==typeof document?"":document.location.search;if(!e&&!t)return{};const a=(e||t).replace(/(^\?)/,"");return JSON.parse(`{"${a.replace(/&/g,'","').replace(/=/g,'":"')}"}`,((e,t)=>""===e?t:decodeURIComponent(t)))},getPaging(e,t,a){t=Math.max(t,e);const n=(a-1)/2;let r=Math.min(t-a+1,Math.max(1,e-n));const i=Math.min(t+1,r+a);return r<1&&(r=1),{canNext:e!==t,canPrev:1!==e,currentPage:e,nextTruncated:t>i,prevTruncated:r>2,range:_.range(r,i),showFirstPage:r>1,showLastPage:i<=t,totalPages:t}},isInPast:e=>moment().diff(moment(e),"miliseconds")>0,isValidEmail:e=>t.emailRegex.test(e),isValidURL:e=>t.urlRegex.test(e),keys:{isDown:e=>40===(e.keyCode?e.keyCode:e.which)&&!e.shiftKey&&!e.ctrlKey,isEnter:e=>13===(e.keyCode?e.keyCode:e.which)&&!e.shiftKey&&!e.ctrlKey,isEscape:e=>27===(e.keyCode?e.keyCode:e.which)&&!e.shiftKey&&!e.ctrlKey,isUp:e=>38===(e.keyCode?e.keyCode:e.which)&&!e.shiftKey&&!e.ctrlKey},preventDefault(e){e&&e.preventDefault&&e.preventDefault()},safeParseEventValue(e){if(!e)return e;if(!e.target)return e;const t=e.target;return t.getAttribute?"checkbox"===t.type||"radio"===t.type?t.getAttribute("checked"):"string"==typeof t.value?t.value:t.getAttribute("data-value")||t.getAttribute("value"):t&&t.textContent?e.target.textContent:t?t.value:e},toParam:e=>Object.keys(e).filter((t=>void 0!==e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&"),urlRegex:/^(https?:\/\/)([\w.-]+\.[a-zA-Z]{2,})(\/[^\s]*)?$/};e.exports=t},72119:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const a={age(e){if(e){const t=moment(),a=moment(e);return t.diff(a,"years")}return e},ago(e){if(e){return moment(e).fromNow()}return e},camelCase:e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),countdown(e){let t;return e?Utils.isInPast(e)?"Now":(t=moment.duration({from:moment(),to:moment(e)}),`${a.nearestTen(parseInt(t.asDays()))}d ${a.nearestTen(t.hours())}h ${a.nearestTen(t.minutes())}m`):e},countdownMinutes(e){let t;return e?(t=moment.duration({from:moment(),to:moment(e)}),`${a.nearestTen(parseInt(t.minutes()))}:${a.nearestTen(t.seconds())}`):e},cssImage:e=>e?`url("${e}")`:"none",dateAndTime:e=>a.moment(e,"MMMM Do YYYY, h:mm a"),enumeration:{get:e=>e?a.camelCase(e.replace(/_/g," ")):"",set:e=>e.replace(/ /g,"_").toUpperCase()},fullName(e){if(!e)return"";const t=e.firstName||"",n=e.lastName||"";return t?`${a.camelCase(t)} ${a.camelCase(n)}`:a.camelCase(n)},userDisplayName:e=>a.fullName(e)||e.email,initialAndLastName(e){const t=a.fullName(e);if(!t)return t;const n=t.split(" ");return n.length>1?`${n[0].charAt(0).toUpperCase()}. ${n[n.length-1]}`:t},shortenNumber(e){const t=Math.floor(Math.log10(e))+1,a=Math.floor((t-1)/3);let n=e/Math.pow(1e3,a);return n=+parseFloat(n).toFixed(1),n+["","K","M","B","T"][a]},moment(e,t){if(e){return moment(e).format(t)}return e},money:(e,t)=>0===e?null==t?"FREE":t:e&&`${e.toFixed(2).replace(/./g,((e,t,a)=>t&&"."!==e&&(a.length-t)%3==0?`,${e}`:e))}`,monthAndYear:e=>a.moment(e,"MMM YYYY"),nearestTen:e=>e>=10?e:`0${e}`,ordinal(e){const t=["th","st","nd","rd"],a=e%100;return e?e+(t[(a-20)%10]||t[a]||t[0]):""},removeAccents(e){if(!e)return e;for(let t=0;t<Utils.accents.length;t++)e=e.replace(Utils.accents[t].letters,Utils.accents[t].base);return e},time:e=>a.moment(e,"hh:mm a"),truncateText:(e,t)=>e&&e.length>t?`${e.substring(0,t)}...`:e};t.default=a},82254:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasProtectedTag=void 0;var n=a(32799),r=a(52014);t.hasProtectedTag=(e,t)=>{const a=(0,n.getStore)(),i=r.tagService.endpoints.getTags.select({projectId:`${t}`})(a.getState()).data||[];return!!e.tags?.find((e=>{const t=i.find((t=>t.id===e));if(t){const e=t.label.toLowerCase().replace(/[ _]/g,"");return"protected"===e||"donotdelete"===e||"permanent"===e}}))}},73719:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(42736)),r=l(a(91646)),i=l(a(99229)),s=l(a(71416)),o=l(a(2543));function l(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u.apply(this,arguments)}const c=a(99589);let d=null;const p="Enterprise",m="Free",f="Scale-Up",g="Side Project",h="Startup",v=Object.assign({},a(91822),{appendImage:e=>{const t=document.createElement("img");t.src=e,document.body.appendChild(t)},calculateControl(e,t){if(!e||!e.length)return 100;let a=0;return e.map((e=>{const n=t&&t.find((t=>t.multivariate_feature_option===e.id));return a+=n?n.percentage_allocation:"number"==typeof e.default_percentage_allocation?e.default_percentage_allocation:e.percentage_allocation,null})),100-a},calculaterRemainingCallsPercentage(e,t){if(0===t)return 0;return 100-e/t*100<=30},changeRequestsEnabled:e=>"number"==typeof e,escapeHtml(e){const t=document.createTextNode(e),a=document.createElement("p");return a.appendChild(t),a.innerHTML},featureStateToValue:e=>e?"number"==typeof e.integer_value?v.getTypedValue(e.integer_value):"number"==typeof e.float_value?v.getTypedValue(e.float_value):v.getTypedValue(e.string_value||e.boolean_value):null,findOperator(e,t,a){const n=!!`${t}`.includes(":")&&(a||[]).find((a=>{const n=t.split(":"),r=`:${n[n.length-1]}`;return a.value===e+r}));return n||a.find((t=>t.value===e))},getApproveChangeRequestPermission:()=>v.getFlagsmithHasFeature("update_feature_state_permission")?"APPROVE_CHANGE_REQUEST":"VIEW_ENVIRONMENT",getFeatureStatesEndpoint(e){const t=e||r.default.model;return v.getFlagsmithHasFeature("edge_identities")&&t&&t.use_edge_identities?"edge-featurestates":"featurestates"},getFlagValue:(e,t,a,n)=>t?a?{archieved_multivariate_options:e.archieved_multivariate_options,description:e.description,enabled:a.enabled,feature_state_value:a.feature_state_value,hide_from_client:t.hide_from_client,is_archived:e.is_archived,is_server_key_only:e.is_server_key_only,multivariate_options:e.multivariate_options,name:e.name,type:e.type}:{archieved_multivariate_options:e.archieved_multivariate_options,description:e.description,enabled:t.enabled,feature_state_value:t.feature_state_value,hide_from_client:t.hide_from_client,is_archived:e.is_archived,is_server_key_only:e.is_server_key_only,multivariate_options:e.multivariate_options.map((e=>{const t=n&&n.find((t=>e.id===t.multivariate_feature_option));return u({},e,{default_percentage_allocation:t?t.percentage_allocation:e.default_percentage_allocation})})),name:e.name,tags:e.tags,type:e.type}:{archieved_multivariate_options:e.archieved_multivariate_options,description:e.description,enabled:!1,feature_state_value:e.initial_value,hide_from_client:!1,is_archived:e.is_archived,is_server_key_only:e.is_server_key_only,multivariate_options:e.multivariate_options,name:e.name,tags:e.tags,type:e.type},getFlagsmithHasFeature:e=>v.parseBetaFeatures().includes(e)&&"boolean"==typeof s.default.getTrait(`${e}-opt-in-enabled`)?s.default.getTrait(`${e}-opt-in-enabled`):s.default.hasFeature(e),getFlagsmithValue:e=>v.parseBetaFeatures().includes(e)&&void 0!==s.default.getTrait(`${e}-opt-in-value`)?s.default.getTrait(`${e}-opt-in-value`):s.default.getValue(e),getIdentitiesEndpoint(e){const t=e||r.default.model;return v.getFlagsmithHasFeature("edge_identities")&&t&&t.use_edge_identities?"edge-identities":"identities"},getIsEdge(){const e=r.default.model;return!!(v.getFlagsmithHasFeature("edge_identities")&&r.default.model&&e?.use_edge_identities)},getManageFeaturePermission:e=>e&&v.getFlagsmithHasFeature("update_feature_state_permission")?"CREATE_CHANGE_REQUEST":v.getFlagsmithHasFeature("update_feature_state_permission")?"UPDATE_FEATURE_STATE":"ADMIN",getManageFeaturePermissionDescription:e=>e&&v.getFlagsmithHasFeature("update_feature_state_permission")?"Create Change Request":v.getFlagsmithHasFeature("update_feature_state_permission")?"Update Feature State":"Admin",getManageUserPermission:()=>"MANAGE_IDENTITIES",getManageUserPermissionDescription:()=>"Manage Identities",getPlanName:e=>e&&e.includes("scale-up")?f:e&&e.includes("side-project")?g:e&&e.includes("startup")||e&&e.includes("start-up")?h:e&&e.includes("enterprise")?p:m,getPlanPermission:(e,t)=>{let a=!0;const n=v.getPlanName(e);if(!v.getFlagsmithHasFeature("plan_based_access"))return!0;if(!e||n===m)return!1;const r=n!==g,i=r&&n!==h;switch(t){case"FLAG_OWNERS":case"AUDIT":case"FORCE_2FA":case"4_EYES":a=i;break;case"CREATE_ADDITIONAL_PROJECT":case"2FA":case"RBAC":case"SCHEDULE_FLAGS":a=r;break;case"AUTO_SEATS":a=i&&v.getFlagsmithHasFeature("auto_seats");break;default:a=!0}return a},getPlansPermission:e=>{if(!v.getFlagsmithHasFeature("plan_based_access"))return!0;const t="2FA"!==e?n.default.getActiveOrgPlan()?[n.default.getActiveOrgPlan()]:null:n.default.getPlans();if(!t||!t.length)return!1;return!!o.default.find(t.map((t=>v.getPlanPermission(t,e))),(e=>!!e))},getSDKEndpoint(e){const t=e||r.default.model;return v.getFlagsmithHasFeature("edge_identities")&&t&&t.use_edge_identities?i.default.flagsmithClientEdgeAPI:i.default.api},getShouldHideIdentityOverridesTab(e){const t=e||r.default.model;return!!(v.getFlagsmithHasFeature("edge_identities")&&t&&t.use_edge_identities)},getShouldSendIdentityToTraits(e){const t=e||r.default.model;return!(v.getFlagsmithHasFeature("edge_identities")&&t&&t.use_edge_identities)},getShouldUpdateTraitOnDelete(e){const t=e||r.default.model;return!!(v.getFlagsmithHasFeature("edge_identities")&&t&&t.use_edge_identities)},getTraitEndpoint(e,t){const a=r.default.model;return v.getFlagsmithHasFeature("edge_identities")&&a?.use_edge_identities?`${i.default.api}environments/${e}/edge-identities/${t}/list-traits/`:`${i.default.api}environments/${e}/identities/${t}/traits/`},getTraitEndpointMethod:e=>v.getFlagsmithHasFeature("edge_identities")&&r.default.model?.use_edge_identities||e?"put":"post",getTypedValue(e,t){if(void 0===e)return"";if("string"!=typeof e)return e;const a=/^\d+$/.test(e);return a&&parseInt(e)>Number.MAX_SAFE_INTEGER?`${e}`:"true"===e?!t||"true":"false"===e?!!t&&"false":a?-1!==e.indexOf(".")?parseFloat(e):parseInt(e):e},getUpdateTraitEndpoint:(e,t,a)=>v.getFlagsmithHasFeature("edge_identities")&&r.default.model?.use_edge_identities?`${i.default.api}environments/${e}/edge-identities/${t}/update-traits/`:`${i.default.api}environments/${e}/identities/${t}/traits/${a?`${a}/`:""}`,getViewIdentitiesPermission:()=>v.getFlagsmithHasFeature("view_identities_permission")?"VIEW_IDENTITIES":"MANAGE_IDENTITIES",isMigrating(){const e=r.default.model;return!(!v.getFlagsmithHasFeature("edge_identities")||"MIGRATION_IN_PROGRESS"!==e?.migration_status&&"MIGRATION_SCHEDULED"!==e?.migration_status)},loadScriptPromise:e=>new Promise((t=>{const a=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.addEventListener("load",(function e(){this.removeEventListener("load",e),t(null)})),n.src=e,a.appendChild(n)})),numberWithCommas:e=>"number"!=typeof e?"":new Intl.NumberFormat("en-US").format(e),openChat(){"undefined"!=typeof $crisp&&$crisp.push(["do","chat:open"]),window.zE&&zE("messenger","open")},parseBetaFeatures(){if(!s.default.hasFeature("beta_features"))return[];if(d)return d;let e;try{e=JSON.parse(s.default.getValue("beta_features"));const t=[];Object.keys(e).map((a=>{e[a].map((e=>{t.push(e.flag)}))})),d=t}catch(e){}return d||[]},removeElementFromArray:(e,t)=>e.slice(0,t).concat(e.slice(t+1)),renderWithPermission:(e,t,a)=>e?a:React.createElement(Tooltip,{title:React.createElement("div",null,a),place:"right",html:!0},t),validateRule(e){if(!e)return!1;if(e.delete)return!0;const t=v.getFlagsmithValue("segment_operators")?JSON.parse(v.getFlagsmithValue("segment_operators")):[],a=v.findOperator(e.operator,e.value,t);if(this.isSemverOperator(a,e.value))return!!c.valid(`${e.value.split(":")[0]}`);switch(e.operator){case"PERCENTAGE_SPLIT":return this.isValidPercentage(e.value);case"REGEX":return this.isValidRegex(e.value);case"MODULO":return this.isValidModulo(e.value);default:return this.isDefaultValid(a,e.value)}},isSemverOperator:(e,t)=>e&&e.value&&e.value.toLowerCase().includes("semver"),isValidPercentage(e){const t=parseFloat(e);return!isNaN(t)&&t>=0&&t<=100},isValidRegex(e){try{if(!e)throw new Error("");return new RegExp(`${e}`),!0}catch(e){return!1}},isValidModulo(e){const t=e.split("|");if(2===t.length){const e=[parseFloat(t[0]),parseFloat(t[1])],a=e[0],n=e[1];return!isNaN(a)&&a>0&&!isNaN(n)&&n>=0}return!1},isDefaultValid:(e,t)=>e&&e.hideValue||""!==t&&null!=t,valueToFeatureState(e){const t=v.getTypedValue(e);return"boolean"==typeof t?{boolean_value:t,integer_value:null,name:"",string_value:null,type:"bool"}:"number"==typeof t?{boolean_value:null,integer_value:t,name:"",string_value:null,type:"int"}:{boolean_value:null,integer_value:null,name:"",string_value:null===e?null:t||"",type:"unicode"}},valueToTrait(e){const t=v.getTypedValue(e);return"boolean"==typeof t?{boolean_value:t,integer_value:null,string_value:null,value_type:"bool"}:"number"==typeof t?{boolean_value:null,integer_value:t,string_value:null,value_type:"int"}:{boolean_value:null,integer_value:null,string_value:null===e?null:t||"",value_type:"unicode"}}});t.default=v},71416:function(e,t,a){!function(e){"use strict";var t={};Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r={getItem:function(e,t){return r.multiGet([e]).then((function(e){return e[0][1]})).then((function(e){return t&&t(null,e),e})).catch((function(e){return t&&t(e,null),e}))},setItem:function(e,t,a){return r.multiSet([[e,t]]).then((function(e){return a&&a(null,e),e})).catch((function(e){return a&&a(e,null),e}))},getAllKeys:function(e){return Promise.resolve(Object.keys(localStorage)).then((function(t){return e&&e(null,t),t})).catch((function(t){return e&&e(t,null),t}))},removeItem:function(e,t){return r.multiRemove([e]).then((function(){t&&t(null)})).catch((function(e){t&&t(e,null)}))},clear:function(){return new Promise((function(e){window.localStorage.clear(),e()}))},multiGet:function(e){return new Promise((function(t){t(e.reduce((function(e,t){return e.concat([[t,localStorage.getItem(t)]])}),[]))}))},multiSet:function(e){return new Promise((function(t,a){var r=[];return e.forEach((function(e){var t=n(e,2),a=t[0],i=t[1];try{localStorage.setItem(a,i)}catch(e){r.push(e)}})),r.length>0?a(r):t()}))},multiRemove:function(e){return new Promise((function(t){e.forEach((function(e){return window.localStorage.removeItem(e)})),t()}))},flushGetRequests:function(){console.warn("AsyncStorage.flushGetRequests: Not supported on `web`")}},i=t.default=r,s=function(){return s=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};function o(e,t,a){if(a||2===arguments.length)for(var n,r=0,i=t.length;r<i;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}var l,u,c=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,r,i;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(r=n;0!=r--;)if(!e(t[r],a[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(a,i[r]))return!1;for(r=n;0!=r--;){var s=i[r];if(!e(t[s],a[s]))return!1}return!0}return t!=t&&a!=a};!function(e){e.NONE="NONE",e.DEFAULT_FLAGS="DEFAULT_FLAGS",e.CACHE="CACHE",e.SERVER="SERVER"}(l||(l={}));var d=null,p="BULLET_TRAIN_DB",m="BULLET_TRAIN_EVENT",f="https://edge.api.flagsmith.com/api/v1/",g=function(e){return"Attempted to "+e+" a user before calling flagsmith.init. Call flagsmith.init first, if you wish to prevent it sending a request for flags, call init with preventFetch:true."},h="flagsmith_value_",v="flagsmith_enabled_",E="flagsmith_trait_",y=function(){function e(e){var t=this;this._trigger=null,this._triggerLoadingState=null,this.timestamp=null,this.isLoading=!1,this.eventSource=null,this.getJSON=function(e,a,n){var r=t,i=r.environmentID,s=r.headers,o={method:a||"GET",body:n,headers:{"x-environment-key":"".concat(i)}};return a&&"GET"!==a&&(o.headers["Content-Type"]="application/json; charset=utf-8"),s&&Object.assign(o.headers,s),u||console.error("Flagsmith: fetch is undefined, please specify a fetch implementation into flagsmith.init to support SSR."),u(e,o).then((function(n){var r,i=null===(r=n.headers)||void 0===r?void 0:r.get("x-flagsmith-document-updated-at");if(i)try{var s=parseFloat(i);if(isNaN(s))throw"Failed to parse x-flagsmith-document-updated-at";t.timestamp=s}catch(e){t.log(e,"Failed to parse x-flagsmith-document-updated-at",i)}return t.log("Fetch response: "+n.status+" "+(a||"GET")+0+e),n.text().then((function(e){var t=e;try{t=JSON.parse(e)}catch(e){}return n.status&&n.status>=200&&n.status<300?t:Promise.reject(t)}))})).catch((function(e){throw console.error("Flagsmith: Fetch error: "+e),new Error("Flagsmith: Fetch error:"+e)}))},this.getFlags=function(e,a){var n=t,r=n.onChange;n.onError;var i=n.identity;n.api,t.log("Get Flags"),t.isLoading=!0,t.loadingState.isFetching||t.setLoadingState(s(s({},t.loadingState),{isFetching:!0})),i||function(e){var a=e.flags,n=e.traits;t.isLoading=!1,i&&(t.withTraits=null);var o={},u={};n=n||[],(a=a||[]).forEach((function(e){o[e.feature.name.toLowerCase().replace(/ /g,"_")]={id:e.feature.id,enabled:e.enabled,value:e.feature_state_value}})),n.forEach((function(e){u[e.trait_key.toLowerCase().replace(/ /g,"_")]=e.trait_value})),t.oldFlags=s({},t.flags);var d=c(t.flags,o),p=c(t.traits,u);if(t.flags=o,t.traits=u,t.updateStorage(),t.datadogRum)try{if(t.datadogRum.trackTraits){var m={};Object.keys(t.traits).map((function(e){m[E+e]=t.getTrait(e)}));var f=s(s(s({},t.datadogRum.client.getUser()),{id:t.datadogRum.client.getUser().id||t.identity}),m);t.log("Setting Datadog user",f),t.datadogRum.client.setUser(f)}}catch(e){console.error(e)}if(t.dtrum)try{var g={javaDouble:{},date:{},shortString:{},javaLongOrObject:{}};Object.keys(t.flags).map((function(e){w(g,h+e,t.getValue(e,{},!0)),w(g,v+e,t.hasFeature(e,!0))})),Object.keys(t.traits).map((function(e){w(g,E+e,t.getTrait(e))})),t.log("Sending javaLongOrObject traits to dynatrace",g.javaLongOrObject),t.log("Sending date traits to dynatrace",g.date),t.log("Sending shortString traits to dynatrace",g.shortString),t.log("Sending javaDouble to dynatrace",g.javaDouble),t.dtrum.sendSessionProperties(g.javaLongOrObject,g.date,g.shortString,g.javaDouble)}catch(e){console.error(e)}r&&r(t.oldFlags,{isFromServer:!0,flagsChanged:!d,traitsChanged:!p},t._loadedState(l.SERVER))}({flags:[{feature_state_value:null,enabled:!0,feature:{name:"try_it",type:"STANDARD",id:24}},{feature_state_value:'[\n  {\n    "value": "EQUAL",\n    "label": "Exactly Matches (=)"\n  },\n  {\n    "value": "NOT_EQUAL",\n    "label": "Does not match (!=)"\n  },\n  {\n    "value": "PERCENTAGE_SPLIT",\n    "label": "% Split"\n  },\n  {\n    "value": "GREATER_THAN",\n    "label": ">"\n  },\n  {\n    "value": "GREATER_THAN_INCLUSIVE",\n    "label": ">="\n  },\n  {\n    "value": "LESS_THAN",\n    "label": "<"\n  },\n  {\n    "value": "LESS_THAN_INCLUSIVE",\n    "label": "<="\n  },  {\n    "value": "GREATER_THAN:semver",\n    "label": "SemVer >",        "append": ":semver"  },\n  {\n    "value": "GREATER_THAN_INCLUSIVE:semver",\n    "label": "SemVer >=",        "append": ":semver"  },\n  {\n    "value": "LESS_THAN:semver",\n    "label": "SemVer <",        "append": ":semver"\n  },\n  {\n    "value": "LESS_THAN_INCLUSIVE:semver",\n    "label": "SemVer <=",        "append": ":semver"  },\n\n  {\n    "value": "CONTAINS",\n    "label": "Contains"\n  },\n  {\n    "value": "NOT_CONTAINS",\n    "label": "Does not contain"\n  },\n  {\n    "value": "REGEX",\n    "label": "Matches regex"\n  },\n  {\n    "value": "IS_SET",\n    "label": "Is set",\n    "hideValue": true\n\n  },\n   {\n    "value": "IS_NOT_SET",\n    "label": "Is not set",\n    "hideValue": true\n  },\n  {\n    "value": "IN",\n    "label": "In"\n  }\n]',enabled:!0,feature:{name:"segment_operators",type:"STANDARD",id:1530}},{feature_state_value:"red",enabled:!1,feature:{name:"demo_feature",type:"MULTIVARIATE",id:2509}},{feature_state_value:'{\n  "url": "https://github.com/login/oauth/authorize?scope=user&client_id=cd16a9c1574074756876&redirect_uri=https%3A%2F%2Fstaging.bullet-train.io%2Foauth%2Fgithub"\n}',enabled:!0,feature:{name:"oauth_github",type:"STANDARD",id:2712}},{feature_state_value:'{\n "clientId":"232959427810-br6ltnrgouktp0ngsbs04o14ueb9rch0.apps.googleusercontent.com",\n "apiKey":"AIzaSyCnHuN-y6BIEAM5vTISXaz3X9GpEPSxWjo"\n}',enabled:!0,feature:{name:"oauth_google",type:"STANDARD",id:2713}},{feature_state_value:null,enabled:!1,feature:{name:"plan_based_access",type:"STANDARD",id:5538}},{feature_state_value:'["amplitude","datadog","dynatrace","new-relic","segment","rudderstack","webhook","slack", "heap","mixpanel"]',enabled:!0,feature:{name:"integrations",type:"STANDARD",id:5560}},{feature_state_value:'{\n    "datadog": {\n        "perEnvironment": false,\n        "image": "https://app.flagsmith.com/static/images/integrations/datadog.svg",\n        "docs": "https://docs.flagsmith.com/integrations/datadog/",\n        "fields": [\n            {\n                "key": "base_url",\n                "label": "Base URL"\n            },\n            {\n                "key": "api_key",\n                "label": "API Key"\n            }\n        ],\n        "tags": [\n            "logging"\n        ],\n        "title": "Datadog",\n        "description": "Sends events to Datadog for when flags are created, updated and removed. Logs are tagged with the environment they came from e.g. production."\n    },  \n    "dynatrace": {\n        "perEnvironment": true,\n        "image": "/static/images/integrations/dynatrace.svg",\n        "docs": "https://docs.flagsmith.com/integrations/dynatrace/",\n        "fields": [\n            {\n                "key": "base_url",\n                "label": "Base URL"\n            },\n            {\n                "key": "api_key",\n                "label": "API Key"\n            },\n            {\n                "key": "entity_selector",\n                "label": "Entity Selector"\n            }\n        ],\n        "tags": [\n            "logging"\n        ],\n        "title": "Dynatrace",\n        "description": "Sends events to Dynatrace for when flags are created, updated and removed. Logs are tagged with the environment they came from e.g. production."\n    },\n    "slack": {\n        "perEnvironment": true,\n        "isOauth": true,\n        "image": "https://app.flagsmith.com/static/images/integrations/slack.svg",\n        "docs": "https://docs.flagsmith.com/integrations/slack/",\n        "tags": [\n            "messaging"\n        ],\n        "title": "Slack",\n        "description": "Sends messages to Slack when flags are created, updated and removed. Logs are tagged with the environment they came from e.g. production."\n    },\n    "amplitude": {\n        "perEnvironment": true,\n        "image": "https://app.flagsmith.com/static/images/integrations/amplitude.svg",\n        "docs": "https://docs.flagsmith.com/integrations/amplitude/",\n        "fields": [\n            {\n                "key": "api_key",\n                "label": "API Key"\n            }\n        ],\n        "tags": [\n            "analytics"\n        ],\n        "title": "Amplitude",\n        "description": "Sends data on what flags served to each identity."\n    },\n    "new-relic": {\n        "perEnvironment": false,\n        "image": "https://app.flagsmith.com/static/images/integrations/new_relic.svg",\n        "docs": "https://docs.flagsmith.com/integrations/newrelic",\n        "fields": [\n            {\n                "key": "base_url",\n                "label": "New Relic Base URL"\n            },\n            {\n                "key": "api_key",\n                "label": "New Relic API Key"\n            },\n            {\n                "key": "app_id",\n                "label": "New Relic Application ID"\n            }\n        ],\n        "tags": [\n            "analytics"\n        ],\n        "title": "New Relic",\n        "description": "Sends events to New Relic for when flags are created, updated and removed."\n    },\n    "segment": {\n        "perEnvironment": true,\n        "image": "https://app.flagsmith.com/static/images/integrations/segment.svg",\n        "docs": "https://docs.flagsmith.com/integrations/segment",\n        "fields": [\n            {\n                "key": "api_key",\n                "label": "API Key"\n            }\n        ],\n        "tags": [\n            "analytics"\n        ],\n        "title": "Segment",\n        "description": "Sends data on what flags served to each identity."\n    },\n    "rudderstack": {\n        "perEnvironment": true,\n        "image": "https://app.flagsmith.com/static/images/integrations/rudderstack.svg",\n        "docs": "https://docs.flagsmith.com/integrations/rudderstack",\n        "fields": [            {\n                "key": "base_url",\n                "label": "Rudderstack Data Plane URL"\n            },\n            {\n                "key": "api_key",\n                "label": "API Key"\n            }\n        ],\n        "tags": [\n            "analytics"\n        ],\n        "title": "Rudderstack",\n        "description": "Sends data on what flags served to each identity."\n    },        "webhook": {\n        "perEnvironment": true,\n        "image": "https://app.flagsmith.com/static/images/integrations/webhooks.svg",\n        "docs": "https://docs.flagsmith.com/integrations/webhook",\n        "fields": [            {\n                "key": "url",\n                "label": "Your Webhook URL Endpoint"\n            },\n            {\n                "key": "secret",\n                "label": "Your Webhook Secret"\n            }\n        ],\n        "tags": [\n            "analytics"\n        ],\n        "title": "Webhook",\n        "description": "Sends data on what flags served to each identity to a Webhook Endpoint you provide."\n    },\n    "heap": {\n        "perEnvironment": true,\n        "image": "https://app.flagsmith.com/static/images/integrations/heap.svg",\n        "docs": "https://docs.flagsmith.com/integrations/heap",\n        "fields": [\n            {\n                "key": "api_key",\n                "label": "API Key"\n            }\n        ],\n        "tags": [\n            "analytics"\n        ],\n        "title": "Heap Analytics",\n        "description": "Sends data on what flags served to each identity."\n    },\n    "mixpanel": {\n        "perEnvironment": true,\n        "image": "https://app.flagsmith.com/static/images/integrations/mp.svg",\n        "docs": "https://docs.flagsmith.com/integrations/mixpanel",\n        "fields": [\n            {\n                "key": "api_key",\n                "label": "API Key"\n            }\n        ],\n        "tags": [\n            "analytics"\n        ],\n        "title": "Mixpanel",\n        "description": "Sends data on what flags served to each identity."\n    }\n}',enabled:!0,feature:{name:"integration_data",type:"STANDARD",id:5564}},{feature_state_value:null,enabled:!0,feature:{name:"usage_chart",type:"STANDARD",id:6006}},{feature_state_value:null,enabled:!1,feature:{name:"scaleup_audit",type:"STANDARD",id:6903}},{feature_state_value:"**Staging Environment**",enabled:!1,feature:{name:"butter_bar",type:"STANDARD",id:7168}},{feature_state_value:null,enabled:!0,feature:{name:"flag_analytics",type:"STANDARD",id:7460}},{feature_state_value:null,enabled:!1,feature:{name:"dark_mode",type:"STANDARD",id:8266}},{feature_state_value:null,enabled:!1,feature:{name:"read_only_mode",type:"STANDARD",id:8798}},{feature_state_value:null,enabled:!0,feature:{name:"saml",type:"STANDARD",id:10202}},{feature_state_value:null,enabled:!1,feature:{name:"payments_enabled",type:"STANDARD",id:11639}},{feature_state_value:null,enabled:!1,feature:{name:"disable_create_org",type:"STANDARD",id:11727}},{feature_state_value:null,enabled:!0,feature:{name:"restrict_project_create_to_admin",type:"STANDARD",id:13507}},{feature_state_value:"",enabled:!0,feature:{name:"upgrade_subscription",type:"STANDARD",id:14884}},{feature_state_value:null,enabled:!0,feature:{name:"compare_environments",type:"STANDARD",id:15278}},{feature_state_value:'["javascript"]',enabled:!0,feature:{name:"not_operator",type:"STANDARD",id:15372}},{feature_state_value:null,enabled:!0,feature:{name:"force_2fa",type:"STANDARD",id:15394}},{feature_state_value:null,enabled:!1,feature:{name:"disable_oauth_registration",type:"STANDARD",id:15875}},{feature_state_value:"Adds the UPDATE_FEATURE_STATE permission to the environment",enabled:!0,feature:{name:"update_feature_state_permission",type:"STANDARD",id:16077}},{feature_state_value:null,enabled:!0,feature:{name:"organisation_permissions",type:"STANDARD",id:16404}},{feature_state_value:10,enabled:!0,feature:{name:"audit_api_search",type:"STANDARD",id:16814}},{feature_state_value:null,enabled:!0,feature:{name:"mailing_list",type:"STANDARD",id:16857}},{feature_state_value:null,enabled:!0,feature:{name:"tags",type:"STANDARD",id:17718}},{feature_state_value:null,enabled:!0,feature:{name:"serverside_sdk_keys",type:"STANDARD",id:18059}},{feature_state_value:"v2",enabled:!1,feature:{name:"search_algorithm",type:"STANDARD",id:19868}},{feature_state_value:null,enabled:!0,feature:{name:"4eyes",type:"STANDARD",id:19941}},{feature_state_value:null,enabled:!0,feature:{name:"annual_plans",type:"STANDARD",id:21042}},{feature_state_value:null,enabled:!0,feature:{name:"edge_identities",type:"STANDARD",id:21107}},{feature_state_value:null,enabled:!0,feature:{name:"scheduling",type:"STANDARD",id:21165}},{feature_state_value:"",enabled:!0,feature:{name:"manage_identities_permission",type:"STANDARD",id:22017}},{feature_state_value:'{\n  "experimental (handle with care!)": [\n      {\n        "flag":"scheduling",\n        "hasEnabled": true,\n        "description": "Allows you to schedule feature modifications at a certain date and time"\n      }\n  ],\n  "examples": [\n    {\n     "flag":"try_it",\n     "hasEnabled": true,\n     "description":"Determines if the try it panels show on each of the pages"\n    },\n    {\n      "flag":"butter_bar",\n      "description": "Shows a message bar on all pages",\n      "hasValue": true\n    }\n  ]\n}',enabled:!0,feature:{name:"beta_features",type:"STANDARD",id:24103}},{feature_state_value:null,enabled:!0,feature:{name:"allow_client_traits",type:"STANDARD",id:25009}},{feature_state_value:null,enabled:!0,feature:{name:"master_api_key",type:"STANDARD",id:25213}},{feature_state_value:null,enabled:!0,feature:{name:"edge_migrator",type:"STANDARD",id:25514}},{feature_state_value:null,enabled:!0,feature:{name:"segment_associated_features",type:"STANDARD",id:26026}},{feature_state_value:null,enabled:!0,feature:{name:"use_admin_identity_featurestates",type:"STANDARD",id:26840}},{feature_state_value:"",enabled:!1,feature:{name:"sso_idp",type:"STANDARD",id:27854}},{feature_state_value:null,enabled:!0,feature:{name:"flag_based_segments",type:"STANDARD",id:28083}},{feature_state_value:"",enabled:!0,feature:{name:"prevent_flag_defaults",type:"STANDARD",id:29223}},{feature_state_value:null,enabled:!0,feature:{name:"default_user_groups",type:"STANDARD",id:30754}},{feature_state_value:null,enabled:!0,feature:{name:"group_external_ids",type:"STANDARD",id:32474}},{feature_state_value:null,enabled:!0,feature:{name:"rotate_api_token",type:"STANDARD",id:33869}},{feature_state_value:null,enabled:!0,feature:{name:"tag_environments",type:"STANDARD",id:34604}},{feature_state_value:null,enabled:!0,feature:{name:"case_sensitive_flags",type:"STANDARD",id:34947}},{feature_state_value:null,enabled:!0,feature:{name:"feature_name_regex",type:"STANDARD",id:34967}},{feature_state_value:null,enabled:!0,feature:{name:"view_identities_permission",type:"STANDARD",id:35097}},{feature_state_value:null,enabled:!1,feature:{name:"auto_seats",type:"STANDARD",id:35163}},{feature_state_value:null,enabled:!1,feature:{name:"usage_filter",type:"STANDARD",id:37075}},{feature_state_value:null,enabled:!0,feature:{name:"delete_organisation",type:"STANDARD",id:39317}},{feature_state_value:null,enabled:!0,feature:{name:"delete_environment",type:"STANDARD",id:39340}},{feature_state_value:null,enabled:!0,feature:{name:"delete_project",type:"STANDARD",id:39344}},{feature_state_value:null,enabled:!0,feature:{name:"hide_disabled_flags_environment",type:"STANDARD",id:39871}},{feature_state_value:null,enabled:!1,feature:{name:"mv_v2_setting",type:"STANDARD",id:40677}},{feature_state_value:null,enabled:!0,feature:{name:"group_admins",type:"STANDARD",id:41896}},{feature_state_value:null,enabled:!0,feature:{name:"change_email",type:"STANDARD",id:42925}},{feature_state_value:null,enabled:!0,feature:{name:"delete_account",type:"STANDARD",id:44132}},{feature_state_value:null,enabled:!1,feature:{name:"disable_users_as_reviewers",type:"STANDARD",id:45632}},{feature_state_value:null,enabled:!0,feature:{name:"enable_groups_as_reviewers",type:"STANDARD",id:45633}},{feature_state_value:null,enabled:!0,feature:{name:"configure_hide_sensitive_data",type:"STANDARD",id:45645}},{feature_state_value:null,enabled:!0,feature:{name:"is_server_key_only",type:"STANDARD",id:46034}},{feature_state_value:null,enabled:!1,feature:{name:"max_api_calls_alert",type:"STANDARD",id:46691}},{feature_state_value:null,enabled:!0,feature:{name:"compare_identities",type:"STANDARD",id:47408}},{feature_state_value:null,enabled:!0,feature:{name:"verify_seats_limit_for_invite_links",type:"STANDARD",id:47729}},{feature_state_value:"Displays the setting to control the `use_identity_composite_key_for_hashing` environment attribute",enabled:!0,feature:{name:"consistent_hashing_setting",type:"STANDARD",id:48378}},{feature_state_value:null,enabled:!1,feature:{name:"broken_feature",type:"STANDARD",id:49359}}],traits:void 0})},this.analyticsFlags=function(){t.api,t.evaluationEvent&&t.evaluationEvent[t.environmentID]},this.datadogRum=null,this.loadingState={isLoading:!0,isFetching:!0,error:null,source:l.NONE},this.canUseStorage=!1,this.analyticsInterval=null,this.api=null,this.cacheFlags=!1,this.ts=null,this.enableAnalytics=!1,this.enableLogs=!1,this.environmentID="",this.evaluationEvent=null,this.flags=null,this.getFlagInterval=null,this.headers=null,this.initialised=!1,this.oldFlags=null,this.onChange=null,this.onError=null,this.identity=null,this.ticks=null,this.timer=null,this.traits=null,this.dtrum=null,this.withTraits=null,this.cacheOptions={ttl:0,skipAPI:!1},this.evaluateFlag=function(e,a){if(t.datadogRum&&(t.datadogRum.client.addFeatureFlagEvaluation?(t.log("Sending feature flag evaluation to Datadog",e,a),"VALUE"===a?t.datadogRum.client.addFeatureFlagEvaluation(h+e,t.getValue(e,{},!0)):t.datadogRum.client.addFeatureFlagEvaluation(v+e,t.hasFeature(e,!0))):console.error("Flagsmith: Your datadog RUM client does not support the function addFeatureFlagEvaluation, please update it.")),t.enableAnalytics){if(!t.evaluationEvent)return;t.evaluationEvent[t.environmentID]||(t.evaluationEvent[t.environmentID]={}),void 0===t.evaluationEvent[t.environmentID][e]&&(t.evaluationEvent[t.environmentID][e]=0),t.evaluationEvent[t.environmentID][e]+=1}t.updateEventStorage()},this.getValue=function(e,a,n){var r=t.flags&&t.flags[e.toLowerCase().replace(/ /g,"_")],i=null;if(r&&(i=r.value),n||t.evaluateFlag(e,"VALUE"),null==a?void 0:a.json)try{return null===i?(t.log("Tried to parse null flag as JSON: "+e),a.fallback):JSON.parse(i)}catch(e){return a.fallback}return i},this.getTrait=function(e){return t.traits&&t.traits[e.toLowerCase().replace(/ /g,"_")]},this.getAllTraits=function(){return t.traits},this.setTrait=function(e,a){if(t.api){var n={};return n[e]=a,t.setTraits(n)}console.error(g("setTrait"))},this.setTraits=function(e){if(t.api){if(e&&"object"==typeof e||console.error("Expected object for flagsmith.setTraits"),t.withTraits=s(s({},t.withTraits||{}),e),t.identity)return t.initialised?t.getFlags():void 0;t.log("Set traits prior to identifying",t.withTraits)}else console.error(g("setTraits"))},this.hasFeature=function(e,a){var n=t.flags&&t.flags[e.toLowerCase().replace(/ /g,"_")],r=!1;return n&&n.enabled&&(r=!0),a||t.evaluateFlag(e,"ENABLED"),r},u=e.fetch?e.fetch:"undefined"!=typeof fetch?fetch:null===a.g||void 0===a.g?void 0:a.g.fetch,this.canUseStorage="undefined"!=typeof window||!!e.browserlessStorage,this.log("Constructing flagsmith instance "+e),e.eventSource&&e.eventSource,e.AsyncStorage&&(d=e.AsyncStorage)}return e.prototype.init=function(e){var t=this,a=e.environmentID,n=e.api,r=void 0===n?f:n,i=e.headers,o=e.onChange,c=e.cacheFlags,g=e.datadogRum,h=e.onError,v=e.defaultFlags,E=e.fetch,y=e.preventFetch,_=e.enableLogs,b=e.enableDynatrace,w=e.enableAnalytics;e.realtime,e.eventSourceUrl;var A=e.AsyncStorage,O=e.identity,S=e.traits,T=e.state,P=e.cacheOptions,N=e.angularHttpClient,I=e._trigger;return e._triggerLoadingStateChange,new Promise((function(e,n){var f;if(t.environmentID=a,t.api=r,t.headers=i,t.getFlagInterval=null,t.analyticsInterval=null,t.onChange=function(e,a,n){t.setLoadingState(n),o&&o(e,a,t.loadingState),t._trigger&&(t.log("trigger called"),t._trigger())},t._trigger=I||t._trigger,t.onError=h?function(e){e instanceof Error?h(e):h(new Error(e))}:null,t.identity=O,t.withTraits=S,t.enableLogs=_||!1,t.cacheOptions=P?{skipAPI:!!P.skipAPI,ttl:P.ttl||0}:t.cacheOptions,!t.cacheOptions.ttl&&t.cacheOptions.skipAPI&&console.warn("Flagsmith: you have set a cache ttl of 0 and are skipping API calls, this means the API will not be hit unless you clear local storage."),E&&(u=E),t.enableAnalytics=w||!1,t.flags=Object.assign({},v)||{},t.initialised=!0,t.ticks=1e4,Object.keys(t.flags).length&&(t.loadingState=s(s({},t.loadingState),{isLoading:!1,source:l.DEFAULT_FLAGS})),t.log("Initialising with properties",{environmentID:a,api:r,headers:i,onChange:o,cacheFlags:c,onError:h,defaultFlags:v,preventFetch:y,enableLogs:_,enableAnalytics:w,AsyncStorage:d,identity:O,traits:S,_trigger:I,state:T,angularHttpClient:N},t),t.timer=t.enableLogs?(new Date).valueOf():null,A&&(d=A),t.cacheFlags=void 0!==d&&!!c,t.setState(T),!a)throw n("Please specify a environment id"),"Please specify a environment id";g&&(t.datadogRum=g),b&&("undefined"==typeof dtrum?console.error("You have attempted to enable dynatrace but dtrum is undefined, please check you have the Dynatrace RUM JavaScript API installed."):t.dtrum=dtrum),N&&(u=function(e,t){var a=t.headers,n=t.method,r=t.body;return new Promise((function(t){switch(n){case"GET":return N.get(e,{headers:a}).subscribe((function(e){t({ok:!0,text:function(){return Promise.resolve(e)}})}));case"POST":case"PUT":return N.post(e,r,{headers:a}).subscribe((function(e){t({ok:!0,text:function(){return Promise.resolve(e)}})}))}}))}),d&&t.canUseStorage&&d.getItem(m).then((function(e){if(e)try{t.evaluationEvent=JSON.parse(e)}catch(e){t.evaluationEvent={}}else t.evaluationEvent={};return t.analyticsInterval=setInterval(t.analyticsFlags,t.ticks),!0})),t.enableAnalytics&&(t.analyticsInterval&&clearInterval(t.analyticsInterval),d&&t.canUseStorage&&d.getItem(m,(function(e,a){if(a){var n=JSON.parse(a);n[t.environmentID]&&(T=t.getState(),t.log("Retrieved events from cache",a),t.setState(s(s({},T),{evaluationEvent:n[t.environmentID]})))}return!0}))),c?d&&t.canUseStorage&&d.getItem(p,(function(a,r){var i,s;if(r)try{var o=JSON.parse(r),u=!1;if(o&&o.api===t.api&&o.environmentID===t.environmentID){var c=!0;t.identity&&o.identity!==t.identity&&(t.log("Ignoring cache,  identity has changed from "+o.identity+" to "+t.identity),c=!1),t.cacheOptions.ttl&&(!o.ts||(new Date).valueOf()-o.ts>t.cacheOptions.ttl)&&o.ts&&(t.log("Ignoring cache, timestamp is too old ts:"+o.ts+" ttl: "+t.cacheOptions.ttl+" time elapsed since cache: "+((new Date).valueOf()-o.ts)+"ms"),c=!1),c&&(u=!0,t.setState(o),t.log("Retrieved flags from cache",o))}if(t.flags){var d=!(y||t.cacheOptions.skipAPI&&u);null===(i=t.onChange)||void 0===i||i.call(t,null,{isFromServer:!1,flagsChanged:!0,traitsChanged:!!t.traits},t._loadedState(l.CACHE,d)),t.oldFlags=t.flags,e(!0),t.cacheOptions.skipAPI&&u&&t.log("Skipping API, using cache"),d&&t.getFlags()}else y?e(!0):t.getFlags(e,n)}catch(e){t.log("Exception fetching cached logs",e)}else y?(v&&(null===(s=t.onChange)||void 0===s||s.call(t,null,{isFromServer:!1,flagsChanged:!0,traitsChanged:!!t.traits},t._loadedState(l.DEFAULT_FLAGS))),e(!0)):t.getFlags(e,n);return!0})):y?(v&&(null===(f=t.onChange)||void 0===f||f.call(t,null,{isFromServer:!1,flagsChanged:!0,traitsChanged:!!t.traits},t._loadedState(l.CACHE))),e(!0)):t.getFlags(e,n)})).catch((function(e){t.log("Error during initialisation ",e),h&&h(e)}))},e.prototype._loadedState=function(e,t){return void 0===t&&(t=!1),{error:null,isFetching:t,isLoading:!1,source:e}},e.prototype.getAllFlags=function(){return this.flags},e.prototype.identify=function(e,t){return this.identity=e,this.log("Identify: "+this.identity),t&&(this.withTraits=s(s({},this.withTraits||{}),t)),this.initialised?this.getFlags():Promise.resolve()},e.prototype.getState=function(){return{api:this.api,environmentID:this.environmentID,flags:this.flags,identity:this.identity,ts:this.ts,traits:this.traits,evaluationEvent:this.evaluationEvent}},e.prototype.setState=function(e){e&&(this.initialised=!0,this.api=e.api||this.api||f,this.environmentID=e.environmentID||this.environmentID,this.flags=e.flags||this.flags,this.identity=e.identity||this.identity,this.traits=e.traits||this.traits,this.evaluationEvent=e.evaluationEvent||this.evaluationEvent,this.log("setState called",this))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enableLogs&&console.log.apply(this,o(["FLAGSMITH:",(new Date).valueOf()-(this.timer||0),"ms"],e,!0))},e.prototype.updateStorage=function(){if(this.cacheFlags){this.ts=(new Date).valueOf();var e=JSON.stringify(this.getState());this.log("Setting storage",e),d.setItem(p,e)}},e.prototype.updateEventStorage=function(){if(this.enableAnalytics){var e=JSON.stringify(this.getState().evaluationEvent);this.log("Setting event storage",e),d.setItem(m,e)}},e.prototype.setLoadingState=function(e){var t;c(e,this.loadingState)||(this.loadingState=s({},e),this.log("Loading state changed",e),null===(t=this._triggerLoadingState)||void 0===t||t.call(this))},e.prototype.logout=function(){return this.identity=null,this.traits=null,this.initialised?this.getFlags():Promise.resolve()},e.prototype.startListening=function(e){void 0===e&&(e=1e3),this.getFlagInterval&&clearInterval(this.getFlagInterval),this.getFlagInterval=setInterval(this.getFlags,e)},e.prototype.stopListening=function(){this.getFlagInterval&&(clearInterval(this.getFlagInterval),this.getFlagInterval=null)},e.prototype.getSegments=function(){},e}();function _(e){var t=e.fetch,a=e.AsyncStorage,n=e.eventSource;return new y({fetch:t,AsyncStorage:a,eventSource:n})}var b,w=function(e,t,a){var n="shortString",r=!0;"number"==typeof a&&(n="javaDouble",r=!1),e[n]=e[n]||{},e[n][t]=r?a+"":a},A=(b=function(e,t){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},b(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),O=function(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],n=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},S=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,i=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}return s},T=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,i=t.length;r<i;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},P=function(e){function t(){return e.call(this,"EventSource not available.\nConsider loading an EventSource polyfill and making it available globally as EventSource, or passing one in as eventSourceClass to the ReconnectingEventSource constructor.")||this}return A(t,e),t}(Error),N=function(){function e(e,t){var a=this;if(this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,this._configuration=null!=t?Object.assign({},t):void 0,this.withCredentials=!1,this._eventSource=null,this._lastEventId=null,this._timer=null,this._listeners={open:[],error:[],message:[]},this.url=e.toString(),this.readyState=this.CONNECTING,this.max_retry_time=3e3,this.eventSourceClass=globalThis.EventSource,null!=this._configuration&&(this._configuration.lastEventId&&(this._lastEventId=this._configuration.lastEventId,delete this._configuration.lastEventId),this._configuration.max_retry_time&&(this.max_retry_time=this._configuration.max_retry_time,delete this._configuration.max_retry_time),this._configuration.eventSourceClass&&(this.eventSourceClass=this._configuration.eventSourceClass,delete this._configuration.eventSourceClass)),null==this.eventSourceClass||"function"!=typeof this.eventSourceClass)throw new P;this._onevent_wrapped=function(e){a._onevent(e)},this._start()}return e.prototype.dispatchEvent=function(e){throw new Error("Method not implemented.")},e.prototype._start=function(){var e,t,a=this,n=this.url;this._lastEventId&&(-1===n.indexOf("?")?n+="?":n+="&",n+="lastEventId="+encodeURIComponent(this._lastEventId)),this._eventSource=new this.eventSourceClass(n,this._configuration),this._eventSource.onopen=function(e){a._onopen(e)},this._eventSource.onerror=function(e){a._onerror(e)},this._eventSource.onmessage=function(e){a.onmessage(e)};try{for(var r=O(Object.keys(this._listeners)),i=r.next();!i.done;i=r.next()){var s=i.value;this._eventSource.addEventListener(s,this._onevent_wrapped)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype._onopen=function(e){0===this.readyState&&(this.readyState=1,this.onopen(e))},e.prototype._onerror=function(e){var t=this;if(1===this.readyState&&(this.readyState=0,this.onerror(e)),this._eventSource&&2===this._eventSource.readyState){this._eventSource.close(),this._eventSource=null;var a=Math.round(this.max_retry_time*Math.random());this._timer=setTimeout((function(){return t._start()}),a)}},e.prototype._onevent=function(e){var t,a;e instanceof MessageEvent&&(this._lastEventId=e.lastEventId);var n=this._listeners[e.type];if(null!=n)try{for(var r=O(T([],S(n),!1)),i=r.next();!i.done;i=r.next())i.value.call(this,e)}catch(e){t={error:e}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(t)throw t.error}}"message"===e.type&&this.onmessage(e)},e.prototype.onopen=function(e){},e.prototype.onerror=function(e){},e.prototype.onmessage=function(e){},e.prototype.close=function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._eventSource&&(this._eventSource.close(),this._eventSource=null),this.readyState=2},e.prototype.addEventListener=function(e,t,a){null==this._listeners[e]&&(this._listeners[e]=[],null!=this._eventSource&&this._eventSource.addEventListener(e,this._onevent_wrapped));var n=this._listeners[e];n.includes(t)||(this._listeners[e]=T(T([],S(n),!1),[t],!1))},e.prototype.removeEventListener=function(e,t,a){var n=this._listeners[e];this._listeners[e]=n.filter((function(e){return e!==t}))},e}();globalThis.FlagsmithEventSource="undefined"!=typeof EventSource?EventSource:null;var I=function(e,t){return t=t||{},new Promise((function(a,n){var r=new XMLHttpRequest,i=[],s=[],o={},l=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:l,headers:{keys:function(){return i},entries:function(){return s},get:function(e){return o[e.toLowerCase()]},has:function(e){return e.toLowerCase()in o}}}};for(var u in r.open(t.method||"get",e,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,a){i.push(t=t.toLowerCase()),s.push([t,a]),o[t]=o[t]?o[t]+","+a:a})),a(l())},r.onerror=n,r.withCredentials="include"==t.credentials,t.headers)r.setRequestHeader(u,t.headers[u]);r.send(t.body||null)}))},j=_({AsyncStorage:i,fetch:I,eventSource:N});"undefined"!=typeof window&&(window.flagsmith=j),e.createFlagsmithInstance=function(){return _({AsyncStorage:i,fetch:I,eventSource:N})},e.default=j,Object.defineProperty(e,"__esModule",{value:!0})}(t)},7089:(e,t,a)=>{"use strict";var n=a(41669);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),s=a(94895),o=a(38654),l=b(a(36491)),u=b(a(96262)),c=b(a(77682)),d=b(a(56389)),p=b(a(83038)),m=b(a(76922)),f=b(a(52143)),g=b(a(91646)),h=a(69733),v=a(32799),E=a(54247),y=b(a(23186));function b(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(w=function(e){return e?a:t})(e)}function A(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const O=(r=class extends i.Component{constructor(e,t){super(e,t),A(this,"state",{asideIsVisible:!isMobile,pin:"",totalApiCalls:0}),A(this,"componentDidMount",(()=>{this.listenTo(g.default,"change",(()=>this.forceUpdate())),window.addEventListener("scroll",this.handleScroll)})),A(this,"toggleDarkMode",(()=>{const e=!Utils.getFlagsmithHasFeature("dark_mode");flagsmith.setTrait("dark_mode",e),e?document.body.classList.add("dark"):document.body.classList.remove("dark")})),A(this,"hideMobileNav",(()=>{this.mobileNav&&this.mobileNav.isActive()&&this.mobileNav.toggle()})),A(this,"toggleAside",(()=>{this.setState({asideIsVisible:!this.state.asideIsVisible})})),A(this,"onLogin",(()=>{(0,E.resolveAuthFlow)({isAuthenticated:!0});let e=API.getRedirect();const t=API.getReferrer();let a="";t&&(a=`?${Utils.toParam(t)}`),AccountStore.ephemeral_token?this.forceUpdate():(("/"===this.props.location.pathname||"/widget"===this.props.location.pathname||"/saml"===this.props.location.pathname||this.props.location.pathname.includes("/oauth")||"/login"===this.props.location.pathname||"/signup"===this.props.location.pathname)&&(e?(API.setRedirect(""),this.context.router.history.replace(e)):AsyncStorage.getItem("lastEnv").then((e=>{if(e){const t=JSON.parse(e),a=_.find(AccountStore.getUser().organisations,{id:t.orgId});if(!a)return void this.context.router.history.replace("/projects");const n=AccountStore.getOrganisation();return n&&n.id===a.id||(AppActions.selectOrganisation(a.id),AppActions.getOrganisation(a.id)),void this.context.router.history.replace(`/project/${t.projectId}/environment/${t.environmentId}/features`)}this.context.router.history.replace("/projects")}))),Utils.getFlagsmithHasFeature("dark_mode")&&document.body.classList.add("dark"))})),A(this,"handleScroll",(()=>{this.scrollPos<768&&n(document).scrollTop()>=768?this.setState({myClassName:"scrolled"}):this.scrollPos>=768&&n(document).scrollTop()<768&&this.setState({myClassName:""}),this.scrollPos=n(document).scrollTop()})),A(this,"onLogout",(()=>{(0,E.resolveAuthFlow)({isAuthenticated:!1}),document.location.href.includes("saml?")||(window.location.href="/apps")})),A(this,"renderTwoFactorPrompt",((e,t)=>i.default.createElement("div",{className:"col-md-6 push-md-3 mt-5"},i.default.createElement(c.default,{pin:this.state.pin,error:this.state.error,onSubmit:()=>{this.setState({error:!1}),t(this.state.pin,(()=>this.setState({error:!0})))},isLoading:e,onChange:e=>this.setState({pin:Utils.safeParseEventValue(e)})})))),A(this,"renderNavbar",((e,t,a,n,r,s)=>i.default.createElement("nav",{className:"navbar"},i.default.createElement(Row,{space:!0},i.default.createElement("div",{className:"navbar-left"},i.default.createElement("div",{className:"navbar-nav"},t&&!n&&this.renderAsideToggle(),!s&&this.renderLogo(r))),i.default.createElement(Row,{className:"navbar-right",style:{display:"none"}},e?this.renderUserNav(e):i.default.createElement("div",null)))))),A(this,"renderAsideToggle",(()=>i.default.createElement("div",{role:"button",className:"clickable toggle",onClick:this.toggleAside},i.default.createElement("span",{className:"icon ion-md-menu"})))),A(this,"renderLogo",(e=>i.default.createElement("a",{href:"#"},i.default.createElement("img",{title:"Feature Flag",height:25,src:e,className:"brand",alt:"Flagsmith logo"})))),A(this,"renderUserNav",(e=>i.default.createElement(i.default.Fragment,null,i.default.createElement("nav",{className:"my-2 my-md-0 hidden-xs-down"},i.default.createElement(f.default,{className:"nav-link cursor-pointer"})),i.default.createElement("div",{style:{marginRight:16,marginTop:0},className:"dark-mode"},i.default.createElement(Switch,{checked:Utils.getFlagsmithHasFeature("dark_mode"),onChange:this.toggleDarkMode,onMarkup:"Light",offMarkup:"Dark"})),i.default.createElement("div",{className:"org-nav"},i.default.createElement("a",{id:"logout-link",href:"#",onClick:AppActions.logout,className:"popover-bt__list-item"},i.default.createElement("img",{src:"/static/images/icons/aside/logout-dark.svg",className:"mr-2"}),"Logout"))))),A(this,"renderMainContent",((e,t,a,n,r,s,o,l,c)=>i.default.createElement("div",null,i.default.createElement("div",{className:t?"aside-body"+(a&&!n?"-full-width":""):""},!c&&(!t||!n||!a)&&this.renderNavbar(e,t,a,n,l,r),t&&i.default.createElement(u.default,{projectId:r,environmentId:s,toggleAside:this.toggleAside,asideIsVisible:n}),a&&t&&n?null:i.default.createElement("div",null,o?i.default.createElement("div",{className:"text-center"},i.default.createElement(Loader,null)):this.props.children))))),ES6Component(this)}componentDidUpdate(e){e.location.pathname!==this.props.location.pathname&&(isMobile&&this.setState({asideIsVisible:!1}),this.hideMobileNav())}render(){Utils.getFlagsmithHasFeature("dark_mode")&&!document.body.classList.contains("dark")&&document.body.classList.add("dark");let e=document.body.classList.contains("dark")?"/static/images/vizio-logo-white.svg":"/static/images/vizio-logo-black.svg";const t=this.props.location.pathname,a=this.state,n=a.asideIsVisible,r=(a.totalApiCalls,(0,s.matchPath)(t,{exact:!1,path:"/project/:projectId/environment/:environmentId",strict:!1})),o=(0,s.matchPath)(t,{exact:!1,path:"/project/:projectId",strict:!1}),u=_.get(r,"params.projectId")||_.get(o,"params.projectId"),c=_.get(r,"params.environmentId"),f=c||u,E="/"===t||"/login"===t||"/signup"===t||t.includes("/invite");if(Project.amplitude&&l.default.getInstance().init(Project.amplitude),AccountStore.getOrganisation()&&AccountStore.getOrganisation().block_access_to_admin)return i.default.createElement(p.default,null);if(Project.maintenance||this.props.error||!window.projectOverrides)return i.default.createElement(d.default,null);if(this.props.isLoading)return i.default.createElement(AccountProvider,{onNoUser:this.onNoUser,onLogout:this.onLogout,onLogin:this.onLogin},(()=>i.default.createElement("div",{id:"login-page"},i.default.createElement(m.default,null))));const y=!g.default.model&&document.location.href.includes("project/");return document.location.href.includes("widget")?i.default.createElement("div",null,this.props.children):i.default.createElement(h.Provider,{store:(0,v.getStore)()},i.default.createElement(AccountProvider,{onNoUser:this.onNoUser,onLogout:this.onLogout,onLogin:this.onLogin},(({isSaving:t,organisation:a,user:r},{twoFactorLogin:i})=>r&&r.twoFactorPrompt?this.renderTwoFactorPrompt(t,i):this.renderMainContent(r,f,isMobile,n,u,c,y,e,E))))}},A(r,"propTypes",{children:propTypes.element.isRequired}),A(r,"contextTypes",{router:propTypes.object.isRequired}),r);O.propTypes={history:RequiredObject,location:RequiredObject};t.default=(0,o.withRouter)((0,y.default)(O))},76922:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r.default.createElement("div",{style:{position:"absolute",textAlign:"center",top:"35%",width:"100%"}},r.default.createElement(Loader,null))};var n,r=(n=a(96540))&&n.__esModule?n:{default:n}},96262:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=S(a(5556)),s=S(a(19346)),o=S(a(32127)),l=S(a(80129)),u=S(a(87561)),c=(S(a(20429)),S(a(30634))),d=S(a(67008)),p=S(a(55708)),m=S(a(58713)),f=S(a(37906)),g=S(a(82840)),h=S(a(91646)),v=S(a(78874)),E=S(a(23186)),y=S(a(93328)),_=S(a(95596)),b=S(a(33738)),w=S(a(75431)),A=S(a(61778)),O=S(a(2398));function S(e){return e&&e.__esModule?e:{default:e}}function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}function P(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const N=(n=class extends r.Component{constructor(e,t){super(e,t),P(this,"toggleDarkMode",(e=>{this.setState({darkModeEnabled:e}),localStorage.setItem("darkmode",e),flagsmith.setTrait("dark_mode",e),e?document.body.classList.add("dark"):document.body.classList.remove("dark")})),P(this,"onProjectSave",(()=>{AppActions.refreshOrganisation()})),P(this,"newProject",(()=>{openModal("Create  Project",r.default.createElement(d.default,{onSave:({environmentId:e,projectId:t})=>{AppActions.getProject(t),this.context.router.history.push(`/project/${t}/environment/${e}/features?new=true`)}}))})),this.state={darkModeEnabled:"true"===localStorage.getItem("darkmode")?.toLowerCase()||!1},ES6Component(this),AppActions.getProject(this.props.projectId),this.props.environmentId&&"create"!==this.props.environmentId&&AppActions.getChangeRequests(this.props.environmentId,{}),this.listenTo(v.default,"change",(()=>this.forceUpdate())),this.listenTo(h.default,"loaded",(()=>{const e=h.default.getEnvironment(this.props.environmentId);e&&AppActions.getChangeRequests(this.props.environmentId,Utils.changeRequestsEnabled(e.minimum_change_request_approvals)?{}:{live_from_after:(new Date).toISOString()})}))}componentDidMount(){}componentDidUpdate(e){const t=h.default.getEnvironment(this.props.environmentId);this.props.projectId!==e.projectId&&AppActions.getProject(e.projectId),this.props.environmentId!==e.environmentId&&t&&AppActions.getChangeRequests(this.props.environmentId,Utils.changeRequestsEnabled(t.minimum_change_request_approvals)?{}:{live_from_after:(new Date).toISOString()})}setActiveProject(e,t){try{return!!t&&(AsyncStorage.setItem("lastEnv",JSON.stringify({environmentId:e.environments[0].api_key,orgId:AccountStore.getOrganisation().id,projectId:e.id,projectName:e.name})),!0)}catch(e){return console.error("Error in setActiveProject: ",e),!1}}render(){const e=this.props,t=e.asideIsVisible,a=e.toggleAside;AccountStore.getUser().first_name;let n=Utils.getFlagsmithValue("integrations")||"[]";n=JSON.parse(n);const i="create"!==this.props.environmentId&&this.props.environmentId||h.default.model&&h.default.model.environments[0]&&h.default.model.environments[0].api_key,d=h.default.getEnvironment(this.props.environmentId),E=Utils.getPlansPermission("AUDIT")||!Utils.getFlagsmithHasFeature("scaleup_audit");d&&Utils.changeRequestsEnabled(d.minimum_change_request_approvals)&&v.default.model[this.props.environmentId],d&&v.default.scheduled[this.props.environmentId];return r.default.createElement(OrganisationProvider,null,(()=>r.default.createElement(ProjectProvider,{id:this.props.projectId,onSave:this.onProjectSave},(({project:e})=>r.default.createElement("div",{className:`aside ${this.props.className||""}`,style:t?(isMobile,{}):{overflow:"hidden",width:0}},isMobile&&r.default.createElement("div",{role:"button",className:"clickable toggle",onClick:a},t?r.default.createElement("span",{className:"icon ion-md-close"}):r.default.createElement("span",{className:"icon ion-md-menu"})),r.default.createElement("div",{className:"row ml-0 mr-0 aside__wrapper"},r.default.createElement("div",{className:`aside__projects-sidebar ${this.props.className||""}`},r.default.createElement("div",{className:"flex-row justify-content-center"},r.default.createElement("div",{className:"flex-column"},r.default.createElement(Link,{to:"/projects"},r.default.createElement(p.default,{className:"aside__logo",srcImage:_.default}))),r.default.createElement(o.default,{renderRow:(e,t)=>r.default.createElement(l.default,{"data-test":`switch-project-${e.name.toLowerCase()}${this.props.projectId===`${e.id}`?"-active":""}`,active:this.setActiveProject.bind(this,e,this.props.projectId===`${e.id}`),key:e.id,onClick:t,className:this.props.projectId===`${e.id}`?"aside__project-btn active":"aside__project-btn",name:e.name,projectLetter:`${e.name[0]}`.toUpperCase()}),projectId:this.props.projectId,environmentId:i,clearableValue:!1,onChange:e=>{AppActions.getProject(e.id),e.environments[0]?this.context.router.history.push(`/project/${e.id}/environment/${e.environments[0].api_key}/features`):this.context.router.history.push(`/project/${e.id}/environment/create`),AsyncStorage.setItem("lastEnv",JSON.stringify({environmentId:e.environments[0].api_key,orgId:AccountStore.getOrganisation().id,projectId:e.id,projectName:e.name}))}}))),r.default.createElement("div",{className:"aside__main-content"},r.default.createElement("div",{className:"pl-2 pr-4 pt-3"},r.default.createElement(Row,{style:{alignItems:"flex-end"}},"watchfree"===e.name&&r.default.createElement("img",{src:b.default,className:"aside__project-detail-btn mr-2"}),"viziogram"===e.name&&r.default.createElement("img",{src:w.default,className:"aside__project-detail-btn mr-2"}),"home"===e.name&&r.default.createElement("img",{src:A.default,className:"aside__project-detail-btn mr-2"}),"avod"===e.name&&r.default.createElement("img",{src:O.default,className:"aside__project-detail-btn mr-2"}),r.default.createElement("h1",{className:"aside__project-title"},e&&e.name?e.name:"..."))),r.default.createElement("div",{className:"aside__environments-wrapper"},r.default.createElement(c.default,{renderRow:(t,a)=>r.default.createElement(y.default,{level:"environment",permission:Utils.getViewIdentitiesPermission(),id:t.api_key},(({isLoading:a,permission:n})=>r.default.createElement(y.default,{level:"environment",permission:"ADMIN",id:t.api_key},(({isLoading:i,permission:o})=>((e,t,a,n,i)=>a||i?r.default.createElement("div",{className:"text-center"},r.default.createElement(Loader,null)):r.default.createElement("div",{className:"aside__environment-nav list-unstyled mb-0"},r.default.createElement(s.default,{className:"aside__environment-list-item",id:"features-link",to:`/project/${t.id}/environment/${e.api_key}/features`},r.default.createElement(m.default,{className:"aside__environment-list-item--icon"}),"Features"),n&&r.default.createElement(s.default,{id:"users-link",className:"aside__environment-list-item",exact:!0,to:`/project/${t.id}/environment/${e.api_key}/users`},r.default.createElement(f.default,{className:"aside__environment-list-item--icon"}),"Vizio Devices")))(t,e,a,n,i))))),projectId:this.props.projectId,environmentId:i,clearableValue:!1,onChange:e=>{this.context.router.history.push(`/project/${this.props.projectId}/environment/${e}/features`),AsyncStorage.setItem("lastEnv",JSON.stringify({environmentId:e,orgId:AccountStore.getOrganisation().id,projectId:this.props.projectId}))}})),r.default.createElement(s.default,{to:`/project/${e.id}/environment/${i}/segments`,id:"segments-link",className:"aside__nav-item"},r.default.createElement(g.default,{className:"aside__nav-item--icon"}),"Segments"),r.default.createElement(y.default,{level:"project",permission:"VIEW_AUDIT_LOG",id:this.props.projectId},(({permission:e})=>e&&E&&r.default.createElement(s.default,{id:"audit-log-link",activeClassName:"active",className:"aside__nav-item",to:`/project/${this.props.projectId}/environment/${i}/audit-log`},r.default.createElement(u.default,{className:"aside__nav-item--icon"}),"Audit Log"))),!E&&r.default.createElement(Tooltip,{title:r.default.createElement("a",{href:"#",className:"aside__nav-item disabled"},r.default.createElement(u.default,{className:"aside__nav-item--icon"}),"Audit Log")},"This feature is available with our scaleup plan"),r.default.createElement("div",{className:"flex flex-1"}),r.default.createElement("div",{className:"align-self-end"},!1,r.default.createElement("div",{style:{paddingLeft:20,paddingRight:20,display:"flex",alignItems:"center",marginTop:0,marginBottom:10},className:"dark-mode"},r.default.createElement(Switch,{checked:this.state.darkModeEnabled,onChange:this.toggleDarkMode,onMarkup:"Light",offMarkup:"Dark"}),!1),void 0))))))))}},P(n,"displayName","Aside"),P(n,"contextTypes",{router:i.default.object.isRequired}),P(n,"propTypes",{asideIsVisible:i.default.bool,className:i.default.string,toggleAside:i.default.func}),n);e.exports=(0,E.default)(N)},80129:(e,t,a)=>{"use strict";var n,r=a(96540),i=d(a(72119)),s=d(a(33738)),o=d(a(75431)),l=d(a(61778)),u=d(a(2398)),c=d(a(65548));function d(e){return e&&e.__esModule?e:{default:e}}const p=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(n=class extends r.PureComponent{componentDidMount(){this.props.active()}render(){const e=i.default.truncateText(this.props.name,26),t=React.createElement("div",{className:"aside__projects-item clickable","data-test":this.props["data-test"],onClick:this.props.onClick},React.createElement("div",{className:"flex-row justify-content-center"},React.createElement("div",{className:"flex-column"},"watchfree"===this.props.name&&React.createElement("img",{src:s.default,className:this.props.className})||"viziogram"===this.props.name&&React.createElement("img",{src:o.default,className:this.props.className})||"home"===this.props.name&&React.createElement("img",{src:l.default,className:this.props.className})||"avod"===this.props.name&&React.createElement("img",{src:u.default,className:this.props.className})||"oobe"===this.props.name&&React.createElement("img",{src:c.default,className:this.props.className})||React.createElement(ButtonProject,{className:this.props.className},this.props.projectLetter)),React.createElement("div",{className:"flex-column"},React.createElement("p",{className:`aside__projects-item-title ${this.props.className}`},e))));return e===this.props.name?t:React.createElement(Tooltip,{title:t,place:"right"},this.props.name)}},"displayName","AsideProjectButton"),n);p.displayName="AsideProjectButton",e.exports=p},89847:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=c(a(95093)),i=c(a(73719)),s=a(11272),o=c(a(61509)),l=c(a(45809)),u=c(a(27704));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p.apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const g=[200,200,200];t.default=e=>{const t=m((0,n.useState)(1),2),a=t[0],c=t[1],d=(0,o.default)(i.default.fromParam().search,(()=>{c(1)})),f=d.search,h=d.searchInput,v=d.setSearchInput,E=m((0,n.useState)(e.environmentId),2),y=E[0],_=E[1];(0,n.useEffect)((()=>{y!==e.environmentId&&(_(e.environmentId),c(1))}),[e.environmentId,y]),(0,n.useEffect)((()=>{e.onSearchChange&&e.onSearchChange(f)}),[f]);const b=(0,n.useRef)(!1),w=(0,s.useGetProjectAuditLogsQuery)({id:e.projectId,params:{environments:y,page:a,page_size:e.pageSize,project:e.projectId,search:f}}),A=w.data,O=w.isError,S=w.isFetching;(0,n.useEffect)((()=>{e.onErrorChange?.(O)}),[]),A?.results&&(b.current=!0);const T=i.default.fromParam().env;return i.default.getPlansPermission("AUDIT")||!i.default.getFlagsmithHasFeature("scaleup_audit")?n.default.createElement(u.default,{id:"messages-list",title:"Log entries",isLoading:S,className:"no-pad",icon:"ion-md-browsers",items:A?.results,filter:T,search:h,onChange:e=>{v(i.default.safeParseEventValue(e))},paging:p({},A||{},{page:a,pageSize:e.pageSize}),nextPage:()=>{c(a+1)},prevPage:()=>{c(a-1)},goToPage:e=>{c(e)},filterRow:()=>!0,renderRow:({author:e,created_date:t,environment:a,log:i})=>n.default.createElement(Row,{className:"list-item py-2 audit__item",key:t},n.default.createElement("span",{style:{width:g[0]}},(0,r.default)(t).format("Do MMM YYYY HH:mma")),n.default.createElement("div",{style:{width:g[1]}},e?.first_name," ",e?.last_name),n.default.createElement(Flex,null,i)),header:n.default.createElement(Row,{className:"table-header"},n.default.createElement("span",{style:{width:g[0]}},"Date"),n.default.createElement("div",{style:{width:g[1]}},"User"),n.default.createElement(Flex,null,"Content")),renderFooter:()=>n.default.createElement(l.default,{className:"mt-4 ml-2",title:"Audit",json:A?.results}),renderNoResults:n.default.createElement(FormGroup,{className:"text-center"},"You have no log messages for your project.")}):n.default.createElement("div",null,n.default.createElement("div",{className:"text-center"},"To access this feature please upgrade your account to scaleup or higher."))}},83038:(e,t,a)=>{"use strict";var n,r=s(a(96540)),i=s(a(23186));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l=(n=class extends r.default.Component{constructor(e,t){super(e,t),o(this,"render",(()=>r.default.createElement("div",{className:"fullscreen-container maintenance fullscreen-container__grey justify-content-center"},r.default.createElement("div",{className:"col-md-6 mt-5",id:"sign-up"},r.default.createElement("h1",null,"Please get in touch"),"Your organisation has been disabled. Please get in touch so we can discuss enabling your account.",r.default.createElement(r.default.Fragment,null," ",r.default.createElement("a",{target:"_blank",href:"mailto:support@flagsmith.com",rel:"noreferrer"},"support@flagsmith.com"),"."))))),this.state={}}},o(n,"contextTypes",{router:propTypes.object.isRequired}),o(n,"displayName","HomePage"),n);e.exports=(0,i.default)(l)},17830:(e,t,a)=>{"use strict";var n,r=a(96540);const i=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(n=class extends r.PureComponent{render(){return React.createElement("div",{className:`panel-card panel panel-default ${this.props.className||""}`},React.createElement("div",{className:"panel-content"},this.props.children))}},"displayName","Card"),n);i.displayName="Card",i.propTypes={children:OptionalNode,icon:OptionalString,title:oneOfType([OptionalObject,OptionalString])},e.exports=i},43686:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=o(a(3885)),i=o(a(73719)),s=a(2543);function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=({onChange:e,placeholder:t,value:a})=>{const o=u((0,n.useState)(""),2),l=o[0],c=o[1];return n.default.createElement(r.default,{fullWidth:!0,placeholder:t,blurBehavior:"add",onChangeCapture:t=>{const n=i.default.safeParseEventValue(t),r=a||[];if(-1!==n.search(/[ ,]/)){const t=(0,s.filter)(n.split(/[ ,;]/),(e=>" "!==e&&","!==e&&";"!==e&&""!==e));c(""),e(r.concat(t))}else c(n)},value:a,inputValue:l,onDelete:(t,n)=>{const r=a||[];e(i.default.removeElementFromArray(r,n))},onBeforeAdd:t=>(t&&e((a||[]).concat([t])),c(""),!0),onChange:e})}},63790:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=d(a(27456)),s=d(a(12564)),o=d(a(71906)),l=d(a(23186)),u=d(a(12339)),c=a(53348);function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}function f(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=(n=class extends r.Component{constructor(e,t){super(e,t),f(this,"copy",(e=>{const t=c.Clipboard.setString(e);toast(t?"Clipboard set":"Could not set clipboard :(")})),this.state={visible:this.props.showInitially||this.props.hideHeader}}render(){const e=this.props.hideHeader,t=this.state.language||flagsmith.getTrait("preferred_language")||Object.keys(this.props.snippets)[0],a=t?Math.max(Object.keys(this.props.snippets).indexOf(t),0):0;return r.default.createElement("div",null,!e&&r.default.createElement("div",{style:{cursor:"pointer"},onClick:()=>{this.setState({visible:!this.state.visible})}},r.default.createElement(Row,null,r.default.createElement(Flex,{style:isMobile?{overflowX:"scroll"}:{}},r.default.createElement("div",null,r.default.createElement("pre",{className:"hljs-header"},r.default.createElement("span",{className:"ion-ios-code"})," Code example:"," ",r.default.createElement("span",{className:"hljs-description"},this.props.title," "),r.default.createElement("span",{className:this.state.visible?"icon ion-ios-arrow-down":"icon ion-ios-arrow-forward"})))))),this.state.visible&&r.default.createElement(r.default.Fragment,null,this.props.subtitle&&r.default.createElement("div",{className:"mb-2"},this.props.subtitle),r.default.createElement("div",{className:"code-help"},r.default.createElement(Select,{"data-test":"select-segment",placeholder:"Select a language",value:{label:t},onChange:e=>{const t=e.label;this.setState({language:t}),flagsmith.setTrait("preferred_language",t),this.setState({tab:a})},options:_.sortBy(Object.keys(this.props.snippets),(e=>e[0].toLowerCase())).map(((e,t)=>({label:e,value:t}))),styles:{control:e=>m({},e,{"&:hover":{borderColor:"$bt-brand-secondary"},alignSelf:"flex-end",border:"1px solid $bt-brand-secondary",width:200})}}),r.default.createElement(i.default,{value:a},_.map(this.props.snippets,((e,t)=>{const a=(e=>{switch(e){case".NET":return"https://docs.flagsmith.com/clients/dotnet/";case"Flutter":return"https://docs.flagsmith.com/clients/flutter/";case"Go":return"https://docs.flagsmith.com/clients/go/";case"Java":return"https://docs.flagsmith.com/clients/java/";case"JavaScript":return"https://docs.flagsmith.com/clients/javascript/";case"Node JS":return"https://docs.flagsmith.com/clients/node/";case"PHP":return"https://docs.flagsmith.com/clients/php/";case"Python":return"https://docs.flagsmith.com/clients/python/";case"REST":return null;case"React":case"React Native":return"https://docs.flagsmith.com/clients/react";case"Ruby":return"https://docs.flagsmith.com/clients/ruby/";case"Rust":return"https://docs.flagsmith.com/clients/rust/";case"iOS":return"https://docs.flagsmith.com/clients/ios/";case"Next.js":return"https://docs.flagsmith.com/clients/next-ssr";default:return"https://docs.flagsmith.com"}})(t),n=(e=>{switch(e){case".NET":return"https://github.com/flagsmith/flagsmith-dotnet-client/";case"Flutter":return"https://github.com/flagsmith/flagsmith-flutter-client/";case"Go":return"https://github.com/flagsmith/flagsmith-go-client/";case"Java":return"https://github.com/flagsmith/flagsmith-java-client/";case"JavaScript":case"React Native":case"React":case"Next.js":return"https://github.com/flagsmith/flagsmith-js-client/";case"Node JS":return"https://github.com/flagsmith/flagsmith-nodejs-client/";case"PHP":return"https://github.com/flagsmith/flagsmith-php-client/";case"Python":return"https://github.com/flagsmith/flagsmith-python-client/";case"REST":return"https://docs.flagsmith.com/clients/rest/";case"Ruby":return"https://github.com/flagsmith/flagsmith-ruby-client/";case"Rust":return"https://github.com/flagsmith/flagsmith-rust-client/";case"iOS":return"https://github.com/flagsmith/flagsmith-ios-client/";default:return"https://docs.flagsmith.com"}})(t);return r.default.createElement(s.default,{key:t,tabLabel:t},r.default.createElement("div",{className:"hljs-container mb-2"},r.default.createElement(o.default,{forceExpanded:!0,preventEscape:!0,className:u.default.codeHelp.keys[t]},e),r.default.createElement(Button,{onClick:()=>this.copy(e),className:"btn btn-primary hljs-copy"},"Copy Code"),r.default.createElement(Row,{className:"hljs-docs"},a&&r.default.createElement("a",{target:"_blank",href:a,className:"btn btn--docs",rel:"noreferrer"},r.default.createElement("span",{className:"icon ion ion-ios-document"})," ",t," Docs"),n&&r.default.createElement("a",{target:"_blank",href:n,className:"btn btn--docs",rel:"noreferrer"},r.default.createElement("span",{className:"icon ion ion-logo-github"})," ",t," GitHub"))))}))))))}},f(n,"displayName","CodeHelp"),n);g.propTypes={},e.exports=(0,l.default)(g)},30634:(e,t,a)=>{"use strict";var n,r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),s=(n=a(23186))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}const l=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(r=class extends i.Component{constructor(e,t){super(e,t),this.state={}}render(){return i.default.createElement(ProjectProvider,{id:this.props.projectId},(({isLoading:e,project:t})=>i.default.createElement("div",{className:"fade "+(e?"":"in")},!e&&i.default.createElement("ul",{id:"env-list",className:"project-list list-unstyled"},t&&t.environments&&t.environments.map((e=>"development"===e.name.toLowerCase()?this.props.renderRow(e,(()=>{this.props.environmentId!==e.api_key&&this.props.onChange&&this.props.onChange(e.api_key)})):null))))))}},"displayName","EnvironmentSelect"),r);l.propTypes={},e.exports=(0,s.default)(l)},78605:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}(a(96540));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}class i extends n.PureComponent{render(){return this.props.error?n.default.createElement("div",{className:"alert alert-danger"},"object"==typeof this.props.error?Object.keys(this.props.error).map((e=>`${e}: ${this.props.error[e]}`)).join("\n"):this.props.error):null}}t.default=i,function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(i,"displayName","ErrorMessage")},47292:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=c(a(32485)),i=c(a(44386)),s=c(a(12339)),o=c(a(46555)),l=c(a(53938)),u=c(a(78605));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends n.PureComponent{constructor(e){super(e),p(this,"removeVariation",((e,t)=>{this.props.multivariate_options[e].id?openConfirm("Please confirm","This will remove the variation on your feature for all environments, if you wish to turn it off just for this environment you can set the % value to 0.",(()=>{this.props.removeVariation(e,t)})):this.props.removeVariation(e,t)})),this.state={historyModalOpen:!1,search:"",valid:!0}}render(){const e=this.props,t=e.archieved_multivariate_options,a=e.checked,c=e.duplicateVariation,d=e.environmentFlag,p=e.environmentVariations,m=e.error,f=e.hide_from_client,g=e.identity,h=e.isEdit,v=e.multivariate_options,E=e.multivariateErrors,y=e.onCheckedChange,_=e.onValueChange,b=e.projectFlag,w=e.readOnly,A=e.value,O=h?"Enabled":"Enabled by default",S=f,T=Utils.calculateControl(v),P=g?"User override":v&&v.length?`Control Value - ${T}%`:"Value *",N=!(g&&v&&v.length);return n.default.createElement("div",null,n.default.createElement(FormGroup,{className:"mb-4 mr-3 ml-3"},n.default.createElement("div",null,n.default.createElement("label",null,O||"Enabled")),n.default.createElement(Switch,{"data-test":"toggle-feature-button",defaultChecked:a,disabled:S||w,checked:!S&&a,onChange:y})),N&&n.default.createElement(FormGroup,{className:"mx-3 mb-4 mr-3"},n.default.createElement(InputGroup,{component:n.default.createElement(i.default,{"data-test":"featureValue",name:"featureValue",className:(0,r.default)({"full-width":!0,"variation-value-invalid":!this.state.valid}),value:`${null==A?"":A}`,onChange:e=>{!g&&v&&v.length&&this.setState({valid:Utils.safeParseEventValue(e)?.length}),_(e)},disabled:f||w||!!v.length&&h,placeholder:"e.g. 'big' "}),tooltip:s.default.strings.REMOTE_CONFIG_DESCRIPTION,title:`${P}`})),!!m&&n.default.createElement("div",{className:"mx-2 mt-2"},n.default.createElement(u.default,{error:m})),E.map(((e,t)=>n.default.createElement("div",{className:"mx-3 mt-2",key:t},n.default.createElement("div",{className:"alert alert-danger"},e)))),!!g&&n.default.createElement("div",null,n.default.createElement(FormGroup,{className:"mb-4 mx-3"},n.default.createElement(o.default,{disabled:!0,select:!0,controlValue:d.feature_state_value,variationOverrides:this.props.identityVariations,setVariations:this.props.onChangeIdentityVariations,updateVariation:()=>{},weightTitle:"Override Weight %",projectFlag:b,multivariateOptions:b.multivariate_options,removeVariation:()=>{},duplicateVariation:()=>{},isEdit:h}))),!g&&n.default.createElement("div",null,n.default.createElement(FormGroup,{className:"ml-3 mb-4 mr-3"},(!!p||!h)&&n.default.createElement(o.default,{isEdit:h,disabled:!!g||w,controlValue:T,variationOverrides:p,updateVariation:this.props.updateVariation,weightTitle:h?"Weight %":"Default Weight %",multivariateOptions:v,duplicateVariation:c,removeVariation:this.removeVariation})),h&&!g&&n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"ml-3 mb-2"},n.default.createElement(Button,{disabled:0===t.length,"data-toggle":"collapse","data-target":"#collapseExample","aria-expanded":"false","aria-controls":"collapseExample"},"Show Archived")),n.default.createElement("div",{className:"collapse mx-3",id:"collapseExample"},n.default.createElement("div",{className:"card card-body"},n.default.createElement(PanelSearch,{className:"no-pad",id:"feature-variation-archived-list",title:"Variation archived list",itemHeight:65,search:null,items:t,header:n.default.createElement(Row,{className:"table-header archived-list-grid"},n.default.createElement("div",{className:"text-center"},"ID"),n.default.createElement("div",{className:"text-center"},"Name"),n.default.createElement(Flex,{className:"text-center"},"Value"),n.default.createElement(Flex,{className:"text-right"})),renderRow:(e,t)=>n.default.createElement(Row,{className:"py-2 px-3 archived-list-grid "},n.default.createElement("span",{className:"text-center"},e.custom_id),n.default.createElement("div",{className:"text-center ml-1"},e.name),n.default.createElement("span",{className:"text-center"},n.default.createElement(FeatureValue,{value:Utils.featureStateToValue(e),"data-test":`feature-value-${this.props.index}`})),n.default.createElement("div",{className:"flex ml-auto"},n.default.createElement(Button,{onClick:()=>this.props.restoreVariation(e,t)},"Restore"))),filterRow:()=>!0})))),!this.props.hideAddVariation&&Utils.renderWithPermission(this.props.canCreateFeature,s.default.projectPermissions("Create Feature"),n.default.createElement(l.default,{disabled:!this.props.canCreateFeature||w,onClick:()=>this.props.addVariation()}))))}}t.default=m,p(m,"displayName","Feature")},90790:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=g(a(96814)),i=g(a(7175)),s=g(a(93655)),o=g(a(45595)),l=g(a(26851)),u=g(a(91646)),c=g(a(93328)),d=g(a(12339)),p=a(82254),m=g(a(82840)),f=g(a(37906));function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},v.apply(this,arguments)}function E(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class y extends n.Component{constructor(...e){super(...e),E(this,"state",{}),E(this,"confirmToggle",((e,t,a)=>{openModal("Toggle Feature",n.default.createElement(s.default,{environmentId:this.props.environmentId,projectFlag:e,environmentFlag:t,cb:a}))})),E(this,"confirmRemove",((e,t)=>{openModal("Remove Feature",n.default.createElement(o.default,{environmentId:this.props.environmentId,projectFlag:e,projectName:this.state.projectName,cb:t}))})),E(this,"editFeature",((e,t,a)=>{API.trackEvent(d.default.events.VIEW_FEATURE),history.replaceState({},null,`${document.location.pathname}?feature=${e.id}${a?`&tab=${a}`:""}`),openModal(`${this.props.permission?"Edit Feature":"Feature"}: ${e.name}`,n.default.createElement(l.default,{isEdit:!0,router:this.context.router,environmentId:this.props.environmentId,projectId:this.props.projectId,projectFlag:e,noPermissions:!this.props.permission,environmentFlag:t,flagId:t.id}),null,{className:"side-modal fade create-feature-modal",onClose:()=>{history.replaceState({},null,`${document.location.pathname}`)}})})),E(this,"renderFeatureTags",(e=>n.default.createElement(n.default.Fragment,null,e.owners&&e.owners.length?n.default.createElement(Tooltip,{title:n.default.createElement(ButtonLink,null,n.default.createElement("span",{className:"ion ion-md-person pr-2"})),place:"right"},`Flag assigned to ${e.owners.map((e=>`${e.first_name} ${e.last_name}`)).join(", ")}`):n.default.createElement("span",null),!!e.num_segment_overrides&&n.default.createElement(Tooltip,{title:n.default.createElement("span",{className:"chip ml-1 chip--sm bg-primary text-white"},n.default.createElement(m.default,{className:"chip-svg-icon"}),n.default.createElement("span",null,e.num_segment_overrides)),place:"top"},`${e.num_segment_overrides} Segment Override${1!==e.num_segment_overrides?"s":""}`),!!e.num_identity_overrides&&n.default.createElement(Tooltip,{title:n.default.createElement("span",{className:"chip ml-1 chip--sm bg-primary text-white"},n.default.createElement(f.default,{className:"chip-svg-icon"}),n.default.createElement("span",null,e.num_identity_overrides)),place:"top"},`${e.num_identity_overrides} Identity Override${1!==e.num_identity_overrides?"s":""}`)))),E(this,"renderAuditLog",((e,t,a,r)=>"ADMIN"===AccountStore.getOrganisationRole()&&!this.props.hideAudit&&n.default.createElement(Tooltip,{html:!0,title:n.default.createElement("button",{onClick:()=>{this.context.router.history.push(`/project/${e}/environment/${t}/audit-log?env=${a.id}&search=${r.name}`)},className:"btn btn--with-icon","data-test":`feature-history-${this.props.index}`},n.default.createElement(i.default,null))},"Feature history"))),E(this,"renderRemoveFeatureButton",((e,t,a,r,i,s)=>!this.props.hideRemove&&n.default.createElement(c.default,{level:"project",permission:"DELETE_FEATURE",id:i},(({permission:a})=>Utils.renderWithPermission(a,d.default.projectPermissions("Admin"),n.default.createElement(Column,null,n.default.createElement(Tooltip,{html:!0,title:n.default.createElement("button",{disabled:!a||r||t,onClick:()=>this.confirmRemove(e,(()=>{s(i,e)})),className:"btn btn--with-icon","data-test":`remove-feature-btn-${this.props.index}`},n.default.createElement(RemoveIcon,null))},t?"<span>This feature has been tagged as <bold>protected</bold>, <bold>permanent</bold>, <bold>do not delete</bold>, or <bold>read only</bold>. Please remove the tag before attempting to delete this flag.</span>":"Remove feature")))))))}componentDidMount(){const e=this.props,t=e.environmentFlags,a=e.projectFlag,n=Utils.fromParam(),r=n.feature,i=n.tab,s=a.id;`${s}`===r&&void 0!==t[s]&&this.editFeature(a,t[s],i);try{AsyncStorage.getItem("lastEnv").then((e=>{if(e){const t=JSON.parse(e);this.setState({projectName:t.projectName})}}))}catch(e){console.error(e)}}render(){const e=this.props,t=e.environmentFlags,a=e.environmentId,i=e.permission,s=e.projectFlag,o=e.projectFlags,l=e.projectId,c=e.toggleFlag,m=e.removeFlag,f=s.created_date,g=s.description,h=s.id,E=s.name,y=this.props.readOnly||Utils.getFlagsmithHasFeature("read_only_mode"),b=(0,p.hasProtectedTag)(s,l),w=u.default.getEnvironment(a),A=Utils.changeRequestsEnabled(w&&w.minimum_change_request_approvals),O=(e,t)=>{A?this.editFeature(s,t):this.confirmToggle(s,t,(t=>{c(_.findIndex(o,{id:e}),t)}))},S=(e,t)=>n.default.createElement(Switch,{disabled:!i||y,"data-test":`feature-switch-${this.props.index}${t&&t.enabled?"-on":"-off"}`,checked:t&&t.enabled,onChange:()=>O(e,t)}),T=(e,t)=>n.default.createElement(FeatureValue,{onClick:()=>i&&!y&&this.editFeature(s,t),value:t&&t.feature_state_value,"data-test":`feature-value-${this.props.index}`});return this.props.condensed?Utils.renderWithPermission(i,d.default.environmentPermissions("Write"),n.default.createElement(Row,{onClick:()=>!y&&this.editFeature(s,t[h]),style:v({flexDirection:this.props.isCompareEnv?"column":"row",overflow:"hidden"},this.props.style||{})},n.default.createElement("div",{className:`mr-2 ${this.props.fadeEnabled&&"faded"}`},S(h,t[h])),n.default.createElement("div",{className:`mr-2 clickable ${this.props.fadeValue&&"faded"}`,style:this.props.isCompareEnv&&{marginTop:"5px"}},T(0,t[h])))):Utils.renderWithPermission(i,d.default.environmentPermissions("Write"),n.default.createElement(Row,{style:{flexWrap:"nowrap"},className:`list-item ${y?"":"clickable"} ${this.props.widget?"py-1":"py-2"}`,key:h,space:!0,"data-test":`feature-item-${this.props.index}`},n.default.createElement("div",{className:"flex flex-1",onClick:()=>!y&&this.editFeature(s,t[h])},n.default.createElement("div",null,n.default.createElement(Row,null,n.default.createElement(ButtonLink,{className:"mr-2 "+(y?"cursor-default":"")},E),this.renderFeatureTags(s),n.default.createElement(r.default,{projectId:`${l}`,value:s.tags})),n.default.createElement("span",{className:"text-small text-muted"},"Created ",moment(f).format("Do MMM YYYY HH:mma")," - ",g||"No description"))),n.default.createElement(Row,null,n.default.createElement(Row,{style:{marginBottom:5,marginRight:15,marginTop:5}},n.default.createElement(Column,null,T(0,t[h])),n.default.createElement(Column,null,S(h,t[h]))),this.renderAuditLog(l,a,w,s),this.renderRemoveFeatureButton(s,b,i,y,l,m))))}}E(y,"propTypes",{environmentId:propTypes.string.isRequired,projectFlag:propTypes.object.isRequired,environmentFlags:propTypes.object.isRequired,projectId:propTypes.string.isRequired,permission:propTypes.bool.isRequired,toggleFlag:propTypes.func.isRequired,removeFlag:propTypes.func.isRequired,hideRemove:propTypes.bool,hideAudit:propTypes.bool,condensed:propTypes.bool,isCompareEnv:propTypes.bool,fadeEnabled:propTypes.bool,fadeValue:propTypes.bool,widget:propTypes.bool,readOnly:propTypes.bool}),E(y,"contextTypes",{router:propTypes.object.isRequired});t.default=y},6291:(e,t,a)=>{"use strict";var n,r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),s=(n=a(72119))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}const l=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(r=class extends i.Component{constructor(e,t){super(e,t),this.state={}}render(){if(null===this.props.value||void 0===this.props.value)return null;const e=typeof this.props.value;return"string"!==e||""!==this.props.value||this.props.includeEmpty?i.default.createElement("span",{className:`feature-value-container ${e} ${this.props.className||""}`,onClick:this.props.onClick,"data-test":this.props["data-test"]},"string"==e&&i.default.createElement("span",{className:"quot"},'"'),i.default.createElement("span",{className:"feature-value"},s.default.truncateText(`${this.props.value}`,20)),"string"==e&&i.default.createElement("span",{className:"quot"},'"')):null}},"displayName","FeatureValue"),r);l.propTypes={},e.exports=l},51102:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=o(a(98606)),i=o(a(20863)),s=o(a(23186));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends n.Component{constructor(...e){super(...e),u(this,"state",{}),u(this,"getData",(()=>{r.default.get(`${Project.api}projects/${this.props.projectId}/features/${this.props.id}/`).then((e=>{const t=(e.owners||[]).map((e=>e.id));this.setState({owners:t})}))})),u(this,"addOwner",(e=>{this.setState({owners:(this.state.owners||[]).concat(e)}),r.default.post(`${Project.api}projects/${this.props.projectId}/features/${this.props.id}/add-owners/`,{user_ids:[e]})})),u(this,"removeOwner",(e=>{this.setState({owners:(this.state.owners||[]).filter((t=>t!==e))}),r.default.post(`${Project.api}projects/${this.props.projectId}/features/${this.props.id}/remove-owners/`,{user_ids:[e]})})),u(this,"getOwners",((e,t)=>e?e.filter((e=>t.includes(e.id))):[]))}componentDidMount(){this.getData()}render(){const e=Utils.getPlansPermission("FLAG_OWNERS");return n.default.createElement(OrganisationProvider,null,(({users:t})=>{const a=this.getOwners(t,this.state.owners||[]),r=n.default.createElement("div",null,n.default.createElement(Row,{className:"clickable",onClick:()=>{e&&this.setState({showUsers:!0})}},n.default.createElement("label",{className:"cols-sm-2 control-label"},"Assignees"),n.default.createElement("span",{style:{marginBottom:"0.5rem"},className:"icon ml-5 ion-md-cog icon-primary"})),n.default.createElement(Row,null,e&&a.map((e=>n.default.createElement(Row,{key:e.id,onClick:()=>this.removeOwner(e.id),className:"chip chip--active"},n.default.createElement("span",{className:"font-weight-bold"},e.first_name," ",e.last_name),n.default.createElement("span",{className:"chip-icon ion ion-ios-close"})))),!a.length&&n.default.createElement("div",null,"This flag has no assignees")),n.default.createElement(i.default,{users:t,value:this.state.owners,onAdd:this.addOwner,onRemove:this.removeOwner,isOpen:this.state.showUsers,onToggle:()=>this.setState({showUsers:!this.state.showUsers})}));return e?r:n.default.createElement("div",null,r,"The add flag assignees feature is available with our"," ",n.default.createElement("strong",null,"Scale-up")," plan.")}))}}t.default=(0,s.default)(c)},77021:(e,t,a)=>{"use strict";var n,r=(n=a(98606))&&n.__esModule?n:{default:n};function i(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const s=class extends React.Component{constructor(e,t){super(e,t),i(this,"handleSubmit",(e=>{e.preventDefault();const t=this.state.email;Utils.isValidEmail(t)&&r.default.post(`${Project.api}auth/users/reset_password/`,{email:t}).then((()=>{this.props.onComplete&&this.props.onComplete(),closeModal()})).catch((e=>{this.setState({error:e})}))})),this.state={email:e.initialValue}}componentDidMount(){setTimeout((()=>{const e=document.querySelector('input[name="forgotPasswordEmail"]');e&&e.focus()}),1e3)}render(){return React.createElement("div",null,React.createElement("p",null,"Please enter your email address"),React.createElement("form",{onSubmit:this.handleSubmit},React.createElement(InputGroup,{inputProps:{className:"full-width mb-2",name:"forgotPasswordEmail"},title:"Email Address",placeholder:"email",type:"email",value:this.state.email,onChange:e=>this.setState({email:Utils.safeParseEventValue(e)})}),this.state.error&&React.createElement("div",{className:"alert alert-danger"},this.state.error),React.createElement(Button,{disabled:!Utils.isValidEmail(this.state.email),onClick:this.handleSubmit},"Send")))}};e.exports=s},4239:(e,t,a)=>{"use strict";var n,r=(n=a(96540))&&n.__esModule?n:{default:n},i=a(72306);e.exports=({onSuccess:e})=>{const t=(0,i.useGoogleLogin)({onSuccess:t=>{e(t)}});return r.default.createElement("a",{key:"google",className:"btn btn__oauth btn__oauth--google",onClick:t},r.default.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("title",null,"Google icon"),r.default.createElement("path",{fill:"#fff",d:"M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z"}))," ","Google")}},44117:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=(n=a(10408))&&n.__esModule?n:{default:n};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=({disabled:e,groups:t,isOpen:a,onAdd:n,onRemove:s,onToggle:l,selectedGroups:u})=>{const c=o((0,r.useState)(""),2),d=c[0],p=c[1],m=t&&t.filter((e=>{const t=d.toLowerCase();return!t||`${e.name}`.toLowerCase().includes(t)}));return r.default.createElement(i.default,{title:"Groups",isOpen:a,onClose:l,className:"inline-modal--tags"},r.default.createElement(Input,{disabled:e,value:d,onChange:e=>p(Utils.safeParseEventValue(e)),className:"full-width mb-2",placeholder:"Type or choose a Group"}),r.default.createElement("div",{style:{maxHeight:200,overflowY:"auto"}},m&&m.map((e=>r.default.createElement("div",{className:"list-item clickable",key:e.id},r.default.createElement(Row,{onClick:()=>{const t=u.includes(e.id);t&&s?s(e.id,!1):!t&&n&&n(e.id,!1)},space:!0},r.default.createElement(Flex,{className:u.includes(e.id)?"font-weight-bold":""},e.name),u.includes(e.id)&&r.default.createElement("span",{style:{fontSize:24},className:"ion `text-primary` ion-ios-checkmark"})))))))}},52143:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(96540)),r=i(a(59877));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let o;class l extends n.default.Component{constructor(...e){super(...e),s(this,"state",{ready:!1})}componentDidMount(){try{Project.headway&&(o||(o=Utils.loadScriptPromise("https://cdn.headwayapp.co/widget.js")),o.then((()=>{this.setState({ready:!0},(()=>{Headway.init({account:Project.headway,enabled:!0,selector:"#headway"})}))})))}catch(e){}}render(){return Project.headway&&this.state.ready?n.default.createElement(Row,{className:this.props.className},n.default.createElement(Row,{onClick:()=>{Headway.show()}},n.default.createElement(r.default,null),"Updates"),n.default.createElement("span",{id:"headway"})):null}}t.default=l},71906:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function s(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}"undefined"!=typeof hljs&&hljs.initHighlightingOnLoad();const o={__html:"Enter a value..."},l={__html:" "};class u extends r.default.Component{constructor(e){super(e),s(this,"state",{value:{__html:this.props.children}}),s(this,"highlightCode",(()=>{const e=this.el.querySelectorAll("pre code");if(e[0]&&e[0].innerHTML&&e[0].innerHTML.match(/[<>]/))return this.state.focus||(e[0].innerHTML=e[0].innerText),void setTimeout((()=>{this.highlightCode()}),100);if("undefined"!=typeof hljs)for(let t=0;t<e.length;t++)hljs.highlightBlock(e[t])})),s(this,"_handleInput",(e=>{const t=e.target.innerText;this.setState({value:{__html:t}},(()=>{e.persist(),this.props.onChange(t)}))})),s(this,"onFocus",(()=>{this.setState({focus:!0})})),s(this,"onBlur",(()=>{this.setState({focus:!1})})),s(this,"toggleExpand",(()=>{this.setState({expanded:!this.state.expanded})})),this.setEl=this.setEl.bind(this)}componentDidMount(){this.highlightCode()}componentDidUpdate(e){this.highlightCode(),this.props.className!==e.className&&setTimeout((()=>{this.highlightCode()}),100),this.state.prevValue!==this.props.children&&this.setState({key:Date.now(),value:i({},this.state.value,{__html:this.props.children})})}setEl(e){this.el=e,this.measure=e=>{if(this.props.forceExpanded)return;if(!this.el)return;const t=this.el.clientHeight;!this.state.expandable&&t>110&&this.setState({expandable:!0,expanded:!1}),("boolean"!=typeof this.state.expandable||e)&&(t>110?this.setState({expandable:!0,expanded:!1}):t?this.setState({expandable:!1}):setTimeout((()=>{this.measure()}),50))},this.measure()}shouldComponentUpdate(e,t){return t.focus!==this.state.focus||(e.className!==this.props.className||(t.expandable!==this.state.expandable||(t.expanded!==this.state.expanded||(e["data-test"]!==this.props["data-test"]||this.state.value.__html!==`${e.children}`))))}render(){const e=this.props,t=e.children,a=e.className,n=e.disabled,i=e.element,s=e.innerHTML,o={className:a,ref:this.setEl};if(s)return this.renderWithInnerHTML(o,i,t);if(i)return this.renderWithElement(o,i,t);const l=this.getHtmlContent(n,t);return r.default.createElement("div",{className:this.state.expandable?"expandable":""},this.renderPreBlock(o,l),this.renderExpandButton())}renderWithInnerHTML(e,t,a){return e.dangerouslySetInnerHTML={__html:a},t?r.default.createElement(t,e):r.default.createElement("div",e)}renderWithElement(e,t,a){return r.default.createElement(t,e,a)}getHtmlContent(e,t){const a=this.state,n=a.focus,r=a.value,s=this.props.preventEscape,u=t?i({},r):e?l:o;return s?n?r:u:(c=n?r:u)&&c.__html?{__html:`${c.__html}`.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}:c;var c}renderPreBlock(e,t){return r.default.createElement("pre",{style:this.getPreBlockStyle(),ref:this.setEl},r.default.createElement("code",{style:this.props.style,"data-test":this.props["data-test"],contentEditable:!!this.props.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onInput:this._handleInput,className:`${this.props.className} ${this.isEmpty()?"empty":""}`,dangerouslySetInnerHTML:t}))}renderExpandButton(){return this.state.expandable?r.default.createElement("div",{className:"expand text-center mt-2"},r.default.createElement(ButtonLink,{onClick:this.toggleExpand,className:"btn--link-primary"},this.state.expanded?"Hide":"Show More",r.default.createElement("span",{className:"icon ml-2 ion text-primary "+(this.state.expanded?"ion-ios-arrow-up":"ion-ios-arrow-down")}))):null}isEmpty(){return!this.state.value||!this.state.value.__html}getPreBlockStyle(){return i({},this.props.style||{},{height:this.state.expanded||!this.state.expandable?"auto":110,opacity:"boolean"==typeof this.state.expandable||this.props.forceExpanded?1:0})}}u.defaultProps={className:null,element:null,innerHTML:!1};t.default=u},7175:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}(a(96540));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}t.default=function(e){return n.createElement("svg",i({className:"btn__icon",viewBox:"0 0 512 512"},e),n.createElement("path",{fill:"#999",d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"}))}},58176:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=a(2543),i=a(81206),s=c(a(37236)),o=a(80003),l=a(54242),u=c(a(73719));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p.apply(this,arguments)}t.default=({disabled:e=!1,environmentId:t,ignoreIds:a,isEdge:c,onChange:d,value:m})=>{const f=(0,s.default)(i.useGetIdentitiesQuery,{environmentId:t,isEdge:c,page_size:10}),g=f.data,h=f.isLoading,v=f.loadMore,E=f.searchItems,y=(0,n.useMemo)((()=>(0,r.filter)(g?.results,(e=>!a?.length||!(0,r.find)(a,(t=>t===e.id)))).map((({id:e,identifier:t})=>({label:t,value:e}))).slice(0,10)),[a,g]);return n.default.createElement(Flex,{className:"text-left"},n.default.createElement(Select,{onInputChange:e=>{E(u.default.safeParseEventValue(e))},"data-test":"select-identity",placeholder:"Create an Identity Override...",value:m,isDisabled:e,components:{Menu:e=>{let t=p({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return n.default.createElement(o.components.Menu,t,n.default.createElement(n.default.Fragment,null,t.children,!!g?.next&&n.default.createElement("div",{className:"text-center mb-4"},n.default.createElement(l.ButtonOutline,{onClick:()=>{v()},disabled:h},"Load More"))))}},onChange:d,options:y,styles:{control:e=>p({},e,{"&:hover":{borderColor:"$bt-brand-secondary"},border:"1px solid $bt-brand-secondary"})}}))}},25497:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}(a(96540));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}class i extends n.PureComponent{render(){return n.default.createElement("div",{className:"alert alert-info"},n.default.createElement("div",{className:"title"},n.default.createElement("span",{className:`ion ${this.props.icon||"ion-ios-information-circle"}`})," ",this.props.title||"NOTE"),this.props.children)}}t.default=i,function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(i,"displayName","InfoMessage")},10408:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(5556)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=o(a(32485));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u=a(26864);class c extends r.PureComponent{handleClickOutside(){this.props.isOpen&&this.props.onClose()}render(){return r.default.createElement("div",{className:"relative"},this.props.isOpen&&r.default.createElement("div",{className:(0,i.default)("inline-modal","mt-2","px-2","pb-2",this.props.className)},r.default.createElement("div",{className:"inline-modal__title mb-2"},r.default.createElement(Row,{space:!0},r.default.createElement("div",null,this.props.showBack&&r.default.createElement("button",{type:"button",onClick:this.props.onBack,className:"modal-back-btn"},r.default.createElement("span",{className:"icon ion-ios-arrow-back"}))),r.default.createElement(Flex,{className:"text-center"},this.props.title),r.default.createElement("button",{type:"button",onClick:this.props.onClose,className:"modal-close-btn"},r.default.createElement("span",{className:"icon ion-md-close"})))),r.default.createElement("div",{className:"inline-modal__content"},this.props.children)))}}l(c,"displayName","Popover"),l(c,"propTypes",{children:n.default.node,isOpen:n.default.bool,onBack:n.default.func,onClose:n.default.func,showBack:n.default.bool,title:n.default.string});t.default=u(c)},45809:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=a(2543),i=u(a(71906)),s=u(a(54242)),o=u(a(55248)),l=u(a(71416));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function m(e,t,a){const n={};return(0,r.isArray)(e)?e.map((function(e){return m(e,t,a)})):(0,r.isObject)(e)?(Object.keys(e).forEach((function(i){if((e=>!!a?.includes(e)||!("id"!==e&&!e.includes("uuid"))||!t&&(!(!e.includes("name")&&"email"!==e)||void 0))(i)){const s=e;if((0,r.isArray)(s[i])){if(!s[i].length)return;n[i]=s[i].map((function(e){return m(e,t,a)}))}else(0,r.isObject)(s[i])?n[i]=m(s[i],t,a):n[i]=s[i]}})),n):e}t.default=({className:e,condenseInclude:t,hideCondensedButton:a,json:r,showNamesButton:u,title:c})=>{const p=d((0,n.useState)(!1),2),f=p[0],g=p[1],h=d((0,n.useState)(!1),2),v=h[0],E=h[1],y=d((0,n.useState)(!0),2),_=y[0],b=y[1],w=(0,n.useMemo)((()=>r&&JSON.stringify(r,null,2)),[r]),A=(0,n.useMemo)((()=>r&&JSON.stringify(m(r,_,t),null,2)),[r,t,_]);return l.default.getTrait("json_inspect")&&r&&0!==r?.length?n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:e},n.default.createElement(Row,{style:{cursor:"pointer"},onClick:()=>{g(!f)}},n.default.createElement(Flex,null,n.default.createElement("div",null,n.default.createElement("pre",{className:"hljs-header"},n.default.createElement("span",{className:"ion-md-document"})," JSON data:"," ",n.default.createElement("span",{className:"hljs-description"},c," "),n.default.createElement("span",{className:f?"icon ion-ios-arrow-down":"icon ion-ios-arrow-forward"}))))),f&&n.default.createElement("div",{className:"hljs mb-2"},n.default.createElement(Row,{space:!0},n.default.createElement("div",null,n.default.createElement(Row,null,!a&&n.default.createElement("div",{className:"ml-2"},n.default.createElement("label",{className:"text-small text-white"},"Condensed"),n.default.createElement(o.default,{checked:v,onChange:()=>E(!v)})),v&&u&&n.default.createElement("div",{className:"ml-2"},n.default.createElement("label",{className:"text-small text-white"},"Show names"),n.default.createElement(o.default,{checked:!_,onChange:()=>b(!_)})))),n.default.createElement(s.default,{onClick:()=>{navigator.clipboard.writeText(v?A:w),toast("Copied")},className:"btn btn-primary"},"Copy JSON")),n.default.createElement("div",{className:"hljs-container"},n.default.createElement(i.default,{forceExpanded:!0,preventEscape:!0,className:"json"},v?A:w))))):null}},56389:(e,t,a)=>{"use strict";var n,r=s(a(96540)),i=s(a(23186));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l=(n=class extends r.default.Component{constructor(e,t){super(e,t),o(this,"render",(()=>r.default.createElement("div",{className:"fullscreen-container maintenance fullscreen-container__grey justify-content-center"},r.default.createElement("div",{className:"col-md-6 mt-5",id:"sign-up"},r.default.createElement("h1",null,"Maintenance"),"We are currently undergoing some scheduled maintenance of the admin site, this will not affect your application's feature flags.",r.default.createElement(r.default.Fragment,null," ","Check"," ",r.default.createElement("a",{target:"_blank",href:"https://twitter.com/getflagsmith",rel:"noreferrer"},"@getflagsmith")," ","for updates."),r.default.createElement("br",null),r.default.createElement("p",{className:"small"},"Sorry for the inconvenience, we will be back up and running shortly."))))),this.state={}}},o(n,"contextTypes",{router:propTypes.object.isRequired}),o(n,"displayName","HomePage"),n);e.exports=(0,i.default)(l)},23338:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=o(a(32485)),s=o(a(19346));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}const u=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(n=class extends r.Component{constructor(e,t){super(e,t),this.state={}}render(){return r.default.createElement(AccountProvider,null,(({user:e})=>r.default.createElement("div",null,e&&e.organisations&&e.organisations.map((e=>r.default.createElement("div",{key:e.id},r.default.createElement(Row,{className:(0,i.default)("popover-bt__list-item",{active:AccountStore.getOrganisation().id===e.id})},r.default.createElement("a",{href:"#",onClick:()=>{API.setCookie("organisation",`${e.id}`),this.props.onChange&&this.props.onChange(e)}},e.name),"ADMIN"===AccountStore.getOrganisationRole()&&r.default.createElement(s.default,{id:"organisation-settings-link",activeClassName:"active",onClick:()=>{this.props.onChange&&this.props.onChange(e)},className:"btn btn-link btn-sm edit",to:"/organisation-settings"},r.default.createElement("span",{style:{fontSize:16,marginRight:4},className:"icon--primary ion ion-md-settings"}),"Manage"))))))))}},"displayName","OrganisationSelect"),n);u.propTypes={},e.exports=u},27240:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=s(a(5556)),i=s(a(32485));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}function l(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends n.PureComponent{constructor(...e){super(...e),l(this,"handlePageClick",(e=>{const t=this.props,a=t.goToPage;t.paging.currentPage!==e+1&&a(e+1)})),l(this,"renderPageButton",((e,t)=>n.default.createElement("button",{key:e,className:(0,i.default)({active:t,page:!0}),onClick:()=>this.handlePageClick(e),"aria-pressed":t,tabIndex:0},e+1))),l(this,"renderDots",(()=>n.default.createElement("div",{className:(0,i.default)({page:!0})},"...")))}render(){const e=this.props,t=e.isLoading,a=e.paging,r=e.prevPage,i=e.nextPage,s=a.currentPage-1,o=Math.ceil(a.count/a.pageSize),l=Math.max(0,s+1-2),u=Math.min(o,(s||s+1)+2),c=_.range(l,u);return!(c.length<2)||a.next||a.previous?n.default.createElement(Row,{className:"list-item paging py-0",style:t?{opacity:.5}:{}},n.default.createElement(Button,{disabled:t||!a.previous,className:"icon btn-paging ion-ios-arrow-back",onClick:()=>r()}),a.currentPage?n.default.createElement(Row,{className:"list-item"},l>0&&this.renderPageButton(0,0===s),l>0&&this.renderDots(),c.map((e=>this.renderPageButton(e,s===e))),u<o&&this.renderDots(),u<o&&this.renderPageButton(o-1,s===o-1)):!!a.page&&n.default.createElement("span",null,"Page ",a.page,a.pageSize&&a.count?` of ${Math.ceil(a.count/a.pageSize)}`:""),n.default.createElement(Button,{className:"icon btn-paging ion-ios-arrow-forward",disabled:t||!a.next,onClick:()=>i()})):n.default.createElement("div",null)}}t.default=u,l(u,"displayName","Paging"),l(u,"propTypes",{goToPage:r.default.func,isLoading:r.default.bool,onNextClick:r.default.func,onPreviousClick:r.default.func,paging:r.default.object,prevPage:r.default.func,nextPage:r.default.func})},27704:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),s=a(5373),o=(n=a(34875))&&n.__esModule?n:{default:n};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u.apply(this,arguments)}function c(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=(r=class extends i.Component{constructor(e,t){super(e,t),c(this,"renderContainer",(e=>{const t=({index:t,style:a})=>i.default.createElement("div",{style:a},this.props.renderRow(e[t]));return e&&e.length>100&&this.props.itemHeight?i.default.createElement(s.FixedSizeList,{style:{overflowX:"hidden"},height:10*this.props.itemHeight,itemCount:e.length,itemSize:this.props.itemHeight,width:"100%"},t):e.map(this.props.renderRow)}));const a=_.find(_.get(e,"sorting",[]),{default:!0});this.state={sortBy:a?a.value:null,sortOrder:a?a.order:null}}filter(){let e=this.props.search||this.state.search||"";if(this.state.exact){for(;e.startsWith('"');)e=e.slice(1);for(;e.endsWith('"');)e=e.slice(0,-1)}const t=this.props.filter,a=this.props,n=a.filterRow,r=a.items;return n&&(e||t)?this.sort(_.filter(r,((t,a)=>n(t,e.toLowerCase(),a)))):this.sort(r)}sort(e){const t=this.state,a=t.sortBy,n=t.sortOrder;return a?_.orderBy(e,[a],[n]):e}onSort(e,t){e.preventDefault();const a=this.state,n=a.sortBy,r=a.sortOrder;t.value===n?this.setState({sortOrder:"asc"===r?"desc":"asc"},(()=>{this.props.onSortChange&&this.props.onSortChange({sortBy:this.state.sortBy,sortOrder:this.state.sortOrder})})):this.setState({sortBy:t.value,sortOrder:t.order},(()=>{this.props.onSortChange&&this.props.onSortChange({sortBy:this.state.sortBy,sortOrder:this.state.sortOrder})}))}renderSortOptions(e,t,a){return i.default.createElement("div",{className:"popover-inner__content"},this.props.sorting.map(((n,r)=>i.default.createElement("a",{key:r,className:"popover-bt__list-item",href:"#",onClick:t=>{this.onSort(t,n),e()}},i.default.createElement(Row,{space:!0},i.default.createElement(Row,{className:"flex-1"},n.label),t&&t.value===n.value&&i.default.createElement(Row,null,i.default.createElement("div",{className:"flex-column ion "+("asc"===a?"ion-ios-arrow-up":"ion-ios-arrow-down")})))))))}renderSearchInput(e,t){return i.default.createElement(Row,{onClick:()=>this.input.focus()},i.default.createElement("input",{ref:e=>this.input=e,onBlur:this.props.onBlur,onChange:e=>{const t=Utils.safeParseEventValue(e);this.props.onChange?this.props.onChange(this.state.exact?`"${t}"`:t):this.setState({search:Utils.safeParseEventValue(e)})},style:{padding:"0.5rem"},type:"text",id:`${this.props.id}-search`,"data-test":`${this.props.id}-search`,value:t,className:"pl-4",placeholder:e}),i.default.createElement("span",{style:{marginLeft:10,position:"absolute"},className:"icon ion-ios-search"}))}renderFilterRow(e,t,a,n){return i.default.createElement(Row,null,!!this.props.sorting&&i.default.createElement(Row,{className:"mr-3 relative"},i.default.createElement(o.default,{renderTitle:t=>i.default.createElement("a",{onClick:t},i.default.createElement("div",{className:"flex-column ion ion-md-funnel"}),e?e.label:"Unsorted")},(a=>this.renderSortOptions(a,e,t)))),!!this.props.filterRow&&i.default.createElement(i.default.Fragment,null,this.renderExactFilter(),this.renderSearchInput(n,a)))}renderExactFilter(){return this.props.showExactFilter&&i.default.createElement("div",{className:"mr-2",style:{width:200}},i.default.createElement(Select,{className:"select-sm",styles:{control:e=>u({},e,{"&:hover":{borderColor:"$bt-brand-secondary"},border:"1px solid $bt-brand-secondary",height:30})},onChange:e=>{if(this.setState({exact:"Exact"===e.label}),this.props.search){let e=this.props.search;if(this.state.exact){for(;e.startsWith('"');)e=e.slice(1);for(;e.endsWith('"');)e=e.slice(0,-1)}this.props.onChange&&this.props.onChange(this.state.exact?e:`"${this.props.search}"`)}},value:{label:this.state.exact?"Exact":this.props.filterLabel||(Utils.getIsEdge()?"Starts with":"Contains")},options:[{label:Utils.getIsEdge()?"Starts with":"Contains",value:"Contains"},{label:"Exact",value:"Exact"}]}))}renderContent(e,t,a,n,r){return!t||e&&a?e&&e.length?this.renderContainer(e):r&&!n?r:i.default.createElement(Column,null,!t&&i.default.createElement("div",{className:"mx-2 pt-1 pb-2"},this.props.noResultsText?.(n)||i.default.createElement(i.default.Fragment,null,"No results ",n&&i.default.createElement("span",null,"for",i.default.createElement("strong",null,` "${n}"`))))):i.default.createElement("div",{className:"text-center"},i.default.createElement(Loader,null))}render(){const e=this.state,t=e.sortBy,a=e.sortOrder,n=this.props,r=n.goToPage,s=n.isLoading,o=n.items,l=n.nextPage,u=n.paging,c=n.prevPage,d=n.renderNoResults,p=n.sorting,m=this.filter(o),f=_.find(p,{value:t});let g=this.props.search||this.state.search||"";if(this.state.exact){for(;g.startsWith('"');)g=g.slice(1);for(;g.endsWith('"');)g=g.slice(0,-1)}const h={"features-list":"Search for features","segment-list":"Search for segments","user-features-list":"Search for features","user-segments-list":"Search for segments","user-traits-list":"Search for traits","users-list":"Search with device id"}[this.props.id]||"Search";return g||m&&m.length||this.props.isLoading||this.props.renderSearchWithNoResults?i.default.createElement(Panel,{className:this.props.className,title:this.props.title,icon:this.props.icon,renderFooter:this.props.renderFooter,action:this.props.filterRow||this.props.sorting?this.renderFilterRow(f,a,g,h):this.props.action||null},this.props.searchPanel,i.default.createElement("div",{id:this.props.id,className:"search-list",style:s?{opacity:.5}:{}},!!u&&i.default.createElement(Paging,{paging:u,isLoading:s,nextPage:l,prevPage:c,goToPage:r}),this.props.header,this.renderContent(m,s,o,g,d)),!!u&&m&&m.length>10&&i.default.createElement(Paging,{paging:u,isLoading:s,goToPage:r})):d||null}},c(r,"displayName","PanelSearch"),c(r,"propTypes",{action:OptionalNode,filterRow:OptionalFunc,goToPage:OptionalFunc,isLoading:OptionalBool,items:propTypes.any,nextPage:OptionalFunc,noResultsText:OptionalString,paging:OptionalObject,renderNoResults:propTypes.any,renderRow:RequiredFunc,search:OptionalString,searchPanel:OptionalNode,sorting:OptionalArray,title:propTypes.node}),r);t.default=d},32127:(e,t,a)=>{"use strict";var n,r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),s=(n=a(23186))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}function l(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u=(l(r=class extends i.Component{constructor(e,t){super(e,t),this.state={}}render(){return i.default.createElement(OrganisationProvider,{id:this.props.id},(({projects:e})=>i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:`fade ${e&&!!e.length&&"in"}`},e&&!!e.length&&e.map((e=>this.props.renderRow(e,(()=>{this.props.onChange&&this.props.onChange(e)}))))))))}},"displayName","ProjectSelect"),l(r,"contextTypes",{router:propTypes.object.isRequired}),r);u.propTypes={},e.exports=(0,s.default)(u)},31529:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=a(96540);const i=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(n=class extends r.PureComponent{render(){return React.createElement("svg",{className:"btn__icon",width:"460",height:"512",viewBox:"0 0 460 512",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{id:"Page-1",fill:"none",fillRule:"evenodd"},React.createElement("g",{id:"bin",fill:"#D9534F",fillRule:"nonzero"},React.createElement("path",{d:"M441.378906,70.621094 L335.449219,70.621094 L335.449219,35.929688 C335.449219,16.121094 319.328125,0 299.519531,0 L159.515625,0 C139.707031,0 123.585938,16.121094 123.585938,35.929688 L123.585938,70.621094 L17.65625,70.621094 C7.90625,70.621094 -2.84217094e-14,78.515625 -2.84217094e-14,88.277344 C-2.84217094e-14,98.035156 7.90625,105.929688 17.65625,105.929688 L36.0625,105.929688 L50.714844,442.898438 C52.394531,481.65625 84.101562,512 122.890625,512 L336.148438,512 C374.933594,512 406.636719,481.65625 408.320312,442.898438 L422.972656,105.929688 L441.378906,105.929688 C451.128906,105.929688 459.035156,98.035156 459.035156,88.277344 C459.035156,78.515625 451.128906,70.621094 441.378906,70.621094 Z M159.515625,35.308594 L299.519531,35.308594 L300.136719,70.621094 L159.105469,70.621094 L159.515625,35.308594 Z M373.042969,441.378906 C372.179688,461.171875 355.976562,476.691406 336.144531,476.691406 L122.886719,476.691406 C103.058594,476.691406 86.851562,461.171875 85.988281,441.378906 L71.402344,105.929688 L387.628906,105.929688 L373.042969,441.378906 Z",id:"Shape"}),React.createElement("path",{d:"M229.515625,406.070312 C219.765625,406.070312 211.863281,398.171875 211.863281,388.414062 L211.863281,176.550781 C211.863281,166.792969 219.765625,158.898438 229.515625,158.898438 C239.265625,158.898438 247.171875,166.792969 247.171875,176.550781 L247.171875,388.414062 C247.171875,398.171875 239.265625,406.070312 229.515625,406.070312 Z",id:"Shape"}),React.createElement("path",{d:"M300.136719,406.070312 C290.386719,406.070312 282.484375,398.171875 282.484375,388.414062 L282.484375,176.550781 C282.484375,166.792969 290.386719,158.898438 300.136719,158.898438 C309.886719,158.898438 317.792969,166.792969 317.792969,176.550781 L317.792969,388.414062 C317.792969,398.171875 309.886719,406.070312 300.136719,406.070312 Z",id:"Shape"}),React.createElement("path",{d:"M158.898438,406.070312 C149.144531,406.070312 141.242188,398.171875 141.242188,388.414062 L141.242188,176.550781 C141.242188,166.792969 149.144531,158.898438 158.898438,158.898438 C168.648438,158.898438 176.550781,166.792969 176.550781,176.550781 L176.550781,388.414062 C176.550781,398.171875 168.648438,406.070312 158.898438,406.070312 Z",id:"Shape"}))))}},"displayName","RemoveIcon"),n);t.default=i},71707:(e,t,a)=>{"use strict";var n,r=l(a(96540)),i=l(a(98606)),s=l(a(78605)),o=l(a(23186));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c=(n=class extends r.default.Component{constructor(){super(),u(this,"submit",(e=>{!this.state.isLoading&&this.state.saml&&(Utils.preventDefault(e),this.setState({error:!1,isLoading:!0}),i.default.post(`${Project.api}auth/saml/${this.state.saml}/request/`).then((e=>{this.state.remember&&API.setCookie("saml",this.state.saml),e.headers&&e.headers.Location?document.location.href=e.headers.Location:this.setState({error:!0})})).catch((()=>{this.setState({error:!0,isLoading:!1})})))})),this.state={remember:!0,saml:API.getCookie("saml")||""}}render(){return r.default.createElement("form",{onSubmit:this.submit,className:"saml-form",id:"pricing"},r.default.createElement(InputGroup,{inputProps:{className:"full-width"},onChange:e=>this.setState({saml:Utils.safeParseEventValue(e)}),value:this.state.saml,type:"text",title:"Organisation Name"}),this.state.error&&r.default.createElement(s.default,{error:"Please check your organisation name and try again."}),r.default.createElement(Row,{className:"text-right mb-4"},r.default.createElement(Flex,null),r.default.createElement("input",{onChange:()=>{const e=!this.state.remember;e||API.setCookie("saml",null),this.setState({remember:e})},id:"organisation",className:"mr-2",type:"checkbox",checked:this.state.remember}),r.default.createElement("label",{className:"mb-0",htmlFor:"organisation"},"Remember this SAML organisation")),r.default.createElement("div",{className:"text-right"},r.default.createElement(Button,{type:"submit",disabled:!this.state.saml||this.state.isLoading},"Continue")))}},u(n,"displayName","SamlForm"),n);c.propTypes={children:RequiredElement,defaultValue:OptionalBool,title:RequiredString,toggleComponent:OptionalFunc},e.exports=(0,o.default)(c)},97286:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=a(98312),i=f(a(91646)),s=f(a(44386)),o=f(a(46555)),l=f(a(4478)),u=f(a(61642)),c=f(a(15467)),d=f(a(45809)),p=f(a(23186)),m=f(a(25497));f(a(93328)),f(a(12339));function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function h(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},v.apply(this,arguments)}const E=class extends n.default.Component{constructor(e){super(e),this.state={},ES6Component(this)}componentDidMount(){this.listenTo(l.default,"saved",(()=>{this.setState({changed:!1})}))}render(){const e=this.props,t=e.confirmRemove,a=e.controlValue,r=e.disabled,i=e.index,l=e.multivariateOptions,u=e.name,c=(e.onSortEnd,e.projectId,e.readOnly),d=(e.setSegmentEditId,e.setShowCreateSegment,e.setValue),p=e.setVariations,m=e.toggle,f=e.value,g=l&&l.map((e=>{const t=f.multivariate_options&&f.multivariate_options.find((t=>t.multivariate_feature_option===e.id));return t||{multivariate_feature_option:e.id,percentage_allocation:0}})),h=!f.id||this.state.changed,E=!(l&&l.length),y=Utils.calculateControl(g);return!f||f.toRemove?this.props.id?n.default.createElement("div",null,"You have removed this segment override, click save to confirm your changes."):n.default.createElement("div",null):n.default.createElement("div",{"data-test":`segment-override-${i}`,style:{zIndex:9999999999},className:"segment-overrides pt-1 mb-2"+(this.props.id?"":" panel panel-without-heading panel--draggable")},y<0&&n.default.createElement("div",{className:"alert alert-danger m-2 text-left"},"Your variation percentage splits total to over 100%"),n.default.createElement(Row,{className:"panel-content",space:!0},n.default.createElement("div",{className:"flex flex-1 text-left"},n.default.createElement("strong",null,u||f.segment_name,f.is_feature_specific&&n.default.createElement("div",{className:"unread ml-2 px-2"},"Feature-Specific"),h&&n.default.createElement("div",{className:"unread ml-2 px-2"},"Unsaved"))),n.default.createElement("div",null,n.default.createElement(Row,null,n.default.createElement(Column,null,n.default.createElement("div",null,n.default.createElement(Switch,{"data-test":`segment-override-toggle-${i}`,disabled:r,checked:f.enabled,onChange:e=>{c||(this.setState({changed:!0}),m(e))}}))),void 0,!c&&n.default.createElement("button",{disabled:r,"data-test":"remove-feature",id:"remove-feature",onClick:t,className:"btn btn--with-icon"},n.default.createElement(RemoveIcon,null))))),n.default.createElement("div",{className:"mx-2 text-left pb-2"},E?n.default.createElement(n.default.Fragment,null,n.default.createElement("label",null,"Value *"),n.default.createElement(s.default,{readOnly:c,disabled:c,value:f.value,"data-test":`segment-override-value-${i}`,onChange:c?null:e=>{this.setState({changed:!0}),d(Utils.getTypedValue(Utils.safeParseEventValue(e)))},placeholder:"Value e.g. 'big' "})):n.default.createElement(n.default.Fragment,null,n.default.createElement("label",null,"Segment Control Value - ",y,"%"),n.default.createElement(s.default,{value:f.value,"data-test":`segment-override-value-${i}`,placeholder:"Value e.g. 'big' ",disabled:!0,onChange:c?null:e=>{this.setState({changed:!0}),d(Utils.getTypedValue(Utils.safeParseEventValue(e)))}})),!!a&&(!l||!l.length)&&n.default.createElement("div",{className:"mt-2 mb-3 text-right"},n.default.createElement(ButtonLink,{className:"text-primary",onClick:()=>{this.setState({changed:!0}),d(Utils.getTypedValue(Utils.safeParseEventValue(a)))}},n.default.createElement("div",{className:"text-primary text-small"},"Copy from Environment Value"))),n.default.createElement("div",null,n.default.createElement(FormGroup,{className:"mb-4"},n.default.createElement(o.default,{preventRemove:!0,readOnlyValue:!0,segments:!0,disabled:c,controlValue:a,variationOverrides:g,multivariateOptions:l.map((e=>{const t=f.multivariate_options&&f.multivariate_options.find((t=>t.multivariate_feature_option===e.id));return v({},e,t?{default_percentage_allocation:t.percentage_allocation}:{default_percentage_allocation:0})})),setVariations:(e,t,a)=>{p(e,t,a),this.setState({changed:!0})},setValue:(e,t,a)=>{p(e,t,a),this.setState({changed:!0})},updateVariation:(e,t,a)=>{p(e,t,a),this.setState({changed:!0})},weightTitle:"Override Weight %"})))))}},y=(0,p.default)((0,r.SortableElement)(E)),b=(0,r.SortableContainer)((({confirmRemove:e,controlValue:t,disabled:a,environmentId:r,id:i,items:s,multivariateOptions:o,name:l,onSortEnd:u,projectId:c,readOnly:p,setSegmentEditId:m,setShowCreateSegment:f,setValue:g,setVariations:h,showEditSegment:b,toggle:w})=>{const A=i||a?E:y;return n.default.createElement("div",null,s.map(((s,E)=>n.default.createElement(n.default.Fragment,null,n.default.createElement(A,{id:i,name:l,segment:s.segment,onSortEnd:u,disabled:a,showEditSegment:b,environmentId:r,projectId:c,multivariateOptions:o,key:s.segment.name,index:E,readOnly:p,value:s,setSegmentEditId:m,setShowCreateSegment:f,confirmRemove:()=>e(E),controlValue:t,toggle:()=>w(E),setValue:e=>{g(E,e)},setVariations:(e,t,a)=>{const n=_.cloneDeep(a);n[e]=v({},n[e],{percentage_allocation:t.default_percentage_allocation}),h(E,n)}}),n.default.createElement("div",{className:"text-left"},n.default.createElement(d.default,{showNamesButton:!0,title:"Segment Override",json:s}))))))}));class w extends n.Component{constructor(e){super(e),h(this,"addItem",(()=>{const e=(this.props.value||[]).map((e=>v({},e,{priority:e.priority}))),t=e.find((e=>e.segment===this.state.selectedSegment.value));if(t)return t.toRemove=!1,void this.props.onChange(e);const a={environment:i.default.getEnvironmentIdFromKey(this.props.environmentId),feature:this.props.feature,feature_segment_value:{enabled:!1,environment:i.default.getEnvironmentIdFromKey(this.props.environmentId),feature:this.props.feature,feature_segment:null,feature_state_value:Utils.valueToFeatureState("")},priority:e.length,segment:this.state.selectedSegment.value,segment_name:this.state.selectedSegment.label,value:this.props.controlValue};this.props.onChange([a].concat(e)),this.setState({selectedSegment:null})})),h(this,"confirmRemove",(e=>{if(!this.props.value[e].id)return this.props.onChange(_.filter(this.props.value,((t,a)=>a!==e)).map(((e,t)=>v({},e,{priority:t})))),void(this.props.onRemove&&this.props.onRemove());this.setState({isLoading:!0}),openConfirm(n.default.createElement("h3",null,"Delete Segment Override"),n.default.createElement("p",null,"Are you sure you want to delete this segment override? This will be applied when you click Update Segment Overrides."),(()=>{this.props.value[e].toRemove=!0}),(()=>{this.setState({isLoading:!1})}))})),h(this,"setValue",((e,t)=>{this.props.value[e].value=t,this.props.onChange(this.props.value)})),h(this,"setSegmentEditId",(e=>{this.setState({segmentEditId:e})})),h(this,"setVariations",((e,t)=>{this.props.value[e].multivariate_options=t,this.props.onChange(this.props.value)})),h(this,"toggle",(e=>{this.props.value[e].enabled=!this.props.value[e].enabled,this.props.onChange(this.props.value)})),h(this,"onSortEnd",(({newIndex:e,oldIndex:t})=>{var a,n,r;this.props.onChange((a=this.props.value,n=t,r=e,((e,t,a)=>{e.splice(a<0?e.length+a:a,0,e.splice(t,1)[0])})(a=a.slice(),n,r),a).map(((e,t)=>v({},e,{priority:t}))))})),this.state={segmentEditId:void 0}}renderSegmentSelect(e){const t=this.state.selectedSegment,a=this.props,r=a.projectId,i=a.disableCreate,s=a.showCreateSegment,o=a.readOnly;return!this.props.id&&!i&&!s&&!o&&n.default.createElement(Flex,{className:"text-left"},n.default.createElement(c.default,{projectId:r,"data-test":"select-segment",placeholder:"Create a Segment Override...",filter:e,value:t,onChange:e=>this.setState({selectedSegment:e},this.addItem)}))}renderCreateSegmentButton(){const e=this.props,t=e.disableCreate,a=e.showCreateSegment,r=e.readOnly;return!a&&!r&&!t&&n.default.createElement("div",{className:"text-right"},n.default.createElement(Button,{className:"mt-2","data-test":"create-feature-specific-segment-btn",onClick:()=>{this.setState({selectedSegment:null}),this.props.setShowCreateSegment(!0)}},"Create Feature-Specific Segment"))}renderCreateSegmentModal(){const e=this.props,t=e.environmentId,a=e.projectId,r=e.feature,i=this.state,s=i.segmentEditId,o=i.selectedSegment;return this.props.showCreateSegment&&!s?n.default.createElement("div",{className:"text-left panel--grey mt-2"},n.default.createElement(u.default,{onComplete:e=>{o?this.props.setShowCreateSegment(!1):(this.props.setShowCreateSegment(!1),this.setState({selectedSegment:{label:e.name,value:e.id}},this.addItem))},onCancel:()=>this.props.setShowCreateSegment(!1),condensed:!0,feature:r,environmentId:t,projectId:a})):this.props.showCreateSegment&&s?n.default.createElement(u.default,{segment:s,isEdit:!0,condensed:!0,onComplete:()=>{this.setState({segmentEditId:void 0}),this.props.setShowCreateSegment(!1)},onCancel:()=>{this.setState({segmentEditId:void 0}),this.props.setShowCreateSegment(!1)},environmentId:t,projectId:a}):null}renderVisibleValues(e){const t=this.state.isLoading,a=this.props,r=a.multivariateOptions,i=a.id,s=a.readOnly,o=a.name,l=a.controlValue,u=a.showEditSegment,c=a.environmentId,p=a.projectId,f=a.setShowCreateSegment;return e&&!!e.length&&!this.props.showCreateSegment&&n.default.createElement("div",{style:t?{opacity:.5}:null,className:"mt-4 overflow-visible"},!i&&n.default.createElement("div",null,n.default.createElement(m.default,{className:"mb-4 text-left faint"},"Prioritise a segment override by dragging it to the top of the list.")),e&&n.default.createElement(n.default.Fragment,null,n.default.createElement(b,{disabled:t||s,id:i,name:o,controlValue:l,multivariateOptions:r,confirmRemove:this.confirmRemove,setVariations:this.setVariations,toggle:this.toggle,setValue:this.setValue,readOnly:s,showEditSegment:u,environmentId:c,projectId:p,setShowCreateSegment:f,items:e.map((e=>v({},e))),setSegmentEditId:this.setSegmentEditId,onSortEnd:this.onSortEnd}),n.default.createElement("div",{className:"text-left mt-4"},n.default.createElement(d.default,{showNamesButton:!0,title:"Segment Overrides",json:e}))))}render(){const e=this.props,t=(e.multivariateOptions,e.value),a=(this.state.isLoading,t&&t.filter((e=>!e.toRemove)));return n.default.createElement("div",null,n.default.createElement("div",{className:"text-center mt-2 mb-2"},this.renderSegmentSelect((e=>{if(e.feature&&e.feature!==this.props.feature)return!1;if(this.props.id&&this.props.id!==e.id)return null;const a=_.find(t,(t=>t.segment===e.id));return!t||!a||a&&a.toRemove})),this.renderCreateSegmentButton(),this.renderCreateSegmentModal(),this.renderVisibleValues(a)))}}h(w,"displayName","TheComponent"),h(w,"propTypes",{});t.default=w},15467:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(a(96540)),r=a(93267),i=a(54242),s=c(a(37236)),o=a(80003),l=c(a(73719));const u=["filter","projectId"];function c(e){return e&&e.__esModule?e:{default:e}}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}t.default=e=>{let t=e.filter,a=e.projectId,c=p(e,u);const m=(0,s.default)(r.useGetSegmentsQuery,{page_size:100,projectId:a}),f=m.data,g=m.isLoading,h=m.loadMore,v=m.searchItems,E=(f?t?f.results.filter(t):f.results:[]).map((({feature:e,id:t,name:a})=>({feature:e,label:a,value:t})));return n.default.createElement(Select,{"data-test":c["data-test"],placeholder:c.placeholder,value:c.value,onChange:c.onChange,onInputChange:e=>{v(l.default.safeParseEventValue(e))},components:{Menu:e=>{let t=d({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return n.default.createElement(o.components.Menu,t,n.default.createElement(n.default.Fragment,null,t.children,!!f?.next&&n.default.createElement("div",{className:"text-center mb-4"},n.default.createElement(i.ButtonOutline,{onClick:()=>{h()},disabled:g},"Load More"))))},Option:({children:e,data:t,innerProps:a,innerRef:r})=>n.default.createElement("div",d({ref:r},a,{className:"react-select__option"}),e,!!t.feature&&n.default.createElement("div",{className:"unread ml-2 px-2"},"Feature-Specific"))},options:E,styles:{control:e=>d({},e,{"&:hover":{borderColor:"$bt-brand-secondary"},border:"1px solid $bt-brand-secondary"})}})}},77682:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(5556)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=o(a(78605));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends r.PureComponent{constructor(...e){super(...e),l(this,"handleSubmit",(e=>{Utils.preventDefault(e),this.props.onSubmit()})),l(this,"renderError",(()=>this.props.error&&r.default.createElement(i.default,{error:"Invalid pin code"})))}render(){const e=this.props,t=e.isLoading,a=e.onChange,n=e.pin;return r.default.createElement(Panel,{icon:"ion-ios-lock",title:"Two-Factor Authentication"},r.default.createElement("strong",null,"Two-factor authentication code"),r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement(InputGroup,{inputProps:{className:"full-width",style:{paddingLeft:10,textIndent:0}},onChange:a,value:n,type:"text"}),this.renderError(),r.default.createElement("div",{className:"text-right"},r.default.createElement(Button,{disabled:t},"Verify Code"))),r.default.createElement("p",{className:"faint text-center mt-4"},"Enter the code from the two-factor app on your mobile device. If you've lost your device, you may enter one of your recovery codes."))}}t.default=u,l(u,"displayName","TheComponent"),l(u,"propTypes",{error:n.default.string,isLoading:n.default.bool,onChange:n.default.func.isRequired,onSubmit:n.default.func.isRequired,pin:n.default.string.isRequired})},55248:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=(n=a(81102))&&n.__esModule?n:{default:n};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}function o(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends r.PureComponent{render(){return r.default.createElement("div",{style:{display:"inline-block",height:"28px",position:"relative"}},r.default.createElement(i.default,this.props),this.props.checked?r.default.createElement("div",{className:"switch-checked"},this.props.offMarkup||"On"):r.default.createElement("div",{className:"switch-unchecked"},this.props.onMarkup||"Off"))}}t.default=l,o(l,"displayName","Switch"),o(l,"propTypes",{})},34086:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement(Row,{style:e.color?{backgroundColor:e.color}:null,onClick:e.onClick,className:(0,r.default)("chip mr-2 clickable",e.className,{"chip--active":e.active,light:!!e.color})},e.children,n.default.createElement("span",{className:(0,r.default)("mx-1 chip-icon ion",{"ion-ellipse-outline":!e.active,"ion-ios-checkmark":e.active})}))};var n=i(a(96540)),r=i(a(32485));function i(e){return e&&e.__esModule?e:{default:e}}},74339:(e,t,a)=>{"use strict";var n;function r(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=a(75963),s=(n=class extends React.Component{constructor(...e){super(...e),r(this,"id",Utils.GUID())}render(){return React.createElement("span",{className:"question-tooltip"},this.props.title?React.createElement("span",{"data-for":this.id,"data-tip":!0},this.props.title):React.createElement("span",{className:"ion ion-ios-help","data-for":this.id,"data-tip":!0}),React.createElement(i,{html:!0,id:this.id,place:this.props.place||"top",type:"dark",effect:"solid"},`<div class="flex-row"><div class="icon--tooltip ion-ios-information-circle pr-2"></div><span>${this.props.children}</span></div>`))}},r(n,"displayName","Tooltip"),n);s.propTypes={children:RequiredElement,place:OptionalString};t.default=s},12146:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=u(a(71906)),s=u(a(86420)),o=u(a(23186)),l=u(a(12339));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function d(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=(n=class extends r.Component{constructor(e,t){super(e,t),d(this,"request",(()=>{const e=this.props,t=e.environmentId,a=e.userId;this.setState({isLoading:!0}),API.trackEvent(l.default.events.TRY_IT);const n=a?`${Utils.getSDKEndpoint()}identities/?identifier=${encodeURIComponent(a)}`:`${Utils.getSDKEndpoint()}flags/`;fetch(n,{headers:{"X-Environment-Key":t}}).then((e=>e.json())).then((e=>{let t={};a&&(t.features={},t.traits={});(a?e.flags:e).map((({enabled:e,feature:n,feature_state_value:r})=>{(a?t.features:t)[n.name]={enabled:e,value:r}})),a&&e.traits.map((({trait_key:e,trait_value:a})=>{t.traits[e]=a})),t=JSON.stringify(t,null,2),this.setState({data:t,isLoading:!1}),toast("Retrieved results")}))})),this.state={}}render(){return Utils.getFlagsmithHasFeature("try_it")?r.default.createElement(Panel,{icon:"ion-md-code",title:"Try it out"},r.default.createElement("div",null,r.default.createElement("div",{className:"text-center"},r.default.createElement("p",{className:"faint-lg"},this.props.title),r.default.createElement("div",null,r.default.createElement(Button,{id:"try-it-btn",disabled:this.state.isLoading,onClick:this.request,className:"btn btn--with-icon primary"},this.state.data?"Test again":"Run test"," ",r.default.createElement(s.default,{className:"btn__icon btn__icon--small",alt:"Run"})))),this.state.data&&r.default.createElement("div",{id:!this.state.isLoading&&"try-it-results"},r.default.createElement(FormGroup,null),r.default.createElement("div",{style:{opacity:this.state.isLoading?.5:1},className:"fade "},r.default.createElement(i.default,{forceExpanded:!0,className:"json"},this.state.data))),this.state.isLoading&&!this.state.data&&r.default.createElement("div",{className:"text-center"},r.default.createElement(Loader,null)))):r.default.createElement("div",null)}},d(n,"displayName","TryIt"),n);p.propTypes={},e.exports=(0,o.default)(p)},20863:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=(n=a(10408))&&n.__esModule?n:{default:n};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}function o(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends r.Component{constructor(...e){super(...e),o(this,"state",{filter:""})}render(){const e=this.props.users&&this.props.users.filter((e=>{const t=this.state.filter.toLowerCase();return!t||`${e.first_name} ${e.last_name}`.toLowerCase().includes(t)})),t=this.props.value||[];return r.default.createElement(i.default,{title:"Users",isOpen:this.props.isOpen,onClose:this.props.onToggle,className:"inline-modal--tags"},r.default.createElement(Input,{disabled:this.props.disabled,value:this.state.filter,onChange:e=>this.setState({filter:Utils.safeParseEventValue(e)}),className:"full-width mb-2",placeholder:"Type or choose a user"}),r.default.createElement("div",{style:{maxHeight:200,overflowY:"auto"}},e&&e.map((e=>r.default.createElement("div",{className:"list-item clickable",key:e.id},r.default.createElement(Row,{onClick:()=>{const a=t.includes(e.id);a&&this.props.onRemove?this.props.onRemove(e.id):!a&&this.props.onAdd&&this.props.onAdd(e.id),this.props.onChange&&this.props.onChange(a?t.filter((t=>t!==e.id)):t.concat([e.id]))},space:!0},r.default.createElement(Flex,{className:t.includes(e.id)?"font-weight-bold":""},e.first_name," ",e.last_name),t.includes(e.id)&&r.default.createElement("span",{style:{fontSize:24},className:"ion `text-primary` ion-ios-checkmark"})))))))}}e.exports=l},44386:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=l(a(32485)),i=l(a(71906)),s=l(a(23186)),o=a(53348);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c.apply(this,arguments)}function d(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=a(1293),m=a(71405);class f extends n.Component{constructor(e){super(e),d(this,"validateLanguage",((e,t)=>{new Promise((a=>{switch(e){case"json":try{JSON.parse(t),a(!1)}catch(e){a(e.message)}break;case"ini":try{p.parse(t),a(!1)}catch(e){a(e.message)}break;case"yaml":try{m.parse(t),a(!1)}catch(e){a(e.message)}break;case"xml":try{a(function(e){const t=(new DOMParser).parseFromString(e,"application/xml");for(const e of Array.from(t.querySelectorAll("parsererror")))if(e instanceof HTMLElement)return e.innerText;return!1}(t))}catch(e){a("Failed to parse XML")}break;default:a(!1)}})).then((e=>{this.setState({error:e})}))})),this.state={},this.validateLanguage(this.props.language,this.props.value)}componentDidUpdate(e){e.value===this.props.value&&e.language===this.props.language||this.validateLanguage(this.props.language,this.props.value)}render(){const e="ini"===this.props.language?"toml":this.props.language;return n.default.createElement(Tooltip,{position:"top",title:this.state.error?n.default.createElement("span",{id:"language-validation-error",className:"text-white ion-ios-warning"}):n.default.createElement("span",{className:"text-white ion-ios-checkmark-circle"})},this.state.error?`${e} validation error, please check your value.<br/>Error: ${this.state.error}`:`${e} validation passed`)}}class g extends n.Component{constructor(...e){super(...e),d(this,"state",{language:"txt"}),d(this,"renderValidation",(()=>n.default.createElement(f,{language:this.state.language,value:this.props.value})))}componentDidMount(){if(this.props.value)try{if("object"!=typeof JSON.parse(this.props.value))return;this.setState({language:"json"})}catch(e){}}render(){const e=c({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(this.props),this.props));return n.default.createElement("div",{className:(0,r.default)("value-editor",{disabled:this.props.disabled,light:!flagsmith.getTrait("dark_mode")})},n.default.createElement(Row,{className:"select-language"},n.default.createElement("span",{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),this.setState({language:"txt"})},className:(0,r.default)("txt",{active:"txt"===this.state.language})},".txt"),n.default.createElement("span",{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),this.setState({language:"json"})},className:(0,r.default)("json",{active:"json"===this.state.language})},".json ","json"===this.state.language&&this.renderValidation()),n.default.createElement("span",{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),this.setState({language:"xml"})},className:(0,r.default)("xml",{active:"xml"===this.state.language})},".xml ","xml"===this.state.language&&this.renderValidation()),n.default.createElement("span",{onMouseDown:()=>{const e=o.Clipboard.setString(this.props.value);toast(e?"Clipboard set":"Could not set clipboard :(")},className:(0,r.default)("txt primary")},n.default.createElement("span",{className:"ion ion-md-clipboard mr-0 ml-2 txt primary"})," copy")),n.default.createElement(i.default,{"data-test":e["data-test"],disabled:e.disabled,onChange:e.disabled?null:e.onChange,className:(0,r.default)({"txt hljs language-plaintext":!0,[this.props.className]:!!this.props.className})},void 0!==e.value&&null!=e.value?`${e.value}`:""))}}t.default=(0,s.default)(g)},79224:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}(a(96540));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s.apply(this,arguments)}const o=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(n=class extends r.Component{constructor(e,t){super(e,t),this.state={paused:!0}}render(){return r.default.createElement(Flex,{onClick:()=>this.setState({paused:!this.state.paused}),className:"centered-container gif "+(this.state.paused?"paused":"playing")},r.default.createElement("img",s({},this.props,{alt:"Pause",src:this.state.paused?this.props.pausedSrc:this.props.src})),r.default.createElement("span",{className:"ion ion-ios-play"}))}},"displayName","Gif"),n);o.propTypes={},e.exports=o},34875:(e,t,a)=>{"use strict";var n,r=s(a(32485)),i=s(a(24691));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l=(n=class extends React.Component{constructor(e,t){super(e,t),o(this,"_focusChanged",(e=>this.setState({isActive:e}))),o(this,"toggle",(()=>{this.focus.toggle()})),o(this,"isActive",(()=>this.state.isActive)),this.state={isActive:!1}}render(){const e=(0,r.default)({in:this.state.isActive,popover:!0},this.props.contentClassName,this.props.className);return React.createElement(i.default,{ref:e=>this.focus=e,onFocusChanged:this._focusChanged,isHover:this.props.isHover},React.createElement("div",{className:this.props.className},this.props.renderTitle(this.toggle,this.state.isActive),React.createElement("div",{className:"popover-inner"},React.createElement("div",{className:`${e}`},this.props.children(this.toggle)))))}},o(n,"displayName","Popover"),n);l.propTypes={children:Any,className:OptionalString,isHover:OptionalBool,renderTitle:RequiredFunc},e.exports=l},54242:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ButtonProject=t.ButtonOutline=t.ButtonLink=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};const i=["children","className","href","target"];function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o.apply(this,arguments)}const l=e=>r.default.createElement("button",o({},e,{className:`btn ${e.className||""}`}),e.children);t.default=l;t.ButtonOutline=e=>r.default.createElement(l,o({},e,{className:`btn--outline ${e.className||""}`}));t.ButtonProject=e=>r.default.createElement(l,o({},e,{className:`btn--project ${e.className||""}`}));t.ButtonLink=e=>{let t=e.children,a=e.className,n=e.href,u=e.target,c=s(e,i);return r.default.createElement(l,o({},c,{className:`btn--link ${a||""}`}),n?r.default.createElement("a",{className:"btn--link",target:u,href:n},t):r.default.createElement("span",{className:"btn--link"},t))}},54050:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(17771)),r=o(a(32485));const i=["inputClassName","isValid","mask","placeholderChar","showSuccess"];var s;function o(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function u(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function c(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d={a:{validate:e=>/[ap]/.test(e)},m:{transform:()=>"m",validate:e=>/\w/.test(e)}},p=(s=class extends React.Component{constructor(e,t){super(e,t),c(this,"onFocus",(e=>{this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(e)})),c(this,"focus",(()=>{this.input.focus()})),c(this,"onKeyDown",(e=>{Utils.keys.isEscape(e)&&this.input.blur(),this.props.onKeyDown&&this.props.onKeyDown(e)})),c(this,"validate",(()=>{this.setState({shouldValidate:!0})})),c(this,"onBlur",(e=>{this.setState({isFocused:!1,shouldValidate:!0}),this.props.onBlur&&this.props.onBlur(e)})),this.state={shouldValidate:!!this.props.value||this.props.autoValidate,type:this.props.type}}render(){const e=this.props,t=e.inputClassName,a=e.isValid,s=e.mask,o=e.placeholderChar,c=e.showSuccess,p=u(e,i),m=this.state.shouldValidate&&!a,f=a&&c,g=(0,r.default)({focused:this.state.isFocused,"input-container":!0,invalid:m,password:"password"===this.props.type,success:f},this.props.className),h=(0,r.default)({input:!0},t);return React.createElement("div",{className:g},s?React.createElement(n.default,l({ref:e=>this.input=e},p,{mask:this.props.mask,type:this.state.type,formatCharacters:d,onKeyDown:this.onKeyDown,onFocus:this.onFocus,onBlur:this.onBlur,className:h,placeholderChar:o})):React.createElement("input",l({ref:e=>this.input=e},p,{onFocus:this.onFocus,onKeyDown:this.onKeyDown,type:this.state.type,onBlur:this.onBlur,value:this.props.value,className:h})),m&&React.createElement("span",{className:"input-icon-right text-danger icon ion ion-ios-close-circle-outline"}),f&&React.createElement("span",{className:"input-icon-right text-success icon ion ion-ios-checkmark-circle-outline"}),"password"===this.props.type&&React.createElement("span",{onClick:()=>this.setState({type:"password"===this.state.type?"text":"password"}),className:"input-icon-right icon ion "+("text"===this.state.type?"ion-ios-eye-off":"ion-ios-eye")}))}},c(s,"displayName","Input"),s);p.defaultProps={className:"",isValid:!0,placeholderChar:" "},p.propTypes={className:propTypes.any,inputClassName:OptionalString,isValid:propTypes.any,mask:OptionalString,onBlur:OptionalFunc,onFocus:OptionalFunc,onKeyDown:OptionalFunc,onSearchChange:OptionalFunc,placeholderChar:OptionalString};t.default=p},92431:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}(a(96540));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s.apply(this,arguments)}function o(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l=(n=class extends r.Component{constructor(e,t){super(e,t),o(this,"focus",(()=>{this.input.focus()})),this.state={}}render(){const e=this.props,t=this.props.id||Utils.GUID(),a=this.props.inputProps;return r.default.createElement("div",{className:`${this.props.className} form-group ${this.props.isInvalid?"invalid":""}`},this.props.tooltip?r.default.createElement(Tooltip,{title:r.default.createElement("label",{htmlFor:t,className:"cols-sm-2 control-label"},r.default.createElement("div",null,e.title," ",r.default.createElement("span",{className:"icon ion-ios-information-circle"})," ",e.unsaved&&r.default.createElement("div",{className:"unread"},"Unsaved"))),place:this.props.tooltipPlace||"right"},this.props.tooltip):r.default.createElement(Row,null,!!e.title&&r.default.createElement(Flex,{className:"mr-4"},r.default.createElement("label",{htmlFor:t,className:"cols-sm-2 control-label"},r.default.createElement("div",null,e.title," ",e.unsaved&&r.default.createElement("div",{className:"unread"},"Unsaved")))),!!this.props.rightComponent&&r.default.createElement("div",{style:{marginBottom:"0.5rem"}},this.props.rightComponent)),a&&a.error&&r.default.createElement("span",null,r.default.createElement("span",null," - "),r.default.createElement("span",{id:e.inputProps.name?`${e.inputProps.name}-error`:"",className:"text-danger"},a.error)),r.default.createElement("div",null,this.props.component?this.props.component:r.default.createElement("div",null,this.props.textarea?r.default.createElement("textarea",s({ref:e=>this.input=e},e.inputProps,{isValid:e.isValid,disabled:e.disabled,value:e.value,defaultValue:e.defaultValue,"data-test":e["data-test"],onChange:e.onChange,type:e.type||"text",id:t,placeholder:e.placeholder})):r.default.createElement(Input,s({ref:e=>this.input=e},e.inputProps,{isValid:e.isValid,disabled:e.disabled,defaultValue:e.defaultValue,value:e.value,"data-test":e["data-test"],onChange:e.onChange,type:e.type||"text",id:t,placeholder:e.placeholder})))))}},o(n,"displayName","InputGroup"),n);l.propTypes={disabled:OptionalBool,inputProps:OptionalObject,isValid:propTypes.any,onChange:OptionalFunc,placeholder:OptionalString,title:propTypes.any,type:OptionalString,value:OptionalString};t.default=l},12564:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=({children:e})=>e||null},27456:(e,t,a)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r=a(32485),i=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(n=class extends React.Component{constructor(){super(),this.state={value:0}}render(){let e=null;e="object"!=typeof this.props.children||Array.isArray(this.props.children)||null===this.props.children?this.props.children.filter((e=>!!e)):[this.props.children];const t=this.props.uncontrolled?this.state.value:this.props.value;return React.createElement("div",{className:`tabs ${this.props.className||""} ${this.props.transparent?"tabs--transparent":""} ${this.props.inline?"tabs--inline":""}`},React.createElement("div",{className:"tabs-nav",style:isMobile?{flexWrap:"wrap"}:{}},e.map(((e,a)=>{const n=t==a;return e?React.createElement(Button,{type:"button","data-test":e.props["data-test"],id:e.props.id,key:`button${a}`,onClick:e=>{e.stopPropagation(),e.preventDefault(),this.props.uncontrolled?this.setState({value:a}):this.props.onChange(a)},className:"btn-tab btn-primary"+(n?" tab-active":"")},e.props.tabIcon&&React.createElement("span",{className:r("icon mr-2",e.props.tabIcon)}),e.props.tabLabel):null})),React.createElement("div",{className:"tab-line",style:{left:100/e.length*t+"%",width:100/e.length+"%"}})),React.createElement("div",{className:"tabs-content"},e.map(((e,a)=>{const n=t===a;return React.createElement("div",{key:`content${a}`,className:"tab-item"+(n?" tab-active":"")},e)}))))}},"displayName","Tabs"),n);i.defaultProps={className:"",value:0},i.propTypes={children:RequiredElement,inline:OptionalBool,onChange:OptionalFunc,transparent:OptionalBool,uncontrolled:OptionalBool,value:OptionalNumber};t.default=i},71709:(e,t,a)=>{"use strict";var n,r=a(96540);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}const s=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(n=class extends r.PureComponent{render(){return React.createElement("div",i({},this.props,{className:`${this.props.className||""} flex-column`}),this.props.children)}},"displayName","Column"),n);s.defaultProps={},s.propTypes={children:OptionalNode,className:OptionalString,style:propTypes.any,value:OptionalNumber},e.exports=s},51404:e=>{"use strict";var t;function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},a.apply(this,arguments)}const n=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(t=class extends React.Component{render(){return React.createElement("div",a({},this.props,{className:`${this.props.className||""} flex flex-1`}),this.props.children)}},"displayName","Flex"),t);n.defaultProps={value:1},n.propTypes={children:OptionalNode,className:OptionalString,style:propTypes.any,value:OptionalNumber},e.exports=n},78034:(e,t,a)=>{"use strict";var n,r=a(96540);const i=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(n=class extends r.PureComponent{render(){return React.createElement("div",{className:`form-group ${this.props.className||""}`},this.props.children)}},"displayName","FormGroup"),n);i.displayName="FormGroup",i.propTypes={children:OptionalNode},e.exports=i},27601:(e,t,a)=>{"use strict";var n,r=a(96540);const i=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(n=class extends r.PureComponent{render(){return React.createElement("div",{className:`panel panel-default ${this.props.className||""} ${this.props.title?"":"mt-2"}`},(this.props.title||this.props.action)&&React.createElement("div",{className:"panel-heading"},React.createElement(Row,{space:!0},React.createElement(Row,{className:"flex-1"},this.props.icon&&React.createElement("span",{className:"panel-icon"},React.createElement("span",{className:`icon ${this.props.icon}`})),React.createElement(Flex,{className:"m-b-0 title"},this.props.title)),this.props.action)),React.createElement("div",{className:"panel-content"},this.props.children,this.props.renderFooter&&this.props.renderFooter()))}},"displayName","Panel"),n);i.displayName="Panel",i.propTypes={children:OptionalNode,icon:OptionalString,title:oneOfType([OptionalObject,OptionalString])},e.exports=i},72203:(e,t,a)=>{"use strict";var n,r=a(96540),i=(n=a(32485))&&n.__esModule?n:{default:n};const s=["noWrap","space"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o.apply(this,arguments)}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function u(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends r.PureComponent{render(){const e=this.props,t=e.noWrap,a=e.space,n=l(e,s);return React.createElement("div",o({},n,{className:(0,i.default)({"flex-row":!0,noWrap:t,space:a},this.props.className)}),this.props.children)}}u(c,"displayName","Row"),u(c,"propTypes",{children:OptionalNode,className:OptionalString,space:OptionalBool,style:propTypes.any}),e.exports=c},24691:(e,t,a)=>{"use strict";var n,r=a(41669),i=o(a(96540)),s=o(a(40961));function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u=(n=class extends i.default.Component{constructor(e,t){super(e,t),l(this,"toggle",(()=>{this.state.hasFocus&&(new Date).valueOf()-this.state.updated>200&&this.focusChanged(!this.state.hasFocus)})),l(this,"focusChanged",(e=>{e!==this.state.hasFocus&&(this.setState({hasFocus:e,updated:(new Date).valueOf()}),this.props.onFocusChanged(e))})),l(this,"_clickDocument",(e=>{const t=s.default.findDOMNode(this);e.target===t||r(t).has(e.target).length?this.focusChanged(!0):this.focusChanged(!1)})),this.state={hasFocus:!1}}componentDidMount(){const e=s.default.findDOMNode(this);this.props.isHover?(e.addEventListener("mouseover",(()=>this.focusChanged(!0)),!1),e.addEventListener("mouseleave",(()=>this.focusChanged(!1)),!1)):window.addEventListener("mousedown",this._clickDocument,!1)}componentWillUnmount(){const e=s.default.findDOMNode(this);this.props.isHover?(e.removeEventListener("mouseover",(()=>this.focusChanged(!0)),!1),e.removeEventListener("mouseleave",(()=>this.focusChanged(!1)),!1)):window.removeEventListener("mousedown",this._clickDocument,!1)}render(){return this.props.children}},l(n,"displayName","FocusMonitor"),n);u.propTypes={children:RequiredElement,isHover:OptionalBool,onFocusChanged:RequiredFunc},e.exports=u},68447:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=c(a(59386)),s=c(a(20863)),o=c(a(12310)),l=c(a(54242)),u=c(a(44117));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m=(n=class extends r.Component{constructor(...e){super(...e),p(this,"state",{approvals:this.props.changeRequest&&this.props.changeRequest.approvals||[],description:this.props.changeRequest&&this.props.changeRequest.description||"",live_from:this.props.changeRequest&&this.props.changeRequest.feature_states[0].live_from,title:this.props.changeRequest&&this.props.changeRequest.title||""}),p(this,"addOwner",((e,t=!0)=>{this.setState({approvals:(this.state.approvals||[]).concat(t?{user:e}:{group:e})})})),p(this,"removeOwner",((e,t=!0)=>{this.setState({approvals:(this.state.approvals||[]).filter((a=>t?a.user!==e:a.group!==e))})})),p(this,"getApprovals",((e,t)=>e.filter((e=>t.find((t=>t.user===e.id)))))),p(this,"getGroupApprovals",((e,t)=>e.filter((e=>t.find((t=>t.group===e.id)))))),p(this,"save",(()=>{const e=this.state,t=e.approvals,a=e.description,n=e.live_from,r=e.title;this.props.onSave({approvals:t,description:a,live_from:n||void 0,title:r})}))}render(){const e=this.state,t=e.description,a=e.title;return r.default.createElement(o.default,null,(({groups:e,users:n})=>{const o=this.getGroupApprovals(e,this.state.approvals||[]),c=this.getApprovals(n,this.state.approvals||[]);return r.default.createElement("div",null,r.default.createElement(FormGroup,{className:"mb-4"},r.default.createElement(InputGroup,{value:this.state.title,onChange:e=>this.setState({title:Utils.safeParseEventValue(e)}),isValid:a&&a.length,type:"text",title:"Title",inputProps:{className:"full-width"},className:"full-width",placeholder:"My Change Request"})),r.default.createElement(FormGroup,{className:"mb-4"},r.default.createElement(InputGroup,{textarea:!0,value:t,onChange:e=>this.setState({description:Utils.safeParseEventValue(e)}),type:"text",title:"Description",inputProps:{className:"full-width",style:{minHeight:80}},className:"full-width",placeholder:"Add an optional description..."})),r.default.createElement("div",null,r.default.createElement(InputGroup,{tooltip:"Allows you to set a date and time in which your change will only become active ",title:"Schedule Change",component:r.default.createElement(Row,null,r.default.createElement(Flex,null,r.default.createElement(i.default,{minDate:new Date,onChange:e=>{this.setState({live_from:e.toISOString()})},showTimeInput:!0,selected:moment(this.state.live_from)._d,value:this.state.live_from?`${moment(this.state.live_from).format("Do MMM YYYY hh:mma")} (${Intl.DateTimeFormat().resolvedOptions().timeZone})`:"Immediately"})),r.default.createElement(ButtonLink,{className:"ml-2",onClick:()=>{this.setState({live_from:null})}},"Clear"))})),!this.props.changeRequest&&this.props.showAssignees&&(!Utils.getFlagsmithHasFeature("disable_users_as_reviewers")||Utils.getFlagsmithHasFeature("enable_groups_as_reviewers"))&&r.default.createElement(FormGroup,{className:"mb-4"},r.default.createElement(InputGroup,{component:r.default.createElement("div",null,!Utils.getFlagsmithHasFeature("disable_users_as_reviewers")&&r.default.createElement(Row,null,r.default.createElement("strong",{style:{width:70}}," Users: "),c.map((e=>r.default.createElement(Row,{key:e.id,onClick:()=>this.removeOwner(e.id),className:"chip chip--active",style:{marginBottom:4,marginTop:4}},r.default.createElement("span",{className:"font-weight-bold"},e.first_name," ",e.last_name),r.default.createElement("span",{className:"chip-icon ion ion-ios-close"})))),r.default.createElement(l.default,{className:"btn--link btn--link-primary",onClick:()=>this.setState({showUsers:!0})},"Add user")),Utils.getFlagsmithHasFeature("enable_groups_as_reviewers")&&r.default.createElement(Row,null,r.default.createElement("strong",{style:{width:70}}," Groups: "),o.map((e=>r.default.createElement(Row,{key:e.id,onClick:()=>this.removeOwner(e.id,!1),className:"chip chip--active",style:{marginBottom:4,marginTop:4}},r.default.createElement("span",{className:"font-weight-bold"},e.name),r.default.createElement("span",{className:"chip-icon ion ion-ios-close"})))),r.default.createElement(l.default,{className:"btn--link btn--link-primary",onClick:()=>this.setState({showGroups:!0})},"Add group"))),onChange:e=>this.setState({description:Utils.safeParseEventValue(e)}),type:"text",title:"Assignees",tooltipPlace:"top",tooltip:"Assignees will be able to review and approve the change request",inputProps:{className:"full-width",style:{minHeight:80}},className:"full-width",placeholder:"Add an optional description..."})),!this.props.changeRequest&&!Utils.getFlagsmithHasFeature("disable_users_as_reviewers")&&r.default.createElement(s.default,{users:n.filter((e=>e.id!==AccountStore.getUser().id)),value:this.state.approvals.map((e=>e.user)),onAdd:this.addOwner,onRemove:this.removeOwner,isOpen:this.state.showUsers,onToggle:()=>this.setState({showUsers:!this.state.showUsers})}),!this.props.changeRequest&&Utils.getFlagsmithHasFeature("enable_groups_as_reviewers")&&r.default.createElement(u.default,{groups:e,selectedGroups:this.state.approvals.map((e=>e.group)),onAdd:this.addOwner,onRemove:this.removeOwner,isOpen:this.state.showGroups,onToggle:()=>this.setState({showGroups:!this.state.showGroups})}),r.default.createElement(FormGroup,{className:"text-right mt-2"},r.default.createElement(l.default,{id:"confirm-cancel-plan",className:"btn btn-primary",disabled:!a,onClick:this.save},this.props.changeRequest?"Update":"Create")))}))}},p(n,"displayName","ChangeRequestModal"),p(n,"contextTypes",{router:propTypes.object.isRequired}),n);t.default=m},45595:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}(a(96540));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}function s(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const o=(n=class extends r.Component{constructor(e,t){super(e,t),s(this,"submit",(e=>{const t=this.props.projectFlag;e.preventDefault(),this.state.challenge==t.name&&(this.close(),this.props.cb())})),this.state={name:e.name}}close(){closeModal()}render(){const e=this.props,t=e.identity,a=e.projectFlag;return r.default.createElement(ProjectProvider,null,(()=>r.default.createElement("form",{id:"confirm-remove-feature-modal",onSubmit:this.submit},t?r.default.createElement("p",null,"This will reset ",r.default.createElement("strong",null,a.name)," for to the environment defaults for the user ",r.default.createElement("strong",null,t)):r.default.createElement("p",null,"This will remove ",r.default.createElement("strong",null,a.name)," for project"," ",r.default.createElement("strong",null,this.props.projectName||"the current project"),". You should ensure that you do not contain any references to this this feature in your applications before proceeding."),r.default.createElement(InputGroup,{inputProps:{className:"full-width",name:"confirm-feature-name"},title:"Please type the feature name to confirm",placeholder:"feature_name",onChange:e=>this.setState({challenge:Utils.safeParseEventValue(e)})}),r.default.createElement(FormGroup,{className:"text-right mt-2"},r.default.createElement(Button,{id:"confirm-remove-feature-btn",disabled:this.state.challenge!=a.name,className:"btn btn-primary"},"Confirm changes")))))}},s(n,"displayName","ConfirmRemoveFeature"),n);o.propTypes={},e.exports=o},7696:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,a&&a.set(e,n),n}(a(96540));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}function s(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const o=(n=class extends r.Component{constructor(e,t){super(e,t),s(this,"submit",(e=>{const t=this.props.segment;e.preventDefault(),this.state.challenge==t.name&&(this.close(),this.props.cb())})),this.state={name:e.name}}close(){closeModal()}render(){const e=this.props.segment;return r.default.createElement(ProjectProvider,null,(()=>r.default.createElement("form",{id:"confirm-remove-segment-modal",onSubmit:this.submit},r.default.createElement("p",null,"This will remove ",r.default.createElement("strong",null,e.name)," for"," ",r.default.createElement("strong",null,"all environments"),". You should ensure that you do not contain any references to this segment in your applications before proceeding."),r.default.createElement(InputGroup,{inputProps:{className:"full-width",name:"confirm-segment-name"},title:"Please type the segment name to confirm",placeholder:"segment_name",onChange:e=>this.setState({challenge:Utils.safeParseEventValue(e)})}),r.default.createElement(FormGroup,{className:"text-right"},r.default.createElement(Button,{"data-test":"confirm-remove-segment-btn",id:"confirm-remove-segment-btn",disabled:this.state.challenge!=e.name,className:"btn btn-primary"},"Confirm changes")))))}},s(n,"displayName","ConfirmRemoveSegment"),n);o.propTypes={};t.default=o},93655:(e,t,a)=>{"use strict";var n,r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),s=(n=a(72119))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}const l=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(r=class extends i.Component{constructor(e,t){super(e,t),this.state={name:e.name}}close(){closeModal()}render(){const e=this.props,t=e.environmentFlag,a=e.identity,n=e.projectFlag,r=!(!t||!t.enabled);return i.default.createElement(ProjectProvider,null,(({project:e})=>i.default.createElement("div",{id:"confirm-toggle-feature-modal"},i.default.createElement("p",null,"This will turn"," ",i.default.createElement("strong",null,s.default.enumeration.get(n.name))," ",r?i.default.createElement("span",{className:"feature--off"},i.default.createElement("strong",null,'"Off"')):i.default.createElement("span",{className:"feature--on"},i.default.createElement("strong",null,'"On"'))," ","for the project ",i.default.createElement("strong",null,e.name),a&&i.default.createElement("span",null," ","user ",i.default.createElement("strong",null,this.props.identityName,".")," Any segment overrides for this feature will now be ignored.")),i.default.createElement(FormGroup,{className:"text-right"},i.default.createElement(Button,{onClick:()=>{this.close(),this.props.cb(this.state.allEnvironments?e.environments:[_.find(e.environments,{api_key:this.props.environmentId})])},className:"btn btn-primary",id:"confirm-toggle-feature-btn"},"Confirm changes")))))}},"displayName","ConfirmToggleFeature"),r);l.propTypes={},e.exports=l},26851:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=j(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=I(a(74187)),s=I(a(12339)),o=I(a(98606)),l=I(a(91646)),u=I(a(23186)),c=I(a(4478)),d=a(5433),p=I(a(74728)),m=I(a(27456)),f=I(a(12564)),g=I(a(97286)),h=(I(a(50058)),I(a(51102))),v=I(a(68447)),E=I(a(47292)),y=(a(54242),a(40733)),b=I(a(32485)),w=I(a(25497)),A=I(a(45809)),O=I(a(78605)),S=I(a(93328)),T=I(a(58176)),P=I(a(78874)),N=I(a(5556));function I(e){return e&&e.__esModule?e:{default:e}}function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(j=function(e){return e?a:t})(e)}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},F.apply(this,arguments)}function R(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const C=(n=class extends r.Component{constructor(e,t){super(e,t),R(this,"onClosing",(()=>this.props.isEdit?new Promise((e=>{this.state.valueChanged||this.state.segmentsChanged||this.state.settingsChanged?openConfirm("Are you sure","Closing this will discard your unsaved changes.",(()=>e(!0)),(()=>e(!1)),"Ok","Cancel"):e(!0)})):Promise.resolve(!0))),R(this,"componentDidMount",(()=>{(0,y.setInterceptClose)(this.onClosing),this.props.isEdit||(this.focusTimeout=setTimeout((()=>{this.input.focus(),this.focusTimeout=null}),500)),!Project.disableAnalytics&&this.props.projectFlag&&this.props.environmentFlag&&this.getFeatureUsage()})),R(this,"userOverridesPage",(e=>{Utils.getIsEdge()||o.default.get(`${Project.api}environments/${this.props.environmentId}/${Utils.getFeatureStatesEndpoint()}/?anyIdentity=1&feature=${this.props.projectFlag.id}&page=${e}`).then((t=>{this.setState({userOverrides:t.results,userOverridesPaging:{count:t.count,currentPage:e,next:t.next}})}))})),R(this,"getFeatureUsage",(()=>{Utils.getFlagsmithHasFeature("flag_analytics")&&this.props.environmentFlag&&AppActions.getFeatureUsage(this.props.projectId,this.props.environmentFlag.environment,this.props.projectFlag.id,this.state.period)})),R(this,"save",((e,t)=>{const a=this.props,n=a.environmentFlag,r=a.environmentId,i=a.identity,s=a.identityFlag,o=a.projectFlag,l=a.segmentOverrides,u=this.state,d=u.default_enabled,p=u.description,m=u.hide_from_client,f=u.initial_value,g=u.is_archived,h=u.is_server_key_only,v=u.name,E=F({skipSaveProjectFeature:this.state.skipSaveProjectFeature},o),y=this.props.environmentFlag&&this.props.environmentFlag.multivariate_feature_state_values&&this.props.environmentFlag.multivariate_feature_state_values.length;i?!t&&v&&e({environmentFlag:n,environmentId:r,identity:i,identityFlag:Object.assign({},s||{},{enabled:d,feature_state_value:y?this.props.environmentFlag.feature_state_value:f,multivariate_options:this.state.identityVariations}),projectFlag:E}):(c.default.isSaving=!0,c.default.trigger("change"),!t&&v&&e(this.props.projectId,this.props.environmentId,{default_enabled:d,description:p,hide_from_client:m,initial_value:f,is_archived:g,is_server_key_only:h,multivariate_options:this.state.multivariate_options,name:v,tags:this.state.tags},E,n,l))})),R(this,"changeSegment",(e=>{const t=this.state.enabledSegment;e.forEach((e=>{e.enabled=t})),this.props.updateSegments(e),this.setState({enabledSegment:!t})})),R(this,"changeIdentity",(e=>{const t=this.props.environmentId,a=this.state.enabledIndentity;Promise.all(e.map((e=>new Promise((n=>{AppActions.changeUserFlag({environmentId:t,identity:e.identity.id,identityFlag:e.id,onSuccess:n,payload:{enabled:a,id:e.identity.id,value:e.identity.identifier}})}))))).then((()=>{this.userOverridesPage(1)})),this.setState({enabledIndentity:!a})})),R(this,"toggleUserFlag",(({enabled:e,id:t,identity:a})=>{const n=this.props.environmentId;AppActions.changeUserFlag({environmentId:n,identity:a.id,identityFlag:t,onSuccess:()=>{this.userOverridesPage(1)},payload:{enabled:!e,id:a.id,value:a.identifier}})})),R(this,"drawChart",(e=>e?.length?r.default.createElement(d.ResponsiveContainer,{height:400,width:"100%"},r.default.createElement(d.BarChart,{data:e},r.default.createElement(d.CartesianGrid,{strokeDasharray:"3 5"}),r.default.createElement(d.XAxis,{interval:0,height:100,angle:-90,textAnchor:"end",allowDataOverflow:!1,dataKey:"day"}),r.default.createElement(d.YAxis,{allowDataOverflow:!1}),r.default.createElement(d.Tooltip,null),r.default.createElement(d.Bar,{dataKey:"count",stackId:"a",fill:"#6633ff"}))):r.default.createElement("div",{className:"text-center"},"There has been no activity for this flag within the past month. Find out about Flag Analytics"," ",r.default.createElement("a",{target:"_blank",href:"https://docs.flagsmith.com/advanced-use/flag-analytics",rel:"noreferrer"},"here"),"."))),R(this,"addItem",(()=>{const e=this.props,t=e.environmentFlag,a=e.environmentId,n=e.identity,r=e.projectFlag;this.setState({isLoading:!0});const i=this.state.selectedIdentity.value,s=n?n.identifier:[];_.find(s,(e=>e.identifier===i))?this.setState({isLoading:!1,selectedIdentity:null}):o.default.post(`${Project.api}environments/${a}/${Utils.getIdentitiesEndpoint()}/${i}/${Utils.getFeatureStatesEndpoint()}/`,{enabled:!t.enabled,feature:r.id,feature_state_value:this.state.initial_value??null}).then((()=>{this.setState({isLoading:!1,selectedIdentity:null}),this.userOverridesPage(1)})).catch((e=>{this.setState({error:e,isLoading:!1})}))})),R(this,"addVariation",(e=>{const t=this.state.multivariate_options.length+this.state.archieved_multivariate_options.length+1;this.setState({multivariate_options:this.state.multivariate_options.concat([F({},Utils.valueToFeatureState(e??""),{default_percentage_allocation:0,name:`Variation name ${t}`,tempId:t})]),valueChanged:!0})})),R(this,"restoreVariation",((e,t)=>{o.default.post(`${Project.api}projects/${this.props.projectId}/features/${this.props.projectFlag.id}/mv-options/`,F({},e,{feature:this.props.projectFlag.id})).then((e=>{this.setState((t=>({multivariate_options:[...t.multivariate_options,e],multivariateErrors:[],valueChanged:!0})),(()=>{this.forceUpdate()})),this.state.archieved_multivariate_options.splice(t,1),this.setState((e=>({archieved_multivariate_options:[...e.archieved_multivariate_options]})),(()=>{this.forceUpdate(),AppActions.refreshFeatures(this.props.projectId,this.props.environmentId)}))}))})),R(this,"restoreVariationModal",((e,t)=>{openConfirm("Please confirm",r.default.createElement("span",null,"This will restore archived variation ",r.default.createElement("strong",null,e.name),"."),(()=>{this.restoreVariation(e,t)}))})),R(this,"duplicateVariation",(e=>{this.addVariation(e)})),R(this,"removeVariation",((e,t)=>{if(this.props.isEdit&&this.state.multivariate_options[e].custom_id)o.default.delete(`${Project.api}projects/${this.props.projectId}/features/${this.props.projectFlag.id}/mv-options/${t}/`).then((()=>{P.default.saving(),o.default.get(`${Project.api}projects/${this.props.projectId}/features/${this.props.projectFlag.id}/`).then((t=>{this.state.multivariate_options.splice(e,1),P.default.model.lastSaved=(new Date).valueOf(),P.default.saved(),this.setState((e=>({archieved_multivariate_options:t.archieved_multivariate_options,multivariateErrors:[],multivariate_options:e.multivariate_options,valueChanged:!0})),(()=>{this.forceUpdate(),AppActions.refreshFeatures(this.props.projectId,this.props.environmentId)}))})).catch((e=>API.ajaxHandler(c.default,e)))}));else if(this.state.multivariate_options[e]){const t=[...this.state.multivariate_options];t.splice(e,1);const a=t.filter((e=>!e.custom_id)),n=t.filter((e=>e.custom_id));let r=1;this.props.isEdit&&(r=n.length+this.state.archieved_multivariate_options.length+1);const i=a.map((e=>F({},e,{name:`Variation name ${r}`,tempId:r++}))),s=t.map((e=>e.custom_id?e:i.shift()));this.setState({multivariate_options:s,valueChanged:!0}),this.forceUpdate(),P.default.trigger("refresh")}this.state.valueChanged=!0})),R(this,"updateVariation",((e,t,a)=>{this.setState({multivariateErrors:[]}),this.props.onEnvironmentVariationsChange(a),this.state.multivariate_options[e]=t,this.state.valueChanged=!0,this.forceUpdate()})),R(this,"getVariationOptionValue",(e=>JSON.stringify(Utils.featureStateToValue(e)).trim())),R(this,"validateVariationNamesAndValues",(()=>{const e=this.state,t=e.archieved_multivariate_options,a=e.multivariate_options,n=[...t,...a],i={},s=a.filter((e=>!!e.custom_id||(i[this.getVariationOptionValue(e)]=e,!1))).filter((e=>{const t=this.getVariationOptionValue(e);return i[t]})).map((e=>e.name)),o=n.map((e=>e.name)).filter(((e,t,a)=>a.indexOf(e)!==t)),l=t.filter((e=>{const t=this.getVariationOptionValue(e);return i[t]})),u=a.find((e=>{if(JSON.stringify(this.state.initial_value)===this.getVariationOptionValue(e))return e})),c=[];return o.length&&c.push(`Error: Variation ${[...new Set(o)].join(", ")} with same name already exists`),s.length&&c.push(`Error: Variation ${[...new Set(s)].join(", ")} with same value already exists`),u&&c.push(`Error: Control value is used in variation ${u.name}`),[...c,...l.map((e=>{const t=e.index;return delete e.index,r.default.createElement("div",{key:t},"Duplicate value ",r.default.createElement("strong",null,e.name)," founded in archive."," ",r.default.createElement(Button,{onClick:()=>this.restoreVariation(e,t)},"Restore?"))}))]})),R(this,"segmentOverridesIsValid",(()=>{const e=this.props.segmentOverrides,t=e?.filter((e=>Utils.calculateControl(e.multivariate_options)<0));return t?.length||e?.filter((e=>!(null!=e?.value&&`${e?.value}`)))?.length})),R(this,"validateValues",(()=>{const e=this.state,t=e.initial_value,a=e.multivariate_options,n=!!a.find((e=>{const t=Utils.featureStateToValue(e);return!(null!==t&&`${t}`)}));if(a.some((e=>""===e.name)))return!0;if(null==t&&null!==this.props.environmentFlag?.feature_state_value&&void 0!==this.props.environmentFlag?.feature_state_value&&`${this.props.environmentFlag?.feature_state_value}`&&this.props.environmentFlag?.multivariate_feature_state_values?.length)return!1;const r=Utils.calculateControl(a);return!!a&&a.length&&r<0||n||!(null!=t&&`${t}`)})),R(this,"onSaveHandler",(()=>{const e=this.props,t=e.isEdit,a=e.identity,n=e.projectId,r=e.environmentId;t&&!a||this.close(),AppActions.refreshFeatures(n,r)})),R(this,"createSaveHandlers",((e,t)=>{const a=e.editFeatureSegments,n=e.editFeatureSettings,r=e.editFeatureValue,i=e.createFlag,s=e.createChangeRequest;return{saveFeatureValue:e=>this.saveFeature(e,s,r,t),saveSettings:()=>this.save(n,t),saveFeatureSegments:()=>this.save(a,t),onCreateFeature:()=>this.save(i,t)}}));const a=this.props.isEdit?Utils.getFlagValue(this.props.projectFlag,this.props.environmentFlag,this.props.identityFlag):{archieved_multivariate_options:[],multivariate_options:[]},n=a.archieved_multivariate_options,i=a.description,s=a.enabled,l=a.feature_state_value,u=a.hide_from_client,p=a.is_archived,m=a.is_server_key_only,f=a.multivariate_options,g=a.name,h=a.tags,v=this.props.allowEditDescription;this.props.projectFlag&&this.userOverridesPage(1),this.state={allowEditDescription:v,archieved_multivariate_options:_.cloneDeep(n),default_enabled:s,description:i,enabledIndentity:!1,enabledSegment:!1,hide_from_client:u,identityVariations:this.props.identityFlag&&this.props.identityFlag.multivariate_feature_state_values?_.cloneDeep(this.props.identityFlag.multivariate_feature_state_values):[],initial_value:void 0===l?void 0:Utils.getTypedValue(l),is_archived:p,is_server_key_only:m,lastSaved:c.default.getLastSaved(),multivariateErrors:[],multivariate_options:_.cloneDeep(f),name:g,period:30,selectedIdentity:null,tab:Utils.fromParam().tab||0,tags:h||[]},AppActions.getGroups(AccountStore.getOrganisation().id),ES6Component(this),this.listenTo(c.default,"change",(()=>{this.setState({lastSaved:c.default.getLastSaved()})}))}close(){closeModal()}componentDidUpdate(e,t){const a=this.props,n=a.identity,r=a.environmentVariations,i=a.projectFlag;a.multivariate_options;n||r===e.environmentVariations?!n&&this.state.lastSaved!==t.lastSaved&&i&&this.updateMultivariateOptions():this.updateMultivariateOptions()}updateMultivariateOptions(){const e=this.props,t=e.projectFlag,a=e.environmentVariations,n=e.multivariate_options;if(a&&a.length){const e=c.default.getProjectFlags(),r=e&&e.find((e=>e.id===t.id))?.multivariate_options||[];this.setState({multivariate_options:r.map((e=>{const t=(n||a).find((t=>t.multivariate_feature_option===e.id));return F({},e,{default_percentage_allocation:e.default_percentage_allocation||t&&t.percentage_allocation||0})}))})}}componentWillUnmount(){this.focusTimeout&&clearTimeout(this.focusTimeout)}validateRegex(e,t,a){try{return!(!a&&e&&t)||e.match(new RegExp(t))}catch(e){return!1}}renderSettings(e,t){return r.default.createElement(S.default,{level:"project",permission:"ADMIN",id:this.props.projectId},(({permission:a})=>r.default.createElement(r.default.Fragment,null,a&&t&&r.default.createElement(h.default,{projectId:this.props.projectId,id:t.id}),r.default.createElement(FormGroup,{className:"mb-4 mr-3 ml-3"},r.default.createElement(InputGroup,{value:e,"data-test":"featureDesc",inputProps:{className:"full-width",name:"featureDesc"},onChange:e=>this.setState({description:Utils.safeParseEventValue(e),settingsChanged:!0}),type:"text",title:"Description (optional)",placeholder:"e.g. 'This determines what size the header is' "})))))}renderValueSettings({error:e,projectAdmin:t,createFeature:a,hideValue:n}){return r.default.createElement(FormGroup,{className:"mb-4 mr-3 mt-2 ml-3"},r.default.createElement(InputGroup,{ref:e=>this.input=e,"data-test":"featureID",inputProps:{className:"full-width",maxLength:s.default.forms.maxLength.FEATURE_ID,name:"featureID",readOnly:this.props.isEdit},value:this.state.name,onChange:e=>this.handleNameChange(e),isValid:!!this.state.name&&this.regexValid,type:"text",title:"ID*",placeholder:"E.g. header_size"}),e&&r.default.createElement(O.default,{error:e.name?.[0]}))}handleNameChange(e){const t=Utils.safeParseEventValue(e).replace(/ /g,"_"),a=Utils.getFlagsmithHasFeature("case_sensitive_flags")&&l.default.model?.only_allow_lower_case_feature_names;this.setState({name:a?t.toLowerCase():t})}renderTabs(e,t,a,n,i,s){return r.default.createElement(m.default,{value:this.state.tab,onChange:e=>this.setState({tab:e})},r.default.createElement(f.default,{"data-test":"value",tabLabel:this.renderTabLabel("Value",this.state.valueChanged)},r.default.createElement(FormGroup,{className:"mr-3 ml-3"},r.default.createElement(Panel,{title:this.renderFeaturePanelTitle(e)},i,this.props.isEdit&&this.renderJSONReference()),this.renderSaveButton(t,a,n))),this.renderSegmentOverridesTab(a),!this.props.identity&&this.renderIdentityOverridesTab())}renderTabLabel(e,t){return r.default.createElement(Row,{className:"justify-content-center"},e,t&&r.default.createElement("div",{className:"unread ml-2 px-1"},"*"))}renderFeaturePanelTitle(e){const t=_.find(e.environments,{api_key:this.props.environmentId})?.name;return r.default.createElement(Tooltip,{title:r.default.createElement("h6",{className:"mb-0"},"Feature Value ",r.default.createElement("span",{className:"icon ion-ios-information-circle"})),place:"top"},s.default.strings.ENVIRONMENT_OVERRIDE_DESCRIPTION(t))}renderJSONReference(){return r.default.createElement(r.default.Fragment,null,r.default.createElement(A.default,{showNamesButton:!0,title:"Feature",json:this.props.projectFlag}),r.default.createElement(A.default,{title:"Feature state",json:this.props.environmentFlag}))}renderSaveButton(e,t,a){return r.default.createElement(S.default,{level:"environment",permission:Utils.getManageFeaturePermission(t,this.props.identity),id:this.props.environmentId},(({permission:t})=>Utils.renderWithPermission(t,s.default.environmentPermissions("Write"),r.default.createElement("div",{className:"text-right"},r.default.createElement(Button,{onClick:()=>e(),disabled:!t||this.state.isSaving||!this.state.name||this.isValuesValid()},this.state.isSaving?a?"Updating Change Request":"Creating Change Request":"Update Feature")))))}renderSegmentOverridesTab(e){return r.default.createElement(f.default,{"data-test":"segment_overrides",tabLabel:this.renderTabLabel("Segments",this.state.segmentsChanged)},r.default.createElement(FormGroup,{className:"mb-4 mr-3 ml-3"},r.default.createElement(Panel,{title:this.renderSegmentOverridesTitle()},r.default.createElement(g.default,F({},this.props,{onChange:e=>this.handleSegmentChange(e)})),!this.state.showCreateSegment&&this.renderSegmentOverridesFooter(e))))}renderSegmentOverridesTitle(){return r.default.createElement(Tooltip,{title:r.default.createElement("h6",{className:"mb-0"},"Segment Overrides ",r.default.createElement("span",{className:"icon ion-ios-information-circle"})),place:"right"},s.default.strings.SEGMENT_OVERRIDES_DESCRIPTION)}handleSegmentChange(e){this.setState({segmentsChanged:!0}),this.props.updateSegments(e)}renderSegmentOverridesFooter(e){return r.default.createElement("div",null,r.default.createElement("p",{className:"text-right mt-4"},e?"This will create a change request for the environment":"This will update the segment overrides for the app"),r.default.createElement(S.default,{level:"environment",permission:Utils.getManageFeaturePermission(e,this.props.identity),id:this.props.environmentId},(({permission:e})=>Utils.renderWithPermission(e,s.default.environmentPermissions("Write"),r.default.createElement("div",{className:"text-right"},r.default.createElement(Button,{onClick:this.saveFeatureSegments,disabled:this.state.isSaving||!this.state.name||this.segmentOverridesIsValid()||!e},this.state.isSaving?"Updating":"Update Segment Overrides"))))))}renderCreateFeatureTab(e,t,a,n){return r.default.createElement("div",{className:this.props.isEdit?"":"create-feature-tab"},e,r.default.createElement("div",{className:"text-right mr-3"},r.default.createElement(Button,{onClick:n,disabled:this.state.isSaving||!this.state.name||this.isValuesValid()||!a},this.state.isSaving?"Creating":"Create Feature")))}renderIdentitySection(e,t,a,n,i){return r.default.createElement("div",{className:"pr-3"},r.default.createElement("p",{className:"text-left ml-3"},"This will update the feature value for the device ",r.default.createElement("strong",null,e),". Any segment overrides for this feature will now be ignored."),r.default.createElement("div",{className:"text-right mb-2"},r.default.createElement(Button,{onClick:()=>t(),disabled:a||!n||i},a?"Updating":"Update Feature")))}render(){const e=this.state,t=e.archieved_multivariate_options,a=e.default_enabled,n=e.description,i=e.enabledIndentity,o=e.enabledSegment,u=e.hide_from_client,c=e.initial_value,d=e.multivariate_options,y=e.multivariateErrors,P=e.name,N=this.validateValues(),I=this.segmentOverridesIsValid(),j=s.default.forms.maxLength.FEATURE_ID,R=this.props,C=R.identity,k=R.identityName,M=R.isEdit,$=R.projectFlag,D=C?IdentityProvider:FeatureListProvider,x=this.props.environmentVariations,U=l.default.getEnvironment(this.props.environmentId),L=!!U&&Utils.changeRequestsEnabled(U.minimum_change_request_approvals),V=(Utils.getPlansPermission("SCHEDULE_FLAGS"),L&&Utils.getFlagsmithHasFeature("4eyes_segment_overrides")),G=l.default.model,B=Utils.getFlagsmithHasFeature("case_sensitive_flags")&&G?.only_allow_lower_case_feature_names,W=G?.feature_name_regex,H=this.props.changeRequest,q=Utils.getShouldHideIdentityOverridesTab(),Y=this.props.noPermissions;let z=!0;try{!M&&P&&W&&(z=P.match(new RegExp(W)))}catch(e){z=!1}const J=(e,t)=>r.default.createElement(r.default.Fragment,null,!C&&$&&r.default.createElement(S.default,{level:"project",permission:"ADMIN",id:this.props.projectId},(({permission:e})=>e&&r.default.createElement(FormGroup,{className:"mb-4 mr-3 ml-3"},r.default.createElement(h.default,{projectId:this.props.projectId,id:$.id})))),r.default.createElement(FormGroup,{className:"mb-4 mr-3 ml-3"},r.default.createElement(InputGroup,{value:n,"data-test":"featureDesc",inputProps:{className:"full-width",name:"featureDesc"},onChange:e=>this.setState({description:Utils.safeParseEventValue(e),settingsChanged:!0}),ds:!0,type:"text",title:C?"Description":"Description (optional)",placeholder:"e.g. 'This determines what size the header is' "})),!C&&M&&r.default.createElement(FormGroup,{className:"mb-4 mr-3 ml-3"},r.default.createElement(InputGroup,{value:n,component:r.default.createElement(Switch,{checked:this.state.is_archived,onChange:e=>this.setState({is_archived:e,settingsChanged:!0})}),onChange:e=>this.setState({description:Utils.safeParseEventValue(e)}),type:"text",title:"Archived",tooltip:"Archiving a flag allows you to filter out flags from the Flagsmith dashboard that are no longer relevant.<br/>An archived flag will still return as normal in all SDK endpoints.",placeholder:"e.g. 'This determines what size the header is' "})),!C&&Utils.getFlagsmithHasFeature("hide_flag")&&r.default.createElement(FormGroup,{className:"mb-4 mr-3 ml-3"},r.default.createElement(Tooltip,{title:r.default.createElement("label",{className:"cols-sm-2 control-label"},"Hide from SDKs"," ",r.default.createElement("span",{className:"icon ion-ios-information-circle"})),place:"right"},s.default.strings.HIDE_FROM_SDKS_DESCRIPTION),r.default.createElement("div",null,r.default.createElement(Switch,{"data-test":"toggle-feature-button",defaultChecked:u,checked:u,onChange:e=>this.setState({hide_from_client:e})})))),Q=(e,i,s,o)=>r.default.createElement(r.default.Fragment,null,!M&&r.default.createElement(FormGroup,{className:"mb-4 mr-3 mt-2 ml-3"},r.default.createElement(InputGroup,{ref:e=>this.input=e,"data-test":"featureID",inputProps:{className:"full-width",maxLength:j,name:"featureID",readOnly:M},value:P,onChange:e=>{const t=Utils.safeParseEventValue(e).replace(/ /g,"_");this.setState({name:B?t.toLowerCase():t})},isValid:!!P&&z,type:"text",title:r.default.createElement(r.default.Fragment,null,M?"ID":"ID*",!!W&&!M&&r.default.createElement("div",{className:"mt-2"}," ",r.default.createElement(w.default,null," ","This must conform to the regular expression"," ",r.default.createElement("code",null,W)))),placeholder:"E.g. header_size"}),r.default.createElement(O.default,{error:e?.name?.[0]})),C&&n&&r.default.createElement(FormGroup,{className:"mb-4 mt-2 mr-3 ml-3"},r.default.createElement(InputGroup,{value:n,"data-test":"featureDesc",inputProps:{className:"full-width",name:"featureDesc",readOnly:!!C||Y,valueChanged:!0},onChange:e=>this.setState({description:Utils.safeParseEventValue(e)}),type:"text",title:C?"Description":"Description (optional)",placeholder:"No description"})),!o&&r.default.createElement("div",{className:C&&!n?"mt-2":""},r.default.createElement(E.default,{archieved_multivariate_options:t,duplicateVariation:this.duplicateVariation,restoreVariation:this.restoreVariationModal,readOnly:Y,hide_from_client:u,multivariateErrors:y,multivariate_options:d,environmentVariations:x,isEdit:M,error:e?.initial_value?.[0],canCreateFeature:s,identity:C,removeVariation:this.removeVariation,updateVariation:this.updateVariation,addVariation:this.addVariation,checked:a,value:c,identityVariations:this.state.identityVariations,onChangeIdentityVariations:e=>{this.setState({identityVariations:e,valueChanged:!0})},environmentFlag:this.props.environmentFlag,projectFlag:$,onValueChange:e=>{const t=Utils.getTypedValue((0,p.default)(Utils.safeParseEventValue(e),{allowedAttributes:{},allowedTags:[]}));this.setState({initial_value:t,valueChanged:!0})},onCheckedChange:e=>this.setState({default_enabled:e})})),!M&&!C&&J());return r.default.createElement(ProjectProvider,{id:this.props.projectId},(({project:e})=>r.default.createElement(D,{onSave:()=>{M&&!C||this.close(),AppActions.refreshFeatures(this.props.projectId,this.props.environmentId)}},(({error:t,isSaving:a,usageData:n},{createChangeRequest:l,createFlag:u,editFeatureSegments:p,editFeatureSettings:h,editFeatureValue:E})=>{const w=e=>{const t=this.validateVariationNamesAndValues();this.props.identity||!t.length?(this.setState({valueChanged:!1}),!L&&!e||C?document.getElementById("language-validation-error")?openConfirm("Validation error","Your remote config value does not pass validation for the language you have selected. Are you sure you wish to save?",(()=>{this.save(E,a)}),null,"Save","Cancel"):this.save(E,a):openModal2(e?"New Scheduled Flag Update":this.props.changeRequest?"Update Change Request":"New Change Request",r.default.createElement(v.default,{showAssignees:L,changeRequest:this.props.changeRequest,onSave:({approvals:e,description:t,live_from:a,title:n})=>{closeModal2(),this.save(((r,i,s,o,u,c)=>{l(r,i,s,o,u,c,{approvals:e,description:t,featureStateId:this.props.changeRequest&&this.props.changeRequest.feature_states[0].id,id:this.props.changeRequest&&this.props.changeRequest.id,live_from:a,multivariate_options:this.props.multivariate_options?this.props.multivariate_options.map((e=>{const t=this.state.multivariate_options.find((t=>t.id===e.multivariate_feature_option));return F({},e,{percentage_allocation:t.default_percentage_allocation})})):this.state.multivariate_options,title:n},!L)}))}}))):this.setState({multivariateErrors:t})},O=()=>{this.setState({segmentsChanged:!1}),this.save(p,a)},j=()=>{this.save(u,a)};return r.default.createElement(S.default,{level:"project",permission:"CREATE_FEATURE",id:this.props.projectId},(({permission:n})=>r.default.createElement(S.default,{level:"project",permission:"ADMIN",id:this.props.projectId},(({permission:l})=>(this.state.skipSaveProjectFeature=!n,r.default.createElement("div",{id:"create-feature-modal","data-test":"create-feature-modal"},M&&!C?r.default.createElement(m.default,{value:this.state.tab,onChange:e=>this.setState({tab:e})},r.default.createElement(f.default,{"data-test":"value",tabLabel:r.default.createElement(Row,{className:"justify-content-center"},"Value"," ",this.state.valueChanged&&r.default.createElement("div",{className:"unread ml-2 px-1"},"*"))},r.default.createElement(FormGroup,{className:"mr-3 ml-3"},r.default.createElement(Panel,{title:r.default.createElement(Tooltip,{title:r.default.createElement("h6",{className:"mb-0"},"Feature Value"," ",r.default.createElement("span",{className:"icon ion-ios-information-circle"})),place:"top"},s.default.strings.ENVIRONMENT_OVERRIDE_DESCRIPTION(_.find(e.environments,{api_key:this.props.environmentId}).name))},Q(t,0,n),M&&r.default.createElement(r.default.Fragment,null,r.default.createElement(A.default,{showNamesButton:!0,title:"Feature",json:$}),r.default.createElement(A.default,{title:"Feature state",json:this.props.environmentFlag}))),r.default.createElement(S.default,{level:"environment",permission:Utils.getManageFeaturePermission(L,C),id:this.props.environmentId},(({permission:e})=>Utils.renderWithPermission(e,s.default.environmentPermissions("Write"),r.default.createElement("div",{className:"text-right"},L?r.default.createElement(Button,{onClick:()=>w(),type:"button","data-test":"update-feature-btn",id:"update-feature-btn",disabled:!e||a||!P||N},a?H?"Updating Change Request":"Creating Change Request":H?"Update Change Request":"Create Change Request"):r.default.createElement(Button,{onClick:()=>w(),type:"button","data-test":"update-feature-btn",id:"update-feature-btn",disabled:a||!P||N||!e||!!y.length},a?"Updating":"Update Feature Value"))))))),!H&&r.default.createElement(f.default,{"data-test":"segment_overrides",tabLabel:r.default.createElement(Row,{className:"justify-content-center"},"Segments"," ",this.state.segmentsChanged&&r.default.createElement("div",{className:"unread ml-2 px-2"},"*"))},!C&&M&&r.default.createElement(FormGroup,{className:"mb-4 mr-3 ml-3"},r.default.createElement("div",null,r.default.createElement(Panel,{icon:"ion-ios-settings",title:r.default.createElement(Tooltip,{title:r.default.createElement("h6",{className:"mb-0"},"Segment Overrides"," ",r.default.createElement("span",{className:"icon ion-ios-information-circle"})),place:"right"},s.default.strings.SEGMENT_OVERRIDES_DESCRIPTION),action:!this.state.showCreateSegment&&!Y&&r.default.createElement(Button,{onClick:()=>this.changeSegment(this.props.segmentOverrides),type:"button",className:"btn--outline"+(o?"":"-red")},o?"Enable All":"Disable All")},this.props.segmentOverrides?r.default.createElement(g.default,{readOnly:Y,showEditSegment:!0,showCreateSegment:this.state.showCreateSegment,setShowCreateSegment:e=>this.setState({showCreateSegment:e}),feature:$.id,projectId:this.props.projectId,multivariateOptions:d,environmentId:this.props.environmentId,value:this.props.segmentOverrides,controlValue:c,onChange:e=>{this.setState({segmentsChanged:!0}),this.props.updateSegments(e)}}):r.default.createElement("div",{className:"text-center"},r.default.createElement(Loader,null))),!this.state.showCreateSegment&&r.default.createElement("div",null,r.default.createElement("p",{className:"text-right mt-4"},L&&V?"This will create a change request for the environment":"This will update the segment overrides for the app"," "),r.default.createElement(S.default,{level:"environment",permission:Utils.getManageFeaturePermission(L,C),id:this.props.environmentId},(({permission:e})=>Utils.renderWithPermission(e,s.default.environmentPermissions("Write"),r.default.createElement("div",{className:"text-right"},r.default.createElement(Button,{onClick:O,type:"button","data-test":"update-feature-segments-btn",id:"update-feature-segments-btn",disabled:a||!P||I||!e},a?"Updating":"Update Segment Overrides"))))))))),!C&&M&&!H&&!q&&r.default.createElement(f.default,{"data-test":"identity_overrides",tabLabel:"Identity Overrides"},r.default.createElement(S.default,{level:"project",permission:"MANAGE_IDENTITY_OVERRIDES",id:this.props.projectId},(({permission:e})=>r.default.createElement(FormGroup,{className:"mb-4 mr-3 ml-3"},r.default.createElement(PanelSearch,{id:"users-list",title:r.default.createElement(Tooltip,{title:r.default.createElement("h6",{className:"mb-0"},"Identity Overrides"," ",r.default.createElement("span",{className:"icon ion-ios-information-circle"})),place:"right"},s.default.strings.IDENTITY_OVERRIDES_DESCRIPTION),action:r.default.createElement(Button,{onClick:()=>this.changeIdentity(this.state.userOverrides),type:"button",className:"btn--outline"+(i?"":"-red")},i?"Enable All":"Disable All"),icon:"ion-md-person",items:this.state.userOverrides,paging:this.state.userOverridesPaging,renderSearchWithNoResults:!0,nextPage:()=>this.userOverridesPage(this.state.userOverridesPaging.currentPage+1),prevPage:()=>this.userOverridesPage(this.state.userOverridesPaging.currentPage-1),goToPage:e=>this.userOverridesPage(e),searchPanel:r.default.createElement("div",{className:"text-center mt-2 mb-2"},r.default.createElement(Flex,{className:"text-left"},r.default.createElement(T.default,{isEdge:!1,ignoreIds:this.state.userOverrides?.map((e=>e.identity?.id)),environmentId:this.props.environmentId,"data-test":"select-identity",placeholder:"Create an Identity Override...",value:this.state.selectedIdentity,disabled:!e,onChange:e=>this.setState({selectedIdentity:e},this.addItem)}))),renderRow:({enabled:t,feature_state_value:a,id:n,identity:i})=>r.default.createElement(Row,{space:!0,className:"list-item cursor-pointer",key:n},r.default.createElement(Flex,{onClick:()=>{window.open(`${document.location.origin}/#/project/${this.props.projectId}/environment/${this.props.environmentId}/users/${i.identifier}/${i.id}?flag=${$.name}`,"_blank")}},i.identifier),e&&r.default.createElement(Switch,{checked:t,onChange:()=>this.toggleUserFlag({enabled:t,id:n,identity:i})}),r.default.createElement("div",{className:"ml-2"},a&&r.default.createElement(FeatureValue,{value:a})),r.default.createElement("a",{target:"_blank",href:`/#/project/${this.props.projectId}/environment/${this.props.environmentId}/users/${i.identifier}/${i.id}?flag=${$.name}`,className:"ml-2 btn btn-link btn--link",onClick:()=>{},rel:"noreferrer"},"Edit")),renderNoResults:r.default.createElement(Panel,{id:"users-list",title:r.default.createElement(Tooltip,{title:r.default.createElement("h6",{className:"mb-0"},"Identity Overrides"," ",r.default.createElement("span",{className:"icon ion-ios-information-circle"})),place:"right"},s.default.strings.IDENTITY_OVERRIDES_DESCRIPTION)},r.default.createElement("div",{className:"mt-2"},"No identities are overriding this feature.")),isLoading:!this.state.userOverrides})))))):r.default.createElement("div",{className:(0,b.default)(M?"":"create-feature-tab")},Q(t,0,n,e.prevent_flag_defaults),!C&&r.default.createElement("div",{className:"text-right mr-3"},r.default.createElement(Button,{onClick:j,"data-test":"create-feature-btn",id:"create-feature-btn",disabled:a||!P||N||!z},a?"Creating":"Create Feature"))),C&&r.default.createElement("div",{className:"pr-3"},C?r.default.createElement("div",{className:"mb-3"},r.default.createElement("p",{className:"text-left ml-3"},"This will update the feature value for the device ",r.default.createElement("strong",null,k),"."," Any segment overrides for this feature will now be ignored.")):"",r.default.createElement("div",{className:"text-right mb-2"},C&&r.default.createElement("div",null,r.default.createElement(Button,{onClick:()=>w(),"data-test":"update-feature-btn",id:"update-feature-btn",disabled:a||!P||N},a?"Updating":"Update Feature"))))))))))}))))}},R(n,"displayName","CreateFlag"),n);C.propTypes={projectId:N.default.string,projectFlag:N.default.shape({id:N.default.string.isRequired}).isRequired,environmentId:N.default.string},e.exports=(0,u.default)((0,i.default)(C))},67008:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=(s(a(25497)),s(a(78605)));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}function l(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u=(n=class extends r.Component{constructor(e,t){super(e,t),l(this,"close",(e=>{closeModal(),this.props.onSave(e)})),l(this,"componentDidMount",(()=>{this.focusTimeout=setTimeout((()=>{this.input.focus(),this.focusTimeout=null}),500)})),this.state={}}componentWillUnmount(){this.focusTimeout&&clearTimeout(this.focusTimeout)}render(){const e=this.state.name;return r.default.createElement(OrganisationProvider,{onSave:this.close},(({createProject:t,error:a,isSaving:n,projects:s})=>{const o=!!s&&!!s.length,l=!!!Utils.getPlansPermission("CREATE_ADDITIONAL_PROJECT")&&o;return r.default.createElement("div",null,r.default.createElement("form",{style:{opacity:l?.5:1},"data-test":"create-project-modal",id:"create-project-modal",onSubmit:a=>{l||(a.preventDefault(),!n&&e&&t(e))}},r.default.createElement(InputGroup,{ref:e=>this.input=e,"data-test":"projectName",disabled:l,inputProps:{className:"full-width",name:"projectName"},onChange:e=>this.setState({name:Utils.safeParseEventValue(e)}),isValid:e&&e.length,type:"text",title:"Project Name*",placeholder:"My Product Name"}),a&&r.default.createElement(i.default,{error:a}),r.default.createElement("div",{className:"text-right"},r.default.createElement(Button,{"data-test":"create-project-btn",className:"mt-3",id:"create-project-btn",disabled:n||!e},n?"Creating":"Create Project"))))}))}},l(n,"displayName","CreateProject"),n);u.propTypes={},e.exports=u},61642:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=A(a(96540)),r=b(a(76922)),i=b(a(12339)),s=b(a(61509)),o=a(81206),l=a(93267),u=b(a(72119)),c=b(a(73719)),d=A(a(54242)),p=b(a(54050)),m=b(a(92431)),f=b(a(29415)),g=b(a(12564)),h=b(a(27456)),v=b(a(23186)),E=b(a(45809)),y=a(2543),_=a(93328);function b(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(w=function(e){return e?a:t})(e)}function A(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},O.apply(this,arguments)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const P=({condensed:e,environmentId:t,feature:a,identities:s,identitiesLoading:o,identity:v,isEdit:b,onCancel:w,onComplete:A,page:T,projectId:P,readOnly:N,searchInput:I,segment:j,setEnvironmentId:F,setPage:R,setSearchInput:C})=>{const k=i.default.forms.maxLength.SEGMENT_ID,M=S((0,n.useState)([]),2),$=M[0],D=M[1],x=(0,l.useGetAllTraitsQuery)({environmentId:t}),U=x.data,L=x.isLoading,V=x.refetch;(0,n.useEffect)((()=>{V()}),[t]),(0,n.useEffect)((()=>{if(!L&&U){const e=U?.keys.map((e=>({label:e,value:e})));D(e)}}),[U,L]);const G={description:"",name:"",rules:[{conditions:[],rules:[{conditions:[O({},i.default.defaultRule)],rules:[],type:"ANY"}],type:"ALL"}]},B=j||G,W=S((0,l.useCreateSegmentMutation)(),2),H=W[0],q=W[1],Y=q.data,z=q.isError,J=q.isLoading,Q=q.isSuccess,K=S((0,l.useUpdateSegmentMutation)(),2),Z=K[0],X=K[1],ee=X.data,te=X.isError,ae=X.isLoading,ne=X.isSuccess,re=S((0,l.useGetAffectedIdentitiesCountMutation)(),2),ie=re[0],se=re[1],oe=se.data,le=se.isError,ue=se.isLoading,ce=(se.isSuccess,J||ae),de=S((0,n.useState)(!1),2),pe=de[0],me=(de[1],S((0,n.useState)(B.description),2)),fe=me[0],ge=me[1],he=S((0,n.useState)(B.name),2),ve=he[0],Ee=he[1],ye=S((0,n.useState)(B.rules),2),_e=ye[0],be=ye[1],we=S((0,n.useState)(0),2),Ae=we[0],Oe=we[1],Se=S((0,n.useState)([]),2),Te=Se[0],Pe=Se[1],Ne=S((0,n.useState)(!1),2),Ie=Ne[0],je=Ne[1],Fe=z||te,Re=(0,_.useHasPermission)({id:String(P),level:"project",permission:"MANAGE_SEGMENTS"}).permission,Ce=(0,_.useHasPermission)({id:String(P),level:"project",permission:"MANAGE_SEGMENTS"}).permission,ke=e=>e.map((e=>O({},e,{conditions:e.conditions.filter((e=>"true"!==e.delete)),rules:ke(e.rules)}))),Me=(e="ANY")=>{const t=(0,y.cloneDeep)(_e);t[0].rules=t[0].rules.concat({conditions:[O({},i.default.defaultRule)],rules:[],type:e}),be(t)};(0,n.useEffect)((()=>{$e()}),[_e]);const $e=()=>{const e=ke(_e);if(xe&&!Te.length)Pe(e),je(!0);else{Pe(e);const t=(0,y.isEqual)(Te,e);je(!t)}},De=e=>{c.default.preventDefault(e);const t={description:fe,feature:a,name:ve,project:P,rules:_e};ve&&(B.id?Z({projectId:P,segment:O({},t,{id:B.id,project:B.project,uuid:B.uuid})}):H({projectId:P,segment:t}))},xe=(0,n.useMemo)((()=>{if(!_e[0]?.rules?.find((e=>!e.delete)))return!1;return!_e[0].rules.find((e=>e.conditions.find((e=>!c.default.validateRule(e)))))}),[_e]);(0,n.useEffect)((()=>{setTimeout((()=>{document.getElementById("segmentID")?.focus()}),500)}),[]),(0,n.useEffect)((()=>{Q&&Y&&A?.(Y)}),[Q]),(0,n.useEffect)((()=>{ne&&ee&&A?.(ee)}),[ne]);const Ue=n.default.createElement("div",{className:"overflow-visible"},n.default.createElement("div",null,n.default.createElement("div",{className:"mb-2"},_e[0].rules.map(((e,t)=>e.delete?null:n.default.createElement("div",{key:t},t>0&&n.default.createElement(Row,{className:"and-divider my-1"},n.default.createElement(Flex,{className:"and-divider__line"}),"ANY"===e.type?"AND":"AND NOT",n.default.createElement(Flex,{className:"and-divider__line"})),n.default.createElement(f.default,{showDescription:pe,readOnly:N,"data-test":`rule-${t}`,rule:e,operators:c.default.getFlagsmithValue("segment_operators")?JSON.parse(c.default.getFlagsmithValue("segment_operators")):null,onRemove:()=>((e,t)=>{const a=(0,y.cloneDeep)(_e);a[0].rules.splice(t,1),be(a)})(0,t),onChange:e=>((e,t,a)=>{const n=(0,y.cloneDeep)(_e);n[0].rules[t]=a,be(n)})(0,t,e),traits:$,deleteRulePermission:Ce,currentIndex:t}))))),n.default.createElement(Row,{className:"justify-content-end mt-3"},!le&&oe&&n.default.createElement("p",{className:"identities-count-label"},"Affected Identites Count: ",!le&&oe?oe?.identity_count:0),n.default.createElement(d.ButtonOutline,{disabled:ue||!xe||!Ie||!Re,type:"button","data-test":"affected-identities",onClick:()=>{ie({projectId:"",segment:{rules:_e}}),$e()}},ue?"Fetching Count":"Get Affected Identities")),n.default.createElement(Row,{className:"justify-content-center"},!N&&n.default.createElement("div",{onClick:()=>Me("ANY"),style:{marginTop:20},className:"text-center"},n.default.createElement(d.ButtonOutline,{"data-test":"add-rule",type:"button"},"Add AND Condition")),!N&&c.default.getFlagsmithHasFeature("not_operator")&&n.default.createElement("div",{onClick:()=>Me("NOT"),style:{marginTop:20},className:"text-center"},c.default.getFlagsmithValue("not_operator")?n.default.createElement(Tooltip,{title:n.default.createElement(d.ButtonOutline,{className:"ml-2 btn--outline-danger","data-test":"add-rule",type:"button"},"Add AND NOT Condition")},`Note: If using clientside evaluations on your SDK, this feature is only supported by the following SDKs: ${JSON.parse(c.default.getFlagsmithValue("not_operator"))}`):n.default.createElement(d.ButtonOutline,{className:"ml-2 btn--outline-danger","data-test":"add-rule",type:"button"},"Add AND NOT Condition"))))),Le=(e,t,a,r,s)=>n.default.createElement("form",{id:"create-segment-modal",onSubmit:De},((e,t,a)=>!e&&n.default.createElement(Row,{className:"mb-4"},n.default.createElement("label",{className:"mr-2 mb-0",htmlFor:"segmentID"},"ID"),n.default.createElement(Flex,null,n.default.createElement(p.default,{"data-test":"segmentID",name:"id",id:"segmentID",readOnly:e,maxLength:k,value:t,onChange:e=>a(u.default.enumeration.set(c.default.safeParseEventValue(e)).toLowerCase()),isValid:t&&t.length,type:"text",title:e?"ID":"ID*",placeholder:"E.g. power_users"}))))(e,ve,Ee),((e,t,a,r,i)=>!e&&n.default.createElement(FormGroup,{className:"mb-4"},n.default.createElement(m.default,{value:t,inputProps:{className:"full-width",name:"featureDesc",readOnly:!!r||i},onChange:e=>a(c.default.safeParseEventValue(e)),isValid:t&&t.length,type:"text",title:"Description (optional)",placeholder:"e.g. 'People who have spent over $100' "})))(t,fe,ge,v,a),(e=>n.default.createElement("div",{className:"form-group"},n.default.createElement(Row,{className:"mt-2 mb-2"},n.default.createElement(Flex,null,n.default.createElement("label",{className:"cols-sm-2 control-label"},"Include users when the following rules apply:"),n.default.createElement("span",{className:"text-small text-muted"},"Note: Trait names are case sensitive"))),e))(Ue),(e=>e&&n.default.createElement("div",{className:"alert alert-danger"},"Error creating segment, please ensure you have entered a trait and value for each rule."))(Fe),((e,t)=>e&&n.default.createElement(E.default,{title:"Segment",json:t}))(e,r),((e,t,a,r,s,o,l)=>n.default.createElement("div",{className:"text-right"},n.default.createElement(Row,{className:"justify-content-end"},l&&n.default.createElement(d.ButtonLink,{type:"button",onClick:o,className:"mr-4"},"Cancel"),c.default.renderWithPermission(s,i.default.projectPermissions("Write"),n.default.createElement(d.default,{type:"submit","data-test":e?"update-segment":"create-segment",id:e?"update-feature-btn":"create-feature-btn",disabled:t||!a||!r||!s},t?e?"Updating":"Creating":e?"Update Segment":"Create Segment")))))(e,ce,ve,xe,Re,s,t));return n.default.createElement("div",null,L?n.default.createElement(r.default,null):b&&!e?n.default.createElement(h.default,{value:Ae,onChange:e=>Oe(e)},n.default.createElement(g.default,{tabLabel:"Rules"},n.default.createElement("div",{className:"mt-4 mr-3 ml-3"},Le(b,e,N,B,w)))):n.default.createElement("div",{className:"mt-4 mr-3 ml-3"},Le(b,e,N,B,w)))},N=e=>{const t=S((0,n.useState)(e.environmentId),2),a=t[0],r=t[1],i=(0,l.useGetSegmentQuery)({id:`${e.segment}`,projectId:`${e.projectId}`},{skip:!e.segment}),u=i.data,d=i.isLoading,p=S((0,n.useState)({number:1,pageType:void 0,pages:void 0}),2),m=p[0],f=p[1],g=(0,s.default)(c.default.fromParam().search,(()=>{f({number:1,pageType:void 0,pages:void 0})})),h=g.search,v=g.searchInput,E=g.setSearchInput,y=c.default.getIsEdge(),_=(0,o.useGetIdentitiesQuery)({environmentId:a,isEdge:y,page:m.number,pageType:m.pageType,page_size:10,pages:m.pages,search:h}),b=_.data,w=_.isLoading;return d?n.default.createElement("div",{className:"text-center"},n.default.createElement(Loader,null)):n.default.createElement(P,O({},e,{segment:u||void 0,identities:b,setPage:f,searchInput:v,setSearchInput:E,identitiesLoading:w,page:m,environmentId:a,setEnvironmentId:r}))};t.default=N;e.exports=(0,v.default)(N)},2137:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=(l(a(71906)),l(a(12339))),s=l(a(72119)),o=l(a(78605));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function c(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=(n=class extends r.Component{constructor(e,t){super(e,t),c(this,"onSave",(()=>{this.props.onSave&&this.props.onSave(),this.close()})),c(this,"componentDidMount",(()=>{this.props.isEdit||(this.focusTimeout=setTimeout((()=>{this.input.focus(),this.focusTimeout=null}),500))})),c(this,"save",(e=>{const t=this.props,a=t.environmentId,n=t.identity,r=this.state;e({environmentId:a,identity:n,trait:{id:r.id,trait_key:r.trait_key,trait_value:r.trait_value}})}));const a=this.props,n=a.id,r=a.trait_key,i=a.trait_value;this.state={id:n,trait_key:r,trait_value:i}}close(){closeModal()}componentWillUnmount(){this.focusTimeout&&clearTimeout(this.focusTimeout)}render(){const e=this.props,t=(e.identity,e.isEdit),a=e.projectId,n=this.state,l=n.trait_key,u=n.trait_value,c=i.default.forms.maxLength.TRAITS_ID;return r.default.createElement(ProjectProvider,{id:a},(({project:e})=>r.default.createElement(IdentityProvider,{onSave:this.onSave},(({error:e,isSaving:a},{createTrait:n})=>r.default.createElement("form",{id:"create-trait-modal",onSubmit:e=>{e.preventDefault(),this.save(n,a)}},r.default.createElement(FormGroup,{className:"mb-3"},r.default.createElement(InputGroup,{ref:e=>this.input=e,inputProps:{className:"full-width",maxLength:c,name:"traitID",readOnly:t},value:l,onChange:e=>this.setState({trait_key:s.default.enumeration.set(Utils.safeParseEventValue(e)).toLowerCase()}),isValid:l&&l.length,type:"text",title:t?"Trait ID":"Trait ID*",placeholder:"E.g. favourite_color","data-test":"trait-key"})),r.default.createElement(FormGroup,{className:"mb-3"},r.default.createElement(InputGroup,{textarea:!0,inputProps:{className:"full-width",name:"traitValue"},value:u,title:"Value",onChange:e=>this.setState({trait_value:Utils.getTypedValue(Utils.safeParseEventValue(e))}),type:"text",placeholder:"e.g. 'big', true, 1 ","data-test":"trait-value"})),e&&r.default.createElement(o.default,{error:e}),r.default.createElement("div",{className:"text-right"},t?r.default.createElement(Button,{id:"update-trait-btn",disabled:a||!l},a?"Creating":"Update Trait"):r.default.createElement(Button,{id:"create-trait-btn",disabled:a||!l},a?"Creating":"Create Trait")))))))}},c(n,"displayName","CreateTrait"),n);d.propTypes={},e.exports=d},38088:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=u(a(43686)),i=u(a(78605)),s=u(a(54242)),o=a(81206),l=u(a(73719));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const m=({environmentId:e})=>{const t=d((0,n.useState)([]),2),a=t[0],u=t[1],c=d((0,o.useCreateIdentitiesMutation)(),2),p=c[0],m=c[1],f=m.isError,g=m.isSuccess;return(0,n.useEffect)((()=>{g&&closeModal()}),[g]),n.default.createElement("div",null,n.default.createElement(FormGroup,null,n.default.createElement("label",null,"TV IDs"),n.default.createElement("p",{className:"text-muted text-small"},"Enter a comma or space separate list of TV IDs.")),n.default.createElement(FormGroup,{className:"text-right"},n.default.createElement(r.default,{placeholder:"TV1, TV2, TV3",onChange:e=>u(e),value:a})),f&&n.default.createElement(i.default,{error:"Some Identities already exist and were not created"}),n.default.createElement(FormGroup,{className:"text-right"},n.default.createElement(s.default,{onClick:()=>{p({environmentId:e,identifiers:a,isEdge:l.default.getIsEdge()})},disabled:!a?.length},"Create TVs")))};t.default=m;e.exports=m},29415:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=o(a(12339)),i=o(a(88055)),s=o(a(73719));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u.apply(this,arguments)}function c(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends n.PureComponent{constructor(e){super(e),c(this,"renderRule",((e,t)=>{const a=this.props,i=a.operators,o=a.rule.conditions;this.setState({isLastRule:t===o.length-1});const l=t>0,u=s.default.findOperator(e.operator,e.value,i),c=u&&u.value,d="string"==typeof e.value?e.value.replace(u&&u.append||"",""):e.value;if(e.delete)return null;const p=e.hideValue?"Value (N/A)":e.valuePlaceholder||"Value",m=s.default.renderWithPermission(this.props.deleteRulePermission,r.default.projectPermissions("Admin"),n.default.createElement("div",null,n.default.createElement("button",{"data-test":`${this.props["data-test"]}-remove`,type:"button",id:"remove-feature",onClick:()=>this.props.onRemove(),className:"btn btn--with-icon btn--condensed btn--remove"},n.default.createElement(RemoveIcon,null))));return n.default.createElement("div",{className:"rule__row reveal",key:t},l&&n.default.createElement(Row,{className:"or-divider"},n.default.createElement(Row,null,n.default.createElement("div",{className:"or-divider__up"}),"Or",n.default.createElement("div",{className:"or-divider__down"})),n.default.createElement(Flex,{className:"or-divider__line"})),n.default.createElement(Row,{noWrap:!0,className:"rule"},n.default.createElement(Flex,null,n.default.createElement(Row,null,n.default.createElement(Flex,{value:20,className:"px-1"},n.default.createElement(Select,{options:this.props.traits,isMulti:!1,placeholder:"Select Traits","data-test":`${this.props["data-test"]}-property-${t}`,value:""!==e.property?{label:e.property,value:e.property}:null,onChange:(e,a)=>{this.setRuleProperty(t,"property",{value:s.default.safeParseEventValue(e.value)})},isDisabled:c&&"PERCENTAGE_SPLIT"===c})),n.default.createElement(Flex,{value:30,className:"px-1 text-center"},this.props.readOnly?_.find(i,{value:c}).label:n.default.createElement(Select,{"data-test":`${this.props["data-test"]}-operator-${t}`,value:c&&_.find(i,{value:c}),onChange:e=>this.setRuleProperty(t,"operator",e),options:i})),n.default.createElement(Flex,{value:15,className:"px-1"},n.default.createElement(Input,{readOnly:this.props.readOnly,"data-test":`${this.props["data-test"]}-value-${t}`,className:"input-container--flat full-width",value:d||"",placeholder:p,disabled:u&&u.hideValue,onChange:e=>{const a=s.default.getTypedValue(s.default.safeParseEventValue(e));this.setRuleProperty(t,"value",{value:u&&u.append?`${a}${u.append}`:a},!0)},isValid:s.default.validateRule(e)}))),this.props.showDescription&&n.default.createElement(Row,{noWrap:!0,className:"rule"},n.default.createElement("textarea",{readOnly:this.props.readOnly,"data-test":`${this.props["data-test"]}-description-${t}`,className:"full-width borderless",value:`${e.description||""}`,placeholder:"Condition description (Optional)",onChange:e=>{const a=s.default.safeParseEventValue(e);this.setRuleProperty(t,"description",{value:a},!0)}}))),n.default.createElement("div",null,n.default.createElement(Row,{noWrap:!0},this.state.isLastRule&&!this.props.readOnly?n.default.createElement(ButtonOutline,{className:"ml-2","data-test":`${this.props["data-test"]}-or`,type:"button",onClick:this.addRule},"Or"):n.default.createElement("div",{style:{width:64}}),m))))})),c(this,"removeRule",(e=>{this.setRuleProperty(e,"delete",{value:!0})})),c(this,"setRuleProperty",((e,t,{value:a})=>{const n=(0,i.default)(this.props.rule),r=n.conditions[e],s=this.getOperator(r.operator,r.value)||{},o=this.getNewOperator(t,a)||{};this.updateRuleValue(r,s,o),this.applyFormattedValue(r,t,a),"operator"===t&&"PERCENTAGE_SPLIT"===a&&this.resetPercentageSplit(r),this.checkForDeletedConditions(n),this.props.onChange(n)})),c(this,"getOperator",((e,t)=>s.default.findOperator(e,t,this.props.operators)||{})),c(this,"getNewOperator",((e,t)=>"operator"!==e?this.getOperator(e,t):this.props.operators.find((e=>e.value===t))||{})),c(this,"updateRuleValue",((e,t,a)=>{if(a.hideValue&&(e.value=null),t.append!==a.append){const i=t.append||"",s=a.append||"";e.value=(n=e.value,r=i,r?n.split(r):[null===n?"":n])[0]+s}var n,r})),c(this,"applyFormattedValue",((e,t,a)=>{const n=null===a?null:`${a}`;this.isInvalidPercentageSplit(t,e.operator,a)||(e[t]="operator"===t?n.split(":")[0]:n)})),c(this,"isInvalidPercentageSplit",((e,t,a)=>"value"===e&&"PERCENTAGE_SPLIT"===t&&(`${a}`?.match(/\D/)||a>100))),c(this,"resetPercentageSplit",(e=>{e.property="",e.value=""})),c(this,"checkForDeletedConditions",(e=>{e.conditions.filter((e=>!e.delete)).length||(e.delete=!0)})),c(this,"addRule",(()=>{const e=this.props.rule.conditions;this.props.onChange(u({},this.props.rule,{conditions:e.concat([u({},r.default.defaultRule)])}))})),this.state={isLastRule:!0}}render(){const e=this.props.rule.conditions;return n.default.createElement("div",null,n.default.createElement("div",{className:"panel panel-without-heading overflow-visible"},n.default.createElement("div",{className:"panel-content"},e.map(this.renderRule))))}}t.default=d,c(d,"displayName","Rule"),c(d,"propTypes",{})},53938:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({disabled:e,onClick:t}){return r.default.createElement("div",{className:"text-center"},r.default.createElement("button",{disabled:e,"data-test":"add-variation",type:"button",onClick:t,className:"btn btn--outline "},"Add Variation"))};var n,r=(n=a(96540))&&n.__esModule?n:{default:n}},46555:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({controlValue:e,disabled:t,duplicateVariation:a,isEdit:o,multivariateOptions:u,preventRemove:c,readOnlyValue:d,removeVariation:p,segments:m,select:f,setValue:g,setVariations:h,updateVariation:v,variationOverrides:E,weightTitle:y}){const _=u.length&&e<0;if(!u||!u.length)return null;const b=!E||!E.find((e=>100===e.percentage_allocation));return n.default.createElement(n.default.Fragment,null,_&&n.default.createElement("div",{className:"alert alert-danger"},"Your variation percentage splits total to over 100%"),f&&n.default.createElement("div",{className:"panel panel--flat panel-without-heading mb-2"},n.default.createElement("div",{className:"panel-content"},n.default.createElement(Row,null,n.default.createElement(Flex,null,n.default.createElement(i.default,{disabled:!0,value:Utils.getTypedValue(e)})),n.default.createElement("div",{onMouseDown:t=>{t.stopPropagation(),h([]),g(e)},className:"btn--radio ion "+(b?"ion-ios-radio-button-on":"ion-ios-radio-button-off")})))),u.map(((e,u)=>{const g=f?E&&E[0]&&"number"==typeof E[0].multivariate_feature_option_index?u===E[0].multivariate_feature_option_index&&E[0]:E&&E.find((t=>t.multivariate_feature_option===e.id)):E&&E.find((e=>100===e.percentage_allocation));return f?n.default.createElement("div",{className:"panel panel--flat panel-without-heading multivariate-panel mb-2"},n.default.createElement("div",{className:"panel-content"},n.default.createElement(s.default,{value:e.name,className:"pr-2 py-2 font-weight-bold",disabled:t||d,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{onChange(l({},value,{name:Utils.safeParseEventValue(e)}))})),inputStyle:{border:0,paddingTop:"8px",paddingBottom:"8px"},placeholder:"Variation Name"}),n.default.createElement(Row,null,n.default.createElement(Flex,null,n.default.createElement(i.default,{disabled:!0,value:Utils.getTypedValue(Utils.featureStateToValue(e))})),n.default.createElement("div",{"data-test":`select-variation-${Utils.featureStateToValue(e)}`,onMouseDown:t=>(t.stopPropagation(),t.preventDefault(),h([{multivariate_feature_option:e.id,multivariate_feature_option_index:u,percentage_allocation:100}]),!1),className:"btn--radio ion "+(g?"ion-ios-radio-button-on":"ion-ios-radio-button-off")})))):n.default.createElement(r.default,{segments:m,key:u,index:u,isEdit:o,duplicateVariation:a,readOnlyValue:d,preventRemove:c||t,value:e,onChange:e=>{v(u,e,E)},weightTitle:y,disabled:t,onRemove:c||t?null:()=>p(u,e.id)})})))};var n=o(a(96540)),r=o(a(89272)),i=o(a(44386)),s=o(a(56751));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}},89272:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=d(a(32485)),i=d(a(74728)),s=d(a(44386)),o=d(a(12339)),l=d(a(56751)),u=d(a(90174)),c=d(a(56063));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=({disabled:e,duplicateVariation:t,index:a,isEdit:d,onChange:p,onRemove:g,readOnlyValue:h,segments:v=!1,value:E,weightTitle:y})=>{const _=f((0,n.useState)(!0),2),b=_[0],w=_[1],A=d&&!!E.custom_id;return n.default.createElement("div",{className:"panel panel--flat panel-without-heading"},n.default.createElement("div",{className:"panel-content variation-value multivariate-panel"},n.default.createElement(Row,null,n.default.createElement("div",{className:"variation-weight flex-row",style:{alignItems:"baseline"}},n.default.createElement(l.default,{value:E.name,className:"pr-2 py-2 font-weight-bold",disabled:e||h,onChange:e=>{p(m({},E,{name:Utils.safeParseEventValue(e)}))},inputStyle:{border:0,paddingTop:"8px",paddingBottom:"8px"},placeholder:"Variation Name"}),!(e||h)&&n.default.createElement(u.default,{height:18,width:18}))),n.default.createElement(Row,null,n.default.createElement("div",{className:"flex flex-1"},n.default.createElement(InputGroup,{component:n.default.createElement(s.default,{"data-test":`featureVariationValue${a}`,name:"featureValue",className:(0,r.default)({"full-width":!0,"variation-value-invalid":!b}),isValid:!1,value:Utils.getTypedValue(Utils.featureStateToValue(E)),disabled:e||h||A,onChange:e=>{const t=Utils.safeParseEventValue((0,i.default)(e,{allowedAttributes:{},allowedTags:[]}));w((e=>"string"==typeof e&&e.trim().length>0)(t)),p(m({},E,Utils.valueToFeatureState(t),{name:E.name}))},placeholder:"e.g. 'big' "}),tooltip:o.default.strings.REMOTE_CONFIG_DESCRIPTION_VARIATION,title:"Variation Value*"})),n.default.createElement("div",{className:"variation-weight ml-2",style:{width:210}},n.default.createElement(InputGroup,{type:"number","data-test":`featureVariationWeight${a}`,id:`featureVariationWeight${a}`,onChange:e=>{const t=parseInt(Utils.safeParseEventValue(e));p(m({},E,{default_percentage_allocation:Utils.safeParseEventValue(e)&&null!==t&&t<=100&&t>=0?t:E.default_percentage_allocation}))},value:E.default_percentage_allocation,inputProps:{maxLength:3,readOnly:e,style:{marginTop:2}},title:y})),!v&&n.default.createElement("div",{className:"ml-2"},n.default.createElement(Tooltip,{title:n.default.createElement("button",{onClick:()=>t(Utils.featureStateToValue(E)),id:"copy-multivariate",type:"button",className:"btn btn--with-icon ml-auto"},n.default.createElement(c.default,{width:27,height:27})),place:"right"},"Duplicate")),!!g&&n.default.createElement("div",{className:"ml-2",style:{width:30}},n.default.createElement("button",{onClick:g,"data-test":`deleteMultivariate${a}`,id:`deleteMultivariate${a}`,type:"button",className:"btn btn--with-icon ml-auto btn--remove"},n.default.createElement(RemoveIcon,null))))))}},24349:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=o(a(23186)),i=o(a(73719)),s=o(a(89847));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a(57765);t.default=(0,r.default)((e=>{const t=e.match.params.projectId,a=u((0,n.useState)(i.default.fromParam().env),2),r=a[0];a[1];return i.default.getPlansPermission("AUDIT")||!i.default.getFlagsmithHasFeature("scaleup_audit")?n.default.createElement("div",{className:"app-container container"},n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement("h3",null,"Audit Log"),n.default.createElement("p",null,"View all activity that occured generically across the app."),n.default.createElement(FormGroup,null,n.default.createElement("div",null,n.default.createElement("div",{className:"audit"},n.default.createElement(FormGroup,null,n.default.createElement(s.default,{onSearchChange:e=>{},pageSize:10,environmentId:r,projectId:t})))))))):n.default.createElement("div",null,n.default.createElement("div",{className:"text-center"},"To access this feature please upgrade your account to scaleup or higher."))}))},1303:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=b(a(78874)),s=b(a(46797)),o=b(a(84022)),l=b(a(4478)),u=b(a(74187)),c=b(a(91646)),d=b(a(23186)),p=b(a(12339)),m=b(a(54242)),f=b(a(44117)),g=b(a(20863)),h=b(a(44386)),v=b(a(26851)),E=b(a(25497)),y=b(a(93328)),_=b(a(45809));function b(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(w=function(e){return e?a:t})(e)}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},A.apply(this,arguments)}function O(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S=200,T=(n=class extends r.Component{constructor(e,t){super(e,t),O(this,"getApprovals",((e,t)=>e.filter((e=>t.includes(e.id))))),O(this,"removeOwner",((e,t=!0)=>{if(i.default.isLoading)return;const a=i.default.model[this.props.match.params.id];AppActions.updateChangeRequest({approvals:t?a.approvals.filter((t=>t.user!==e)):a.approvals,description:a.description,feature_states:a.feature_states,group_assignments:t?a.group_assignments:a.group_assignments.filter((t=>t.group!==e)),id:a.id,title:a.title})})),O(this,"addOwner",((e,t=!0)=>{if(i.default.isLoading)return;const a=i.default.model[this.props.match.params.id];AppActions.updateChangeRequest({approvals:t?a.approvals.concat([{user:e}]):a.approvals,description:a.description,feature_states:a.feature_states,group_assignments:t?a.group_assignments:a.group_assignments.concat([{group:e}]),id:a.id,title:a.title})})),O(this,"componentDidMount",(()=>{})),O(this,"deleteChangeRequest",(()=>{openConfirm(r.default.createElement("h3",null,"Delete Change Request"),r.default.createElement("p",null,"Are you sure you want to delete this change request?"),(()=>{AppActions.deleteChangeRequest(this.props.match.params.id,(()=>{this.context.router.history.replace(`/project/${this.props.match.params.projectId}/environment/${this.props.match.params.environmentId}/change-requests`)}))}))})),O(this,"editChangeRequest",((e,t)=>{const a=this.props.match.params.id,n=i.default.model[a];openModal("Edit Change Request",r.default.createElement(v.default,{isEdit:!0,router:this.context.router,environmentId:this.props.match.params.environmentId,projectId:this.props.match.params.projectId,changeRequest:i.default.model[a],projectFlag:e,multivariate_options:n.feature_states[0].multivariate_feature_state_values,environmentFlag:A({},t,{enabled:n.feature_states[0].enabled,feature_state_value:Utils.featureStateToValue(n.feature_states[0].feature_state_value)}),flagId:t.id}),null,{className:"side-modal fade create-feature-modal"})})),O(this,"approveChangeRequest",(()=>{AppActions.actionChangeRequest(this.props.match.params.id,"approve")})),O(this,"publishChangeRequest",(()=>{const e=this.props.match.params.id,t=i.default.model[e],a=new Date(t.feature_states[0].live_from).valueOf()>(new Date).valueOf(),n=moment(t.feature_states[0].live_from);openConfirm(r.default.createElement("h3",null,a?"Schedule":"Publish"," Change Request"),r.default.createElement("p",null,"Are you sure you want to ",a?"schedule":"publish"," this change request",a?` for ${n.format("Do MMM YYYY hh:mma")}`:"","? This will adjust the feature for your environment."),(()=>{AppActions.actionChangeRequest(this.props.match.params.id,"commit",(()=>{AppActions.refreshFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0)}))}))})),O(this,"fetchFeature",(e=>{this.activeFeature=e})),this.state={showArchived:!1,tags:[]},ES6Component(this),this.listenTo(i.default,"change",(()=>this.forceUpdate())),this.listenTo(l.default,"change",(()=>this.forceUpdate())),this.listenTo(s.default,"change",(()=>this.forceUpdate())),this.listenTo(i.default,"problem",(()=>this.setState({error:!0}))),AppActions.getChangeRequest(this.props.match.params.id,this.props.match.params.projectId,this.props.match.params.environmentId),AppActions.getOrganisation(AccountStore.getOrganisation().id),AppActions.getGroups(AccountStore.getOrganisation().id)}render(){const e=this.props.match.params.id,t=i.default.model[e],a=i.default.flags[e],n=a&&a.environmentFlag,l=a&&a.projectFlag;if(this.state.error&&!t)return r.default.createElement("div",{"data-test":"change-requests-page",id:"change-requests-page",className:"app-container container"},r.default.createElement("h3",null,"Change Request not Found"),r.default.createElement("p",null,"The Change Request may have been deleted."));if(!t||s.default.isLoading||!l||!n)return r.default.createElement("div",{"data-test":"change-requests-page",id:"change-requests-page",className:"app-container container"},r.default.createElement("div",{className:"text-center"},r.default.createElement(Loader,null)));const u=s.default.model&&s.default.model.users,d=o.default&&o.default.groups,v=t&&this.getApprovals(u,t.approvals.map((e=>e.user))),b=t&&this.getApprovals(d,t.group_assignments.map((e=>e.group))),w=t&&t.feature_states[0]&&t.feature_states[0].feature;w!==this.activeFeature&&this.fetchFeature(w);const A=t&&u.find((e=>e.id===t.user)),O=t.committed_by&&u&&u.find((e=>e.id===t.committed_by))||{},T=new Date(t.feature_states[0].live_from).valueOf()>(new Date).valueOf(),P=moment(t.feature_states[0].live_from),N=l&&l.multivariate_options&&!!l.multivariate_options.length,I=t&&t.approvals.find((e=>e.user===AccountStore.getUser().id)),j=t.approvals.filter((e=>!!e.approved_at)).map((e=>{const t=u.find((t=>t.id===e.user))||{};return`${t.first_name} ${t.last_name}`})),F=!!I&&!!I.approved_at,R=c.default.getEnvironment(this.props.match.params.environmentId).minimum_change_request_approvals||0,C=t.feature_states[0]&&Utils.featureStateToValue(t.feature_states[0].feature_state_value),k=n&&n.feature_state_value,M=t.feature_states[0]&&t.feature_states[0].enabled,$=n&&n.enabled;let D=[],x=!1;N&&(D=l.multivariate_options.map((e=>{const a=n.multivariate_feature_state_values.find((t=>t.multivariate_feature_option===e.id)),r=t.feature_states[0].multivariate_feature_state_values.find((t=>t.multivariate_feature_option===e.id));return a.percentage_allocation!==r.percentage_allocation&&(x=!0),{changed:a.percentage_allocation!==r.percentage_allocation,newValue:r.percentage_allocation,oldValue:a.percentage_allocation,value:Utils.featureStateToValue(e)}})));const U=t.user===AccountStore.getUser().id;return r.default.createElement(y.default,{level:"environment",permission:Utils.getApproveChangeRequestPermission(!0),id:this.props.match.params.environmentId},(({permission:a})=>r.default.createElement(y.default,{level:"environment",permission:"UPDATE_FEATURE_STATE",id:this.props.match.params.environmentId},(({permission:s})=>r.default.createElement("div",{style:{opacity:i.default.isLoading?.25:1},"data-test":"change-requests-page",id:"change-requests-page",className:"app-container container-fluid"},r.default.createElement("div",{className:"row"},r.default.createElement(Flex,{className:"mb-2 ml-3"},r.default.createElement(Row,null,r.default.createElement(Flex,null,r.default.createElement("h3",{className:"ml-0"},t.title))),r.default.createElement("div",{className:"list-item-footer faint"},"Created at"," ",moment(t.created_at).format("Do MMM YYYY HH:mma")," ","by ",t.user&&A.first_name," ",A&&A.last_name),r.default.createElement("p",{className:"mt-2"},t.description)),r.default.createElement("div",{className:"mr-4"},(!O||!O.id||T)&&r.default.createElement(Row,null,r.default.createElement(m.default,{onClick:this.deleteChangeRequest,className:"btn btn--small btn-danger"},"Delete"),r.default.createElement(m.default,{onClick:()=>this.editChangeRequest(l,n),className:"btn btn--small ml-2"},"Edit")))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-12"},T&&r.default.createElement(Row,null,r.default.createElement(E.default,{icon:"ion-md-calendar",title:"Scheduled Change"},"This feature change"," ",t?.committedAt?"is scheduled to":"will"," ","go live at"," ",P.format("Do MMM YYYY hh:mma"),t?.committed_at?" unless it is edited or deleted":" if it is approved and published",".",!!t?.committedAt&&"You can still edit / remove the change request before this date.")),r.default.createElement(InputGroup,{component:r.default.createElement("div",null,!Utils.getFlagsmithHasFeature("disable_users_as_reviewers")&&r.default.createElement(r.default.Fragment,null,r.default.createElement(Row,null,r.default.createElement("span",null,r.default.createElement("strong",{style:{width:70}},"Assigned users"))),r.default.createElement(Row,{className:"mt-2"},0!==v.length&&v.map((e=>r.default.createElement(Row,{key:e.id,onClick:()=>this.removeOwner(e.id),className:"chip chip--active",style:{marginBottom:4,marginTop:4}},r.default.createElement("span",{className:"font-weight-bold"},e.first_name," ",e.last_name),r.default.createElement("span",{className:"chip-icon ion ion-ios-close"})))),r.default.createElement(m.default,{className:"btn--link btn--link-primary",onClick:()=>this.setState({showUsers:!0}),style:{marginBottom:10,marginTop:4}},"Add user")),r.default.createElement(g.default,{users:u,value:v&&v.map((e=>e.id)),onAdd:this.addOwner,onRemove:this.removeOwner,isOpen:this.state.showUsers,onToggle:()=>this.setState({showUsers:!this.state.showUsers})})),Utils.getFlagsmithHasFeature("enable_groups_as_reviewers")&&r.default.createElement(r.default.Fragment,null,r.default.createElement(Row,null,r.default.createElement("span",null,r.default.createElement("strong",{style:{width:70}},"Assigned groups"))),r.default.createElement(Row,{className:"mt-2"},0!==b.length&&b.map((e=>r.default.createElement(Row,{key:e.id,onClick:()=>this.removeOwner(e.id,!1),className:"chip chip--active",style:{marginBottom:4,marginTop:4}},r.default.createElement("span",{className:"font-weight-bold"},e.name),r.default.createElement("span",{className:"chip-icon ion ion-ios-close"})))),r.default.createElement(m.default,{className:"btn--link btn--link-primary",onClick:()=>this.setState({showGroups:!0})},"Add group")),r.default.createElement(f.default,{groups:d,selectedGroups:b&&b.map((e=>e.group)),onAdd:this.addOwner,onRemove:this.removeOwner,isOpen:this.state.showGroups,onToggle:()=>this.setState({showGroups:!this.state.showGroups})})))}),r.default.createElement(Panel,{title:T?"Scheduled Change":"Change Request"},r.default.createElement(Row,{className:"mt-2",style:{marginLeft:"0.75rem",marginRight:"0.75rem"}},r.default.createElement("strong",{style:{width:S}},"Feature"),r.default.createElement("a",{target:"_blank",className:"btn--link btn--link-primary",href:`/project/${this.props.match.params.projectId}/environment/${this.props.match.params.environmentId}/features?feature=${l&&l.id}`,rel:"noreferrer"},l&&l.name)),r.default.createElement(Row,{className:"mt-2",style:{marginLeft:"0.75rem",marginRight:"0.75rem"}},r.default.createElement("span",{style:{width:S}}),r.default.createElement(Flex,null,!t.committed_at&&r.default.createElement("strong",null,"Live Version")),r.default.createElement(Flex,null,r.default.createElement("strong",null,T?"Scheduled Change":"Change Request"))),r.default.createElement(Row,{className:"mt-2",style:{marginLeft:"0.75rem",marginRight:"0.75rem",opacity:M!==$||t.committed_at?1:.25}},r.default.createElement("strong",{style:{width:S}},"Enabled"),r.default.createElement(Flex,null,!t.committed_at&&r.default.createElement(Switch,{checked:$})),r.default.createElement(Flex,null,r.default.createElement(Switch,{checked:M}))),r.default.createElement(Row,{className:"mt-2",style:{marginLeft:"0.75rem",marginRight:"0.75rem",opacity:k!==C||t.committed_at?1:.25}},r.default.createElement("strong",{style:{width:S}},"Value"),r.default.createElement(Flex,{className:"mr-2"},!t.committed_at&&r.default.createElement(h.default,{value:Utils.getTypedValue(k)})),r.default.createElement(Flex,{className:"ml-2"},r.default.createElement(h.default,{value:C}))),N&&r.default.createElement(Row,{className:"mt-2 align-start",style:{marginLeft:"0.75rem",marginRight:"0.75rem",opacity:x||t.committed_at?1:.25}},r.default.createElement("strong",{style:{width:S}},"Variations"),r.default.createElement(Flex,{className:"mr-2"},D.map(((e,t)=>r.default.createElement("div",{key:t,className:"mb-4",style:{opacity:x&&!e.changed?.25:1}},r.default.createElement("div",null,r.default.createElement("div",{className:"mb-2"},r.default.createElement("strong",null,"Variation ",t+1)),r.default.createElement(Row,null,r.default.createElement(Flex,null,r.default.createElement(h.default,{value:Utils.getTypedValue(e.value)})))),r.default.createElement(Row,null,r.default.createElement(Flex,{className:"ml-4"},r.default.createElement("span",null,"Environment weight:"," ",r.default.createElement("strong",null,e.oldValue,"%"))),r.default.createElement(Flex,{className:"mr-4"},r.default.createElement("span",null,"Environment weight:"," ",r.default.createElement("strong",null,e.newValue,"%"))))))))),r.default.createElement(Row,{className:"mt-2"},r.default.createElement("span",{style:{width:S}}),r.default.createElement(Flex,null),r.default.createElement(Flex,null,j.length?r.default.createElement("div",{className:"text-right mb-2 mr-2"},r.default.createElement("span",{className:"ion icon-primary text-primary icon ion-md-checkbox mr-2"}),"Approved by ",j.join(", ")):!!R&&r.default.createElement("div",{className:"text-right mb-2 mr-2"},r.default.createElement("span",{className:"ion icon-primary text-primary icon ion-ios-information-circle mr-2"}),"You need at least ",R," approval",1!==R?"s":""," to"," ",T?"schedule":"publish"," this change"),t.committed_at?r.default.createElement("div",{className:"text-right"},r.default.createElement("span",{className:"ion icon-primary text-primary icon ion-ios-git-merge mr-2"}),"Committed at"," ",moment(t.committed_at).format("Do MMM YYYY HH:mma")," ","by ",O.first_name," ",O.last_name):r.default.createElement(Row,{className:"text-right mr-2"},r.default.createElement(Flex,null),!U&&Utils.renderWithPermission(a,p.default.environmentPermissions("Approve Change Requests"),r.default.createElement(m.default,{disabled:F||!a,onClick:this.approveChangeRequest,className:"btn"},r.default.createElement("span",{className:"ion icon ion-md-checkbox text-light mr-2"}),F?"Approved":"Approve")),Utils.renderWithPermission(s,p.default.environmentPermissions("Update Feature States"),r.default.createElement(m.default,{disabled:j.length<R||!s,onClick:this.publishChangeRequest,className:"btn ml-2"},r.default.createElement("span",{className:"ion icon ion-ios-git-merge text-light mr-2"}),T?"Publish Scheduled":"Publish"," ","Change")))))))),r.default.createElement(_.default,{className:"mt-4",title:"Change Request",json:i.default.model?.[e]}),r.default.createElement(Row,null,r.default.createElement("div",{style:{minHeight:300}})))))))}},O(n,"displayName","ChangeRequestsPage"),O(n,"contextTypes",{router:propTypes.object.isRequired}),n);T.propTypes={},e.exports=(0,d.default)((0,u.default)(T))},75553:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=v(a(26851)),s=(v(a(12146)),v(a(34066)),v(a(65164)),v(a(90790))),o=v(a(4478)),l=v(a(91646)),u=v(a(93328)),c=a(52014),d=a(32799),p=v(a(45809)),m=v(a(23186)),f=v(a(12339)),g=v(a(6837)),h=a(78412);function v(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function y(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _=(n=class extends r.Component{constructor(e,t){super(e,t),y(this,"componentDidMount",(()=>{API.trackPage(f.default.pages.FEATURES);this.props.match.params})),y(this,"newFlag",(()=>{openModal("New Feature",r.default.createElement(i.default,{router:this.context.router,environmentId:this.props.match.params.environmentId,projectId:this.props.match.params.projectId}),null,{className:"side-modal fade create-feature-modal"})})),y(this,"getFilter",(()=>({is_archived:this.state.showArchived,tags:this.state.tags&&this.state.tags.length?this.state.tags.join(","):void 0}))),y(this,"onSave",(()=>{toast("Saved")})),y(this,"onError",(e=>{this.setState({error:e}),e?.name||e?.initial_value||toast("We could not create this feature, please check the name is not in use.")})),y(this,"filter",(()=>{g.default.searchFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,0,this.getFilter())})),this.state={search:null,showArchived:!1,sort:{label:"Name",sortBy:"name",sortOrder:"asc"},tags:[],projectName:""},AsyncStorage.getItem("lastEnv").then((e=>{if(e){const t=JSON.parse(e);this.setState({projectName:t.projectName})}})),ES6Component(this),this.listenTo(o.default,"change",(()=>this.forceUpdate())),(0,c.getTags)((0,d.getStore)(),{projectId:`${this.props.match.params.projectId}`}),g.default.getFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,0,this.getFilter())}componentDidUpdate(e,t){const a=this.props.match.params,n=e.match.params;a.environmentId===n.environmentId&&a.projectId===n.projectId||g.default.getFeatures(a.projectId,a.environmentId,!0,this.state.search,this.state.sort,0,this.getFilter())}createFeaturePermission(e){return r.default.createElement(u.default,{level:"project",permission:"CREATE_FEATURE",id:this.props.match.params.projectId},(({permission:t})=>t?e(t):Utils.renderWithPermission(t,f.default.projectPermissions("Write"),e(t))))}render(){const e=this.props.match.params,t=e.environmentId,a=e.projectId,n=Utils.getFlagsmithHasFeature("read_only_mode"),i=l.default.getEnvironment(t);return r.default.createElement("div",{"data-test":"features-page",id:"features-page",className:"app-container container"},r.default.createElement(FeatureListProvider,{onSave:this.onSave,onError:this.onError},(({environmentFlags:e,projectFlags:l},{removeFlag:c,toggleFlag:d})=>{const m=o.default.isLoading;return r.default.createElement("div",{className:"features-page"},m&&(!l||!l.length)&&r.default.createElement("div",{className:"centered-container"},r.default.createElement(Loader,null)),(!m||l)&&r.default.createElement("div",null,l||(this.state.showArchived||"string"==typeof this.state.search||this.state.tags.length)&&!m?r.default.createElement("div",null,r.default.createElement(Row,null,r.default.createElement(Flex,null,r.default.createElement("h3",null,"Features"),r.default.createElement("p",null,"View and manage"," ",r.default.createElement(Tooltip,{title:r.default.createElement(ButtonLink,null,"feature flags"),place:"right"},f.default.strings.FEATURE_FLAG_DESCRIPTION)," ","of your ",i&&"project_name"in i?i.project_name:""," bundle.")),r.default.createElement(h.FormGroup,{className:"float-right"},l?this.createFeaturePermission((e=>r.default.createElement("div",{className:"text-right"},r.default.createElement(Button,{disabled:!e||n,"data-test":"show-create-feature-btn",id:"show-create-feature-btn",onClick:this.newFlag},"Create Feature")))):null)),r.default.createElement(u.default,{level:"environment",permission:Utils.getManageFeaturePermission(Utils.changeRequestsEnabled(i&&i.minimum_change_request_approvals)),id:this.props.match.params.environmentId},(({permission:n})=>r.default.createElement(h.FormGroup,{className:"mb-4"},r.default.createElement(PanelSearch,{className:"no-pad",id:"features-list",icon:"ion-ios-rocket",title:"Features",renderSearchWithNoResults:!0,itemHeight:65,isLoading:o.default.isLoading,paging:o.default.paging,search:this.state.search,onChange:e=>{this.setState({search:Utils.safeParseEventValue(e)},(()=>{g.default.searchFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,0,this.getFilter())}))},nextPage:()=>g.default.getFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,o.default.paging.next,this.getFilter()),prevPage:()=>g.default.getFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,o.default.paging.previous,this.getFilter()),goToPage:e=>g.default.getFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,e,this.getFilter()),onSortChange:e=>{this.setState({sort:e},(()=>{g.default.getFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,0,this.getFilter())}))},sorting:[{default:!0,label:"Name",order:"asc",value:"name"},{label:"Created Date",order:"asc",value:"created_date"}],items:l,header:r.default.createElement(r.default.Fragment,null),renderFooter:()=>r.default.createElement(r.default.Fragment,null,r.default.createElement(p.default,{className:"mx-2 mt-4",showNamesButton:!0,title:"Features",json:l}),r.default.createElement(p.default,{className:"mx-2",title:"Feature States",json:e&&Object.values(e)})),renderRow:(i,o)=>r.default.createElement(s.default,{environmentFlags:e,projectFlags:l,permission:n,environmentId:t,projectId:a,index:o,canDelete:n,toggleFlag:d,removeFlag:c,projectFlag:i}),filterRow:()=>!0}))))):r.default.createElement("div",null,this.createFeaturePermission((e=>r.default.createElement(h.FormGroup,{className:"text-center"},r.default.createElement(Button,{disabled:!e,className:"btn-lg btn-primary",id:"show-create-feature-btn","data-test":"show-create-feature-btn",onClick:this.newFlag},r.default.createElement("span",{className:"icon ion-ios-rocket"})," Create your first Feature")))))))})))}},y(n,"displayName","FeaturesPage"),y(n,"contextTypes",{router:propTypes.object.isRequired}),n);_.propTypes={},e.exports=(0,m.default)(_)},58361:(e,t,a)=>{"use strict";var n,r=p(a(96540)),i=(a(72306),p(a(77021))),s=p(a(17830)),o=a(54242),l=p(a(55708)),u=(p(a(71707)),p(a(98606)),p(a(4239)),p(a(23186))),c=p(a(12339)),d=p(a(7066));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f=(n=class extends r.default.Component{constructor(e,t){super(e,t),m(this,"showForgotPassword",(e=>{e.preventDefault(),openModal("Forgot password",r.default.createElement(i.default,{initialValue:this.state.email,onComplete:()=>{toast("Please check your email to reset your password.")}}),null,{className:"alert fade expand"})})),m(this,"render",(()=>{const e=this.state,t=e.email,a=e.first_name,n=e.last_name,i=e.password,u=Utils.fromParam().redirect?`?redirect=${Utils.fromParam().redirect}`:"",c=-1!==document.location.href.indexOf("invite"),p=!Project.preventSignup&&(c&&-1===document.location.href.indexOf("login")||-1!==document.location.href.indexOf("signup")),m=Project.preventSignup&&p,f=Project.preventEmailPassword,g=Project.preventForgotPassword,h=[];Utils.getFlagsmithHasFeature("disable_oauth_registration");return r.default.createElement(r.default.Fragment,null,r.default.createElement(AccountProvider,{onLogout:this.onLogout,onLogin:this.onLogin},(({error:e,isLoading:v,isSaving:E},{register:y})=>r.default.createElement("div",{id:"login-page",style:{flexDirection:"column"},className:"fullscreen-container"},r.default.createElement("div",{className:"mb-4"},r.default.createElement(l.default,{className:"signup-icon",srcImage:d.default})),r.default.createElement("div",{className:"text-center mb-4"},p?r.default.createElement(r.default.Fragment,null,r.default.createElement("h3",null,"It's free to get started."),!c&&r.default.createElement(r.default.Fragment,null,r.default.createElement("p",{className:"mb-0"},"We have a 100% free for life plan for smaller projects."),r.default.createElement(o.ButtonLink,{className:"pt-3 pb-3",href:"https://flagsmith.com/pricing",target:"_blank"},"Check out our Pricing"))):r.default.createElement(r.default.Fragment,null,r.default.createElement("h3",null,"Sign in to Feature Flags Portal"))),m&&r.default.createElement("div",{className:"signup-form",id:"sign-up"},r.default.createElement(s.default,null,"To join an organisation please contact your administrator for an invite link.",r.default.createElement("div",null,r.default.createElement(Link,{id:"existing-member-btn",to:`/login${u}`},r.default.createElement(o.ButtonLink,{className:"mt-2 pb-3 pt-2"},"Already a member?"))))),!m&&r.default.createElement("div",{className:"signup-form",id:"sign-up"},p?r.default.createElement(r.default.Fragment,null,r.default.createElement(s.default,null,!!h.length&&r.default.createElement(Row,{style:{justifyContent:"center"}},h),!f&&r.default.createElement("form",{id:"form",name:"form",onSubmit:e=>{Utils.preventDefault(e);const r=-1!==document.location.href.indexOf("invite");y({email:t,first_name:a,last_name:n,marketing_consent_given:this.state.marketing_consent_given,password:i},r)}},e&&r.default.createElement(FormGroup,null,r.default.createElement("div",{id:"error-alert",className:"alert alert-danger"},"An unexpected error occurred. Please try logging in again")),c&&r.default.createElement("div",{className:"notification flex-row"},r.default.createElement("span",{className:"notification__icon ion-md-information-circle-outline mb-2"}),r.default.createElement("p",{className:"notification__text pl-3"},"Create an account to accept your invite")),r.default.createElement("fieldset",{id:"details",className:""},r.default.createElement(InputGroup,{title:"First Name","data-test":"firstName",inputProps:{className:"full-width mb-2",error:e&&e.first_name,name:"firstName"},onChange:e=>{this.setState({first_name:Utils.safeParseEventValue(e)})},className:"input-default full-width",type:"text",name:"firstName",id:"firstName"}),r.default.createElement(InputGroup,{title:"Last Name","data-test":"lastName",inputProps:{className:"full-width mb-2",error:e&&e.last_name,name:"lastName"},onChange:e=>{this.setState({last_name:Utils.safeParseEventValue(e)})},className:"input-default full-width",type:"text",name:"lastName",id:"lastName"}),e&&e.email?r.default.createElement("span",{id:"email-error",className:"text-danger"},e.email):null,r.default.createElement(InputGroup,{title:"Email Address","data-test":"email",inputProps:{className:"full-width mb-2",error:e&&e.email,name:"email"},onChange:e=>{this.setState({email:Utils.safeParseEventValue(e)})},className:"input-default full-width",type:"email",name:"email",id:"email"}),e&&e.password?r.default.createElement("span",{id:"password-error",className:"text-danger"},e.password):null,r.default.createElement(InputGroup,{title:"Password","data-test":"password",inputProps:{className:"full-width mb-2",error:e&&e.password,name:"password"},onChange:e=>{this.setState({password:Utils.safeParseEventValue(e)})},className:"input-default full-width",type:"password",name:"password",id:"password"}),Utils.getFlagsmithHasFeature("mailing_list")&&r.default.createElement("div",null,r.default.createElement("input",{onChange:e=>{API.setCookie("marketing_consent_given",`${e.target.checked}`),this.setState({marketing_consent_given:e.target.checked})},id:"mailinglist",className:"mr-2",type:"checkbox",checked:this.state.marketing_consent_given}),r.default.createElement("label",{className:"mb-0",htmlFor:"mailinglist",style:{display:"inline"}},"Yes, I would like to signup for the twice monthly newsletter (optional)")),r.default.createElement("div",{className:"form-cta"},r.default.createElement(Button,{"data-test":"signup-btn",name:"signup-btn",disabled:v||E,className:"px-4 mt-3 full-width",type:"submit"},"Create Account"))))),r.default.createElement(Row,{className:"justify-content-center mt-2"},"Have an account?"," ",r.default.createElement(Link,{id:"existing-member-btn",to:`/login${u}`},r.default.createElement(o.ButtonLink,{className:"ml-1"},"Log in")))):r.default.createElement(r.default.Fragment,null,r.default.createElement(s.default,null,r.default.createElement(AccountProvider,null,(({error:e,isLoading:a,isSaving:n},{login:s})=>r.default.createElement(r.default.Fragment,null,!f&&r.default.createElement("form",{id:"form",name:"form",onSubmit:e=>{Utils.preventDefault(e),s({email:t,password:i})}},c&&r.default.createElement("div",{className:"notification flex-row"},r.default.createElement("span",{className:"notification__icon ion-md-information-circle-outline mb-2"}),r.default.createElement("p",{className:"notification__text pl-3"},"Login to accept your invite")),r.default.createElement("fieldset",{id:"details"},e&&e.email?r.default.createElement("span",{id:"email-error",className:"text-danger"},e.email):null,r.default.createElement(InputGroup,{title:"Email Address / Username","data-test":"email",inputProps:{className:"full-width",error:e&&e.email,name:"email"},onChange:e=>{this.setState({email:Utils.safeParseEventValue(e)})},className:"input-default full-width mb-2 ",type:"text",name:"email",id:"email"}),e&&e.password?r.default.createElement("span",{id:"password-error",className:"text-danger"},e.password):null,r.default.createElement(InputGroup,{title:"Password",inputProps:{className:"full-width",error:e&&e.password,name:"password"},onChange:e=>{this.setState({password:Utils.safeParseEventValue(e)})},rightComponent:!g&&r.default.createElement(Link,{tabIndex:-1,className:"float-right",to:`/password-recovery${u}`,onClick:this.showForgotPassword},r.default.createElement(o.ButtonLink,{tabIndex:-1,type:"button"},"Forgot password?")),className:"input-default full-width mb-2",type:"password",name:"password","data-test":"password",id:"password"}),r.default.createElement("div",{className:"form-cta"},r.default.createElement(Button,{id:"login-btn","data-test":"login-btn",disabled:a||n,type:"submit",className:"mt-3 px-4 full-width"},"Login")),r.default.createElement("div",{className:"form-cta"},r.default.createElement("a",{id:"github-login-btn","data-test":"github-login-btn",type:"button",href:`${Project.api}auth/oauth/github/redirect/`,className:"btn btn__oauth btn__oauth--github github-login-btn"},r.default.createElement("svg",{viewBox:"0 0 24 24",fill:"#fff",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}))," ","Sign in with Github")),!!h.length&&r.default.createElement(Row,{style:{justifyContent:"center"}},h)),e&&r.default.createElement("div",{id:"error-alert",className:"alert mt-3 alert-danger"},"string"==typeof AccountStore.error?"An unexpected error occurred. Please try logging in again":"Please check your details and try again")))))),!Project.preventSignup&&r.default.createElement("div",null)))))))})),this.state={marketing_consent_given:"true"===API.getCookie("marketing_consent_given")}}componentDidUpdate(e){if(this.props.location.pathname!==e.location.pathname){const e=document.querySelector('input[name="firstName"]')||document.querySelector('input[name="email"]');e&&e.focus()}}componentDidMount(){if(document.location.href.includes("oauth")){const e=location.href.split("oauth/")[1];if(e&&e.includes("google")){const e=Utils.fromParam().code;AppActions.oauthLogin("google",{access_token:e,marketing_consent_given:this.state.marketing_consent_given})}else if(e&&e.includes("github")){const e=Utils.fromParam().code;window.history.replaceState({},document.title,window.location.pathname),AppActions.oauthLogin("github",{access_token:e,marketing_consent_given:this.state.marketing_consent_given})}}if(setTimeout((()=>{const e=document.querySelector('input[name="firstName"]')||document.querySelector('input[name="email"]');e&&e.focus()}),1e3),document.location.href.includes("saml")){const e=Utils.fromParam().code;e&&(AppActions.oauthLogin("saml",{access_token:e,marketing_consent_given:this.state.marketing_consent_given}),this.context.router.history.replace("/"))}if(API.trackPage(c.default.pages.HOME),-1!==document.location.href.indexOf("invite")){const e=Utils.fromParam().redirect;if(e.includes("invite-link")){const t=e.split("invite-link/")[1];API.setInviteType("INVITE_LINK"),API.setInvite(t)}else if(e.includes("invite")){const t=e.split("invite/")[1];API.setInviteType("INVITE_EMAIL"),API.setInvite(t)}}}},m(n,"contextTypes",{router:propTypes.object.isRequired}),m(n,"displayName","HomePage"),n);e.exports=(0,u.default)(f)},71633:(e,t,a)=>{"use strict";var n,r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),s=(n=a(12339))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}const l=(function(e,t,a){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(r=class extends i.Component{componentDidMount(){API.trackPage(s.default.pages.COMING_SOON)}render(){return i.default.createElement("div",{className:"app-container container"},i.default.createElement("h3",{className:"pt-5"},"Oops!"),i.default.createElement("p",null,"It looks like you do not have permission to view this"," ",Utils.fromParam().entity||"page",". Please contact a member with administrator privileges."))}},"displayName","ComingSoon"),r);l.propTypes={},e.exports=l},50789:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=({})=>r.default.createElement("div",{className:"app-container container"},r.default.createElement("h3",{className:"pt-5"},"Oops, we can't seem to find this page!"),r.default.createElement("p",null,"Please check the URL you are trying to visit and try again."))},98966:(e,t,a)=>{"use strict";var n,r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),s=(n=a(12339))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}function l(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u=(r=class extends i.Component{constructor(e,t){super(e,t),l(this,"componentDidMount",(()=>{API.trackPage(s.default.pages.RESET_PASSWORD)})),l(this,"onSave",(()=>{this.context.router.history.replace("/login"),toast("Your password has been reset")})),l(this,"save",(e=>{e.preventDefault();this.state.password&&this.state.password==this.state.password2&&AppActions.resetPassword({new_password1:this.state.password,new_password2:this.state.password2,token:this.props.match.params.token,uid:this.props.match.params.uid})})),this.state={}}render(){const e=this.state.password&&this.state.password==this.state.password2;return i.default.createElement("div",{className:"app-container"},i.default.createElement(AccountProvider,{onSave:this.onSave},(({error:t,isSaving:a})=>i.default.createElement("div",{className:"card signup-form container px-4 py-4"},i.default.createElement("h3",null,"Reset Password"),a?i.default.createElement("div",{className:"centered-container"},i.default.createElement(Loader,null)):i.default.createElement("form",{onSubmit:this.save,id:"details"},i.default.createElement(InputGroup,{inputProps:{className:"full-width",error:t&&t.new_password1,name:"new-password"},title:"New Password",onChange:e=>{this.setState({password:Utils.safeParseEventValue(e)})},className:"input-default full-width mt-4",placeholder:"New Password",type:"password",name:"password1",id:"password1"}),i.default.createElement(InputGroup,{inputProps:{className:"full-width",error:t&&t.new_password2,name:"new-password2"},title:"Confirm New Password",onChange:e=>{this.setState({password2:Utils.safeParseEventValue(e)})},className:"input-default full-width",placeholder:"Confirm New Password",type:"password",name:"password2",id:"password2"}),i.default.createElement("div",{className:"text-right"},i.default.createElement(Button,{disabled:!e},"Set password"))),i.default.createElement("div",null,t?i.default.createElement("div",null,i.default.createElement("h3",{className:"pt-5"},"Oops"),i.default.createElement("p",{className:"alert alert-danger"},"We could not reset your password with the details provided, please try again.")):i.default.createElement("div",null))))))}},l(r,"contextTypes",{router:propTypes.object.isRequired}),l(r,"displayName","PasswordResetPage"),r);u.propTypes={},e.exports=u},59247:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=u(a(67008)),s=(u(a(93328)),u(a(23186))),o=u(a(12339)),l=u(a(6837));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function d(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=(n=class extends r.Component{constructor(e,t){super(e,t),d(this,"componentDidMount",(()=>{const e=window.location.href.replace("/oauth/github","");window.history.replaceState({},document.title,e),API.trackPage(o.default.pages.PROJECT_SELECT);const t=this.props.location.state;t&&t.create&&this.newProject()})),d(this,"newProject",(()=>{openModal("Create  Project",r.default.createElement(i.default,{onSave:({environmentId:e,projectId:t})=>{this.context.router.history.push(`/project/${t}/environment/${e}/features?new=true`)}}))})),this.state={},l.default.getOrganisation(AccountStore.getOrganisation().id)}render(){const e=AccountStore.isAdmin();return r.default.createElement("div",{"data-test":"project-select-page",id:"project-select-page",className:"app-container container pt-5"},r.default.createElement(OrganisationProvider,null,(({isLoading:t,projects:a})=>r.default.createElement("div",null,a&&a.length?r.default.createElement("div",{className:"flex-row pl-0 pr-0"},r.default.createElement("div",{className:"col-md-9 pl-0 pr-0"},r.default.createElement("h3",null,"Vizio App Bundles"),r.default.createElement("p",null,"Here you can create and manage a set of features and configure them for selected loki powered app bundles."))):e?r.default.createElement("div",{className:"text-center"},r.default.createElement("h3",null,"Try again after create / map project & environment.")):r.default.createElement("div",null,r.default.createElement("h3",null,"Vizio App Bundles"),r.default.createElement("p",null,"You do not have access to any loki powered app bundles. If this is unexpected please contact a member of the Project who has Administrator privileges.")),(t||!a)&&r.default.createElement("div",{className:"centered-container"},r.default.createElement(Loader,null)),!t&&r.default.createElement("div",{className:"conatiner"},r.default.createElement(FormGroup,null,r.default.createElement(PanelSearch,{id:"projects-list",className:"no-pad",title:"App Bundles",items:a,renderRow:({environments:e,id:t,name:a},n)=>r.default.createElement(Link,{key:t,className:"list-item clickable",id:`project-select-${n}`,"data-test":`project-select-${n}`,to:`/project/${t}/environment/${e&&e[0]?`${e[0].api_key}/features`:"create"}`},r.default.createElement(Row,null,r.default.createElement(Flex,{className:"align-start"},r.default.createElement(ButtonLink,null,a)),r.default.createElement("span",{className:"text__link icon ion-ios-arrow-forward list-item"}))),filterRow:(e,t)=>e.name.toLowerCase().indexOf(t)>-1})))))))}},d(n,"displayName","ProjectSelectPage"),d(n,"contextTypes",{router:propTypes.object.isRequired}),n);p.propTypes={},e.exports=(0,s.default)(p)},18410:(e,t,a)=>{"use strict";var n=y(a(96540)),r=a(2543),i=v(a(12339)),s=v(a(61509)),o=a(93267),l=a(93328),u=v(a(12947)),c=y(a(54242)),d=v(a(7696)),p=v(a(61642)),m=v(a(27704)),f=v(a(45809)),g=v(a(23186)),h=v(a(73719));function v(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a(63790),a(27601);const w=()=>n.default.createElement("div",{className:"mt-2"},n.default.createElement("p",{className:"alert alert-info"},"In order to use segments, please set the segment_operators remote config value."," ",n.default.createElement("a",{target:"_blank",href:"https://docs.flagsmith.com/deployment/overview#running-flagsmith-on-flagsmith",rel:"noreferrer"},"Learn about self hosting"),"."));e.exports=(0,g.default)((e=>{const t=e.match.params,a=t.environmentId,g=t.projectId,v=(0,n.useRef)(h.default.fromParam().id),E=!h.default.getFlagsmithValue("segment_operators"),y=(0,s.default)(""),b=y.search,A=y.searchInput,O=y.setSearchInput,S=_((0,n.useState)(1),2),T=S[0],P=S[1],N=(0,o.useGetSegmentsQuery)({page:T,page_size:100,projectId:g,q:b}),I=N.data,j=N.error,F=N.isLoading,R=N.refetch,C=_((0,o.useDeleteSegmentMutation)(),1)[0],k=(0,n.useRef)(!1);(0,n.useEffect)((()=>{u.default.trackPage(i.default.pages.FEATURES)}),[]),(0,n.useEffect)((()=>{j&&e.router.history.replace("/projects")}),[j,e.router.history]);const M=(0,l.useHasPermission)({id:g,level:"project",permission:"DELETE_SEGMENTS"}).permission,$=(0,l.useHasPermission)({id:g,level:"project",permission:"MANAGE_SEGMENTS"}).permission,D=(e,t)=>{u.default.trackEvent(i.default.events.VIEW_SEGMENT),history.replaceState({},"",`${document.location.pathname}?id=${e}`),openModal("Edit Segment",n.default.createElement(p.default,{segment:e,isEdit:!0,readOnly:t,onComplete:()=>{R(),closeModal()},environmentId:a,projectId:g}),null,{className:"fade side-modal create-segment-modal",onClose:()=>{history.replaceState({},"",`${document.location.pathname}`)}})};I?.results.length&&(k.current=!0);const x=I?.results;return n.default.createElement("div",{"data-test":"segments-page",id:"segments-page",className:"app-container container"},n.default.createElement("div",{className:"segments-page"},F&&!k.current&&!x&&!A&&n.default.createElement("div",{className:"centered-container"},n.default.createElement(Loader,null)),!F&&n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement(Row,null,n.default.createElement(Flex,null,n.default.createElement("h3",null,"Segments"),n.default.createElement("p",null,"Create and manage groups of TVs with similar traits. Segments can be used to override features within the features page."," ")),n.default.createElement(FormGroup,{className:"float-right"},n.default.createElement("div",{className:"text-right"},h.default.renderWithPermission($,i.default.projectPermissions("Write"),n.default.createElement(c.default,{disabled:E||!$,className:"btn-lg btn-primary",id:"show-create-segment-btn","data-test":"show-create-segment-btn",onClick:()=>{openModal("New Segment",n.default.createElement(p.default,{onComplete:()=>{closeModal(),R()},environmentId:a,projectId:g}),null,{className:"fade side-modal create-new-segment-modal"})}},"Create Segment"))))),E&&n.default.createElement(w,null),n.default.createElement(FormGroup,null,n.default.createElement(m.default,{renderSearchWithNoResults:!0,className:"no-pad",id:"segment-list",icon:"ion-ios-globe",title:"Segments",renderFooter:()=>n.default.createElement(f.default,{className:"mx-2 mt-4",title:"Segments",json:x}),items:(0,r.sortBy)(x,(e=>`${e.feature?"z":"a"}${e.name}`)),renderRow:({description:e,feature:t,id:s,name:o},l)=>(v.current===`${s}`&&(D(v.current,!1),v.current=null),h.default.renderWithPermission(!0,i.default.projectPermissions("Read"),n.default.createElement(Row,{className:"list-item clickable",key:s,space:!0},n.default.createElement("div",{className:"flex flex-1","data-test":`segment-${l}-name`,onClick:()=>D(s,!1)},n.default.createElement(Row,null,n.default.createElement(c.ButtonLink,null,n.default.createElement("span",{"data-test":`segment-${l}-name`},o,t&&n.default.createElement("div",{className:"unread ml-2 px-2"}," ","Feature-Specific")))),n.default.createElement("div",{className:"list-item-footer faint"},e||"No description")),n.default.createElement(Row,null,n.default.createElement(Column,null,h.default.renderWithPermission(M,i.default.projectPermissions("Admin"),n.default.createElement("button",{disabled:!M,"data-test":`remove-segment-btn-${l}`,onClick:()=>{const e=(0,r.find)(x,{id:s});e&&((e,t)=>{openModal("Remove Segment",n.default.createElement(d.default,{environmentId:a,segment:e,cb:t}))})(e,(()=>{C({id:s,projectId:g})}))},className:"btn btn--with-icon"},n.default.createElement(RemoveIcon,null)))))))),paging:I,nextPage:()=>P(T+1),prevPage:()=>P(T-1),goToPage:e=>P(e),search:A,onChange:e=>{O(h.default.safeParseEventValue(e))},renderNoResults:n.default.createElement("div",{className:"text-center"}),filterRow:()=>!0})),n.default.createElement("div",{className:"mt-2"},"Segments require you to identitfy TVs, setting traits will add TVs to segments.")))))}))},98304:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=o(a(98606)),s=o(a(23186));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c=(u(n=class extends r.Component{constructor(e,t){super(e,t),this.state={preselect:Utils.fromParam().flag,tags:[]}}componentDidMount(){const e=this.props.match.params;i.default.get(`${Project.api}environments/${e.environmentId}/${Utils.getIdentitiesEndpoint()}/?q="${e.identity}"`).then((t=>{const a=t.results[0];a?this.context.router.history.replace(`/project/${e.projectId}/environment/${e.environmentId}/users/${e.identity}/${a.identity||a.identity_uuid}`):this.context.router.history.replace(`/project/${e.projectId}/environment/${e.environmentId}/users/`)}))}render(){return r.default.createElement("div",{className:"app-container"},r.default.createElement("div",{className:"text-center"},r.default.createElement(Loader,null)))}},"displayName","UserPage"),u(n,"contextTypes",{router:propTypes.object.isRequired}),n);c.propTypes={},e.exports=(0,s.default)(c)},83849:(e,t,a)=>{"use strict";var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=A(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),i=w(a(93655)),s=w(a(45595)),o=w(a(26851)),l=w(a(2137)),u=w(a(12146)),c=w(a(61642)),d=w(a(4478)),p=(w(a(34066)),w(a(65164)),a(52014)),m=a(32799),f=w(a(96814)),g=w(a(98606)),h=w(a(45809)),v=w(a(12339)),E=w(a(76136)),y=w(a(23186)),b=w(a(93328));function w(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(A=function(e){return e?a:t})(e)}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},O.apply(this,arguments)}function S(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const T=(n=class extends r.Component{constructor(e,t){super(e,t),S(this,"getFilter",(()=>({is_archived:this.state.showArchived,tags:this.state.tags&&this.state.tags.length?this.state.tags.join(","):void 0}))),S(this,"onSave",(()=>{this.getActualFlags()})),S(this,"editSegment",(e=>{API.trackEvent(v.default.events.VIEW_SEGMENT),openModal(`Segment - ${e.name}`,r.default.createElement(c.default,{segment:e.id,readOnly:!0,isEdit:!0,environmentId:this.props.match.params.environmentId,projectId:this.props.match.params.projectId}),null,{className:"fade side-modal create-segment-modal"})})),S(this,"getActualFlags",(()=>{const e=this.props.match.params,t=e.environmentId,a=e.id;if(Utils.getFlagsmithHasFeature("use_admin_identity_featurestates")){const e=`${Project.api}environments/${t}/${Utils.getIdentitiesEndpoint()}/${a}/${Utils.getFeatureStatesEndpoint()}/all/`;g.default.get(e).then((e=>{this.setState({actualFlags:_.keyBy(e,(e=>e.feature.name))})})).catch((()=>{}))}else{const e=`${Utils.getSDKEndpoint()}identities/?identifier=${this.props.match.params.identity}`;fetch(e,{headers:{"X-Environment-Key":this.props.match.params.environmentId}}).then((e=>e.json())).then((e=>{this.setState({actualFlags:_.keyBy(e.flags,(e=>e.feature.name))})})).catch((()=>{}))}})),S(this,"onTraitSaved",(()=>{AppActions.getIdentitySegments(this.props.match.params.projectId,this.props.match.params.id)})),S(this,"confirmToggle",((e,t,a)=>{openModal("Toggle Feature",r.default.createElement(i.default,{identity:this.props.match.params.id,identityName:decodeURIComponent(this.props.match.params.identity),environmentId:this.props.match.params.environmentId,projectFlag:e,environmentFlag:t,cb:a}))})),S(this,"editFeature",((e,t,a,n)=>{history.replaceState({},null,`${document.location.pathname}?flag=${e.name}`),API.trackEvent(v.default.events.VIEW_USER_FEATURE),openModal(r.default.createElement("span",null,"Edit TV Feature:"," ",r.default.createElement("span",{className:"standard-case"},e.name)),r.default.createElement(o.default,{isEdit:!0,identity:this.props.match.params.id,identityName:decodeURIComponent(this.props.match.params.identity),environmentId:this.props.match.params.environmentId,projectId:this.props.match.params.projectId,projectFlag:e,identityFlag:O({},a,{multivariate_feature_state_values:n}),environmentFlag:t}),null,{className:"side-modal fade create-feature-modal overflow-y-auto",onClose:()=>{history.replaceState({},null,`${document.location.pathname}`)}})})),S(this,"createTrait",(()=>{API.trackEvent(v.default.events.VIEW_USER_FEATURE),openModal("Create TV Trait",r.default.createElement(l.default,{isEdit:!1,onSave:this.onTraitSaved,identity:this.props.match.params.id,identityName:decodeURIComponent(this.props.match.params.identity),environmentId:this.props.match.params.environmentId,projectId:this.props.match.params.projectId}))})),S(this,"editTrait",(e=>{API.trackEvent(v.default.events.VIEW_USER_FEATURE),openModal("Edit TV Trait",r.default.createElement(l.default,O({isEdit:!0},e,{onSave:this.onTraitSaved,identity:this.props.match.params.id,identityName:decodeURIComponent(this.props.match.params.identity),environmentId:this.props.match.params.environmentId,projectId:this.props.match.params.projectId})))})),S(this,"confirmRemove",((e,t,a)=>{openModal("Reset TV Feature",r.default.createElement(s.default,{identity:a,environmentId:this.props.match.params.environmentId,projectFlag:e,cb:t}))})),S(this,"removeTrait",((e,t)=>{openConfirm(r.default.createElement("h3",null,"Delete Trait"),r.default.createElement("p",null,"Are you sure you want to delete trait ",r.default.createElement("strong",null,t)," from this TV?"),(()=>AppActions.deleteIdentityTrait(this.props.match.params.environmentId,this.props.match.params.id,e||t)))})),S(this,"filter",(()=>{AppActions.searchFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,0,this.getFilter())})),this.state={preselect:Utils.fromParam().flag,tags:[]}}componentDidMount(){const e=this.props.match.params;AppActions.getIdentity(this.props.match.params.environmentId,this.props.match.params.id),AppActions.getIdentitySegments(this.props.match.params.projectId,this.props.match.params.id),AppActions.getFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,0,this.getFilter()),(0,p.getTags)((0,m.getStore)(),{projectId:`${e.projectId}`}),this.getActualFlags(),API.trackPage(v.default.pages.USER)}render(){const e=this.state.actualFlags,t=this.props.match.params,a=t.environmentId,n=t.projectId,i=!AccountStore.getOrganisation().persist_trait_data;return r.default.createElement(b.default,{level:"environment",permission:Utils.getManageUserPermission(),id:a},(({permission:t})=>r.default.createElement(b.default,{level:"environment",permission:"DELETE_IDENTITIES",id:a},(({permission:s})=>r.default.createElement(b.default,{level:"environment",permission:"MANAGE_IDENTITY_OVERRIDES",id:a},(({permission:o})=>r.default.createElement("div",{className:"app-container",id:"user-page","data-test":"user-page"},r.default.createElement(IdentityProvider,{onSave:this.onSave},(({environmentFlags:l,identity:c,identityFlags:p,isLoading:m,projectFlags:g,traits:y},{removeFlag:w,toggleFlag:A})=>!m||this.state.tags.length||this.state.tags.length||this.state.showArchived||"string"==typeof this.state.search||p&&e&&g?r.default.createElement("div",{className:"container"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-12"},r.default.createElement("h3",null,c&&c.identity.identifier||this.props.match.params.id),r.default.createElement("p",null,"View and manage feature states and traits for this TV. This will override any feature states you have for your current app for this TV only. Any features that are not overriden for this TV will fallback to the app defaults."),r.default.createElement(FormGroup,null,r.default.createElement(FormGroup,null,r.default.createElement(PanelSearch,{id:"user-features-list",className:"no-pad",itemHeight:70,icon:"ion-ios-rocket",title:"Features",renderFooter:()=>r.default.createElement(r.default.Fragment,null,r.default.createElement(h.default,{showNamesButton:!0,className:"mt-4 mx-2",title:"Features",json:g&&Object.values(g)}),r.default.createElement(h.default,{className:"mx-2",title:"Environment Feature States",json:l&&Object.values(l)}),r.default.createElement(h.default,{className:"mx-2",title:"Identity Feature States",json:p&&Object.values(p)})),header:r.default.createElement("div",{className:"pb-2"}),isLoading:d.default.isLoading,onSortChange:e=>{this.setState({sort:e},(()=>{AppActions.getFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,0,this.getFilter())}))},items:g,sorting:[{default:!0,label:"Name",order:"asc",value:"name"},{label:"Created Date",order:"asc",value:"created_date"}],renderRow:({id:t,name:i},s)=>{const u=p[t]||{},d=l&&l[t]||{},m=u.identity||u.identity_uuid,h=m?u.enabled:d.enabled,E=m?u.feature_state_value:d.feature_state_value,y=e&&!!e&&e[i]&&e[i].enabled||!1,O=!!e&&e[i]&&e[i].feature_state_value,S=!m&&y!==h,T=!m&&!((e,t)=>!(null!=e&&""!==e&&void 0!==e||null!=t&&""!==t&&void 0!==t)||e===t)(O,E),P=g&&g.find((e=>e.id===(d&&d.feature))),N=T&&P&&P.multivariate_options&&P.multivariate_options.find((e=>Utils.featureStateToValue(e)===O)),I=S||T,j=()=>{o&&this.editFeature(_.find(g,{id:t}),l&&l[t],p&&p[t]||e[i],p&&p[t]&&p[t].multivariate_feature_state_values)};return i===this.state.preselect&&(this.state.preselect=null,j()),r.default.createElement(b.default,{level:"environment",permission:"MANAGE_IDENTITY_OVERRIDES",id:a},(({permission:a})=>r.default.createElement(Row,{className:`list-item ${a?"":"non-"}clickable py-1 ${I&&"flag-different"}`,key:t,space:!0,"data-test":`user-feature-${s}`},r.default.createElement("div",{onClick:a?j:null,className:"flex flex-1"},r.default.createElement(Row,null,r.default.createElement(ButtonLink,{className:"mr-2"},i),r.default.createElement(f.default,{projectId:`${n}`,value:P?.tags})),m?r.default.createElement(Row,{className:"chip"},r.default.createElement("span",null,"Overriding defaults"),r.default.createElement("span",{className:"chip-icon icon ion-md-information"})):S?r.default.createElement("span",{"data-test":`feature-override-${s}`,className:"flex-row chip"},r.default.createElement(Row,null,r.default.createElement(Flex,null,N?r.default.createElement("span",null,"This flag is being overridden by a variation defined on your feature, the control value is"," ",r.default.createElement("strong",null,h?"on":"off")," ","for this TV"):r.default.createElement("span",null,"This flag is being overridden by segments and would normally be"," ",r.default.createElement("strong",null,h?"on":"off")," ","for this TV")),r.default.createElement("span",{className:"ml-1 chip-icon icon ion-md-information"}))):T?N?r.default.createElement("span",{"data-test":`feature-override-${s}`,className:"flex-row chip"},r.default.createElement("span",null,"This feature is being overriden by a % variation in the app, the control value of this feature is"," ",r.default.createElement(FeatureValue,{includeEmpty:!0,"data-test":`user-feature-original-value-${s}`,value:`${E}`})),r.default.createElement("span",{className:"chip-icon icon ion-md-information"})):r.default.createElement("span",{"data-test":`feature-override-${s}`,className:"flex-row chip"},r.default.createElement("span",null,"This feature is being overriden by segments and would normally be"," ",r.default.createElement(FeatureValue,{includeEmpty:!0,"data-test":`user-feature-original-value-${s}`,value:`${E}`})," ","for this TV"),r.default.createElement("span",{className:"chip-icon icon ion-md-information"})):r.default.createElement("div",{className:"list-item-footer"},r.default.createElement("span",{className:"faint"},"Using app defaults"))),r.default.createElement(Row,null,r.default.createElement(Column,null,r.default.createElement("div",{className:"feature-value"},r.default.createElement(FeatureValue,{"data-test":`user-feature-value-${s}`,value:O}))),r.default.createElement(Column,null,a&&r.default.createElement("div",null,Utils.renderWithPermission(o,v.default.environmentPermissions("Write"),r.default.createElement(Switch,{disabled:!o,"data-test":`user-feature-switch-${s}${y?"-on":"-off"}`,checked:m?h:y,onChange:()=>this.confirmToggle(_.find(g,{id:t}),e[i],(()=>{A({environmentFlag:e[i],environmentId:this.props.match.params.environmentId,identity:this.props.match.params.id,identityFlag:u,projectFlag:{id:t}})}))})))),m&&a&&r.default.createElement(Column,null,Utils.renderWithPermission(o,v.default.environmentPermissions("Write"),r.default.createElement(Button,{disabled:!o,onClick:()=>this.confirmRemove(_.find(g,{id:t}),(()=>{w({environmentId:this.props.match.params.environmentId,identity:this.props.match.params.id,identityFlag:u})}),c.identity.identifier)},"Reset")))))))},renderSearchWithNoResults:!0,renderNoResults:this.state.tags?.length||this.state.showArchived?r.default.createElement("div",null,"No results"):r.default.createElement("div",{className:"text-center m-2"},"This TV has no features yet. ",r.default.createElement("br",null),"When you start"," ",r.default.createElement(Link,{className:"dark",to:`project/${this.props.match.params.projectId}/environment/${this.props.match.params.environmentId}/features`},"creating features")," ","for your app you will set them per TV here."),paging:d.default.paging,search:this.state.search,nextPage:()=>AppActions.getFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,d.default.paging.next,this.getFilter()),prevPage:()=>AppActions.getFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,d.default.paging.previous,this.getFilter()),goToPage:e=>AppActions.getFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,e,this.getFilter()),onChange:e=>{this.setState({search:Utils.safeParseEventValue(e)},(()=>{AppActions.searchFeatures(this.props.match.params.projectId,this.props.match.params.environmentId,!0,this.state.search,this.state.sort,0,this.getFilter())}))},filterRow:()=>!0})),!i&&r.default.createElement(FormGroup,null,r.default.createElement(PanelSearch,{id:"user-traits-list",className:"no-pad",icon:"ion-ios-person",itemHeight:65,title:"Traits",items:y,renderFooter:()=>r.default.createElement(FormGroup,{className:"text-center mb-2"},Utils.renderWithPermission(t,v.default.environmentPermissions("Write"),r.default.createElement(Button,{disabled:!t,className:"mb-2",id:"add-trait",onClick:this.createTrait},"Add new trait"))),renderRow:({id:e,trait_key:a,trait_value:n},i)=>r.default.createElement(Row,{className:"list-item clickable py-2",key:a,space:!0,"data-test":`user-trait-${i}`},r.default.createElement("div",{onClick:t?()=>this.editTrait({id:e,trait_key:a,trait_value:n}):void 0,className:"flex flex-1"},r.default.createElement(Row,null,r.default.createElement(ButtonLink,{className:`js-trait-key-${i}`,href:"#"},a))),r.default.createElement(Row,null,r.default.createElement(Column,null,r.default.createElement(FeatureValue,{includeEmpty:!0,"data-test":`user-trait-value-${i}`,value:n})),r.default.createElement(Column,null,Utils.renderWithPermission(s,v.default.environmentPermissions("Admin"),r.default.createElement("button",{id:"remove-feature",className:"btn btn--with-icon",type:"button",disabled:!s,onClick:()=>this.removeTrait(e,a),"data-test":`delete-user-trait-${i}`},r.default.createElement(RemoveIcon,null)))))),renderNoResults:r.default.createElement(Panel,{icon:"ion-ios-person",title:"Traits"},r.default.createElement("div",{className:"text-center"},"This TV has no traits.",r.default.createElement(FormGroup,{className:"text-center mb-0 mt-2"},Utils.renderWithPermission(t,v.default.environmentPermissions("Write"),r.default.createElement(Button,{disabled:!t,className:"mb-2",id:"add-trait",onClick:this.createTrait},"Add new trait"))))),filterRow:({trait_key:e},t)=>e.toLowerCase().indexOf(t)>-1})),r.default.createElement(E.default,{id:this.props.match.params.id},(({segments:e})=>e?r.default.createElement(FormGroup,null,r.default.createElement(PanelSearch,{id:"user-segments-list",className:"no-pad",icon:"ion-ios-globe",title:"Segments",itemHeight:70,items:e||[],renderRow:({created_date:t,description:a,name:n},i)=>r.default.createElement(Row,{onClick:()=>this.editSegment(e[i]),className:"list-item clickable",space:!0,key:i},r.default.createElement("div",{className:"flex flex-1"},r.default.createElement(Row,null,r.default.createElement(ButtonLink,{onClick:()=>this.editSegment(e[i])},r.default.createElement("span",{"data-test":`segment-${i}-name`,className:"bold-link"},n))),r.default.createElement("div",{className:"list-item-footer faint mt-2"},a?r.default.createElement("div",null,a,r.default.createElement("br",null)):"","Created"," ",moment(t).format("DD/MMM/YYYY")))),renderNoResults:r.default.createElement(Panel,{icon:"ion-ios-globe",title:"Segments"},r.default.createElement("div",null,"This TV is not a member of any segments.")),filterRow:({name:e},t)=>e.toLowerCase().indexOf(t)>-1})):r.default.createElement("div",{className:"text-center"},r.default.createElement(Loader,null)))))),r.default.createElement("div",{className:"col-md-12 mt-2"},r.default.createElement(FormGroup,null,r.default.createElement(u.default,{title:"Check to see what features and traits are coming back for this user",environmentId:this.props.match.params.environmentId,userId:c&&c.identity.identifier||this.props.match.params.id}))))):r.default.createElement("div",{className:"text-center"},r.default.createElement(Loader,null)))))))))))}},S(n,"displayName","UserPage"),n);T.propTypes={},e.exports=(0,y.default)(T)},32172:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=a(38654),i=a(93328),s=p(a(23186)),o=a(81206),l=p(a(61509)),u=(p(a(38088)),p(a(27704))),c=p(a(45809)),d=p(a(73719));function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(m=function(e){return e?a:t})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a(63790);t.default=(0,s.default)((e=>{const t=f((0,n.useState)({number:1,pageType:void 0,pages:void 0}),2),a=t[0],s=t[1],p=(0,l.default)(d.default.fromParam().search,(()=>{s({number:1,pageType:void 0,pages:void 0})}),12),m=p.search,g=p.searchInput,h=p.setSearchInput,v=(f((0,o.useDeleteIdentityMutation)({}),1)[0],d.default.getIsEdge()),E=(0,o.useGetIdentitiesQuery)({environmentId:e.match.params.environmentId,isEdge:v,page:a.number,countOnly:!0}).data,y=(0,o.useGetIdentitiesQuery)({environmentId:e.match.params.environmentId,isEdge:v,page:a.number,pageType:a.pageType,page_size:10,pages:a.pages,search:m}),_=y.data,b=y.isLoading,w=e.match.params.environmentId,A=(0,i.useHasPermission)({id:w,level:"environment",permission:d.default.getViewIdentitiesPermission()}).permission;return n.default.createElement("div",{className:"app-container container",id:"user-page","data-test":"user-page"},n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement(Row,null,n.default.createElement(Flex,null,n.default.createElement("div",null,n.default.createElement("h3",null,"Vizio TV"),n.default.createElement("p",null,"View and manage features states for individual users. This will override individual default feature settings for your selected app."," "),n.default.createElement("p",null,"Total no of devices: ",n.default.createElement("b",null,E?.count)))))),n.default.createElement(FormGroup,null,n.default.createElement("div",null,n.default.createElement(FormGroup,null,n.default.createElement(u.default,{renderSearchWithNoResults:!0,renderFooter:()=>n.default.createElement(c.default,{className:"mx-2 mt-4",title:"Users",json:_?.results}),id:"users-list",title:"Vizio TV",className:"no-pad",isLoading:b,filterLabel:d.default.getIsEdge()?"Starts with":"Contains",icon:"ion-md-person",items:""!==m?_?.results:null,nextPage:()=>{s({number:a.number+1,pageType:"NEXT",pages:_?.last_evaluated_key?(a.pages||[]).concat([_?.last_evaluated_key]):void 0})},prevPage:()=>{s({number:a.number-1,pageType:"PREVIOUS",pages:a.pages?d.default.removeElementFromArray(a.pages,a.pages.length-1):void 0})},goToPage:e=>{s({number:e,pageType:void 0,pages:void 0})},renderRow:({id:e,identifier:t,identity_uuid:a},i)=>{let s="";return""!==m&&1===_?.results?.length&&_.results[0].identifier===m&&(s=`users/${encodeURIComponent(t)}/${e}`),A?""!==m&&1===_?.results?.length&&_.results[0].identifier===m?n.default.createElement(r.Redirect,{to:s}):null:n.default.createElement(Row,{space:!0,className:"list-item",key:e,"data-test":`user-item-${i}`},t)},renderNoResults:n.default.createElement("div",null,m?n.default.createElement("span",{style:{display:"inline-block",padding:"1rem"}},"You have no users in your project"," ","for ",n.default.createElement("strong",null,'"',m,'"')):n.default.createElement("span",{style:{display:"inline-block",padding:"1rem"}},"Search to find the device id")),filterRow:()=>!0,search:g,onChange:e=>{h(d.default.safeParseEventValue(e))}}))))))}))},87561:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=function({className:e,fill:t,height:a,width:n}){return r.default.createElement("svg",{className:e,width:n||"100%",height:a,viewBox:"0 0 26 23"},r.default.createElement("path",{d:"M23.2 22.4H2.4A2.4 2.4 0 010 20V2.4A2.4 2.4 0 012.4 0h20.8a2.4 2.4 0 012.4 2.4V20a2.4 2.4 0 01-2.4 2.4zM6.4 4.4a2 2 0 100 4 2 2 0 000-4zm0 4.8a2 2 0 100 4 2 2 0 000-4zm0 4.8a2 2 0 100 4 2 2 0 000-4zm14.4-6.8V5.6a.6.6 0 00-.6-.6h-10a.6.6 0 00-.6.6v1.6a.6.6 0 00.6.6h10a.6.6 0 00.6-.6zm0 4.8v-1.6a.6.6 0 00-.6-.6h-10a.6.6 0 00-.6.6V12a.6.6 0 00.6.6h10a.6.6 0 00.6-.6zm0 4.8v-1.6a.6.6 0 00-.6-.6h-10a.6.6 0 00-.6.6v1.6a.6.6 0 00.6.6h10a.6.6 0 00.6-.6z",fill:t||"white",fillRule:"evenodd"}))}},56063:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=function({className:e,height:t,width:a}){return r.default.createElement("svg",{className:e,width:a||"100%",height:t,viewBox:"0 0 24 24",fill:"none"},r.default.createElement("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),r.default.createElement("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),r.default.createElement("g",{id:"SVGRepo_iconCarrier"}," ",r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 16.5L19.5 4.5L18.75 3.75H9L8.25 4.5L8.25 7.5L5.25 7.5L4.5 8.25V20.25L5.25 21H15L15.75 20.25V17.25H18.75L19.5 16.5ZM15.75 15.75L15.75 8.25L15 7.5L9.75 7.5V5.25L18 5.25V15.75H15.75ZM6 9L14.25 9L14.25 19.5L6 19.5L6 9Z",fill:"#080341"})," "))}},90174:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=function({className:e,height:t,width:a}){return r.default.createElement("svg",{className:e,width:a||"100%",height:t,viewBox:"0 0 21 21",fill:"none"},r.default.createElement("path",{fillRule:"evenodd",d:"M8.56078 20.2501L20.5608 8.25011L15.7501 3.43945L3.75012 15.4395V20.2501H8.56078ZM15.7501 5.56077L18.4395 8.25011L16.5001 10.1895L13.8108 7.50013L15.7501 5.56077ZM12.7501 8.56079L15.4395 11.2501L7.93946 18.7501H5.25012L5.25012 16.0608L12.7501 8.56079Z",fill:"#080341"}))}},58713:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=function({className:e}){return r.default.createElement("svg",{className:e,viewBox:"0 0 21 21"},r.default.createElement("path",{d:"M20.207.772a.726.726 0 00-.498-.497C18.425 0 17.419 0 16.417 0c-4.129 0-6.605 2.208-8.453 5.12H3.796c-.652 0-1.424.477-1.716 1.06L.103 10.132c-.061.135-.095.28-.1.428 0 .53.43.96.96.96H5.12a3.84 3.84 0 013.84 3.84v4.16c0 .53.43.96.96.96.148-.005.294-.04.429-.1l3.95-1.977c.582-.291 1.059-1.062 1.059-1.714v-4.177c2.903-1.853 5.12-4.336 5.12-8.444.004-1.006.004-2.012-.272-3.296zM15.362 6.72a1.6 1.6 0 110-3.2 1.6 1.6 0 010 3.2zM1.427 14.083C.393 15.117-.118 17.703.023 20.456c2.765.143 5.345-.374 6.375-1.404 1.611-1.611 1.715-3.76.252-5.222-1.463-1.462-3.611-1.359-5.223.253zm3.266 3.36c-.344.344-1.204.516-2.125.469-.047-.918.123-1.78.468-2.124.537-.538 1.253-.572 1.74-.085.488.488.454 1.204-.083 1.74z",fill:"#FFF",fillRule:"evenodd"}))}},55708:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=function({className:e,srcImage:t}){return r.default.createElement("img",{src:t,className:e})}},20429:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=function({className:e,fill:t,height:a,width:n}){return r.default.createElement("svg",{className:e,width:n||"100%",height:a,viewBox:"0 0 26 18"},r.default.createElement("path",{d:"M24.42 12.372a4.692 4.692 0 000-1.704l1.032-.596a.29.29 0 00.132-.34 6.003 6.003 0 00-1.328-2.296.292.292 0 00-.36-.056l-1.032.596a4.696 4.696 0 00-1.476-.852V5.932a.291.291 0 00-.228-.284c-.892-.2-1.8-.192-2.648 0a.291.291 0 00-.228.284v1.192c-.54.192-1.04.48-1.476.852l-1.032-.596a.293.293 0 00-.36.056 6.003 6.003 0 00-1.328 2.296.295.295 0 00.132.34l1.032.596a4.692 4.692 0 000 1.704l-1.032.596a.29.29 0 00-.132.34 6.033 6.033 0 001.328 2.296c.092.1.24.124.36.056l1.032-.596c.436.372.936.66 1.476.852v1.192c0 .136.096.256.228.284.892.2 1.8.192 2.648 0a.291.291 0 00.228-.284v-1.192c.54-.192 1.04-.48 1.476-.852l1.032.596a.293.293 0 00.36-.056 6.003 6.003 0 001.328-2.296.295.295 0 00-.132-.34l-1.032-.596zm-4.58 1.088a1.942 1.942 0 01-1.94-1.94c0-1.068.872-1.94 1.94-1.94s1.94.872 1.94 1.94-.868 1.94-1.94 1.94zm-16-5.78A2.562 2.562 0 006.4 5.12a2.562 2.562 0 00-2.56-2.56 2.562 2.562 0 00-2.56 2.56 2.562 2.562 0 002.56 2.56zm8.96 1.28c.076 0 .148-.02.224-.024a7.374 7.374 0 011.452-2.368c.296-.32.716-.504 1.156-.504.276 0 .548.072.784.212l.316.184c.032-.02.064-.036.096-.056.28-.584.448-1.232.448-1.92a4.478 4.478 0 00-4.48-4.48A4.47 4.47 0 008.32 4.48a4.478 4.478 0 004.48 4.48zm4.208 7.78c-.092-.048-.184-.104-.272-.156-.328.192-.612.392-1.1.392a1.59 1.59 0 01-1.156-.504 7.294 7.294 0 01-1.608-2.784c-.428-1.38.996-1.988 1.032-2.012a4.058 4.058 0 010-.312l-.316-.184a1.63 1.63 0 01-.392-.324c-.132.008-.26.024-.392.024-.984 0-1.904-.24-2.74-.64h-.332a4.61 4.61 0 00-4.612 4.608V16c0 1.06.86 1.92 1.92 1.92h10.216a1.54 1.54 0 01-.248-.812v-.368zM6.924 9.704A2.552 2.552 0 005.12 8.96H2.56A2.562 2.562 0 000 11.52v1.28c0 .708.572 1.28 1.28 1.28h2.636a5.866 5.866 0 013.008-4.376z",fill:t||"white",fillRule:"evenodd"}))}},86420:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=function({className:e}){return r.default.createElement("svg",{className:e,viewBox:"0 0 315 315"},r.default.createElement("path",{d:"M293.002 78.53C249.646 3.435 153.618-22.296 78.529 21.068 3.434 64.418-22.298 160.442 21.066 235.534c43.35 75.095 139.375 100.83 214.465 57.47 75.096-43.365 100.84-139.384 57.471-214.474zm-73.168 187.271c-60.067 34.692-136.894 14.106-171.576-45.973C13.568 159.761 34.161 82.935 94.23 48.26c60.071-34.69 136.894-14.106 171.578 45.971 34.685 60.076 14.098 136.886-45.974 171.57zm-6.279-115.149l-82.214-47.949c-7.492-4.374-13.535-.877-13.493 7.789l.421 95.174c.038 8.664 6.155 12.191 13.669 7.851l81.585-47.103c7.506-4.332 7.522-11.388.032-15.762z",fill:"#f27157"}))}},82840:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=function({className:e}){return r.default.createElement("svg",{className:e,viewBox:"0 0 21 21"},r.default.createElement("path",{d:"M21.112 11.52H11.62l6.321 6.321c.242.242.64.261.888.027a9.58 9.58 0 002.925-5.634c.054-.379-.26-.714-.642-.714zm-.634-2.592A9.623 9.623 0 0011.552 0c-.365-.025-.672.283-.672.648V9.6h8.95c.366 0 .674-.306.648-.671zM8.96 11.52V2.028c0-.382-.336-.696-.714-.642-4.766.673-8.41 4.838-8.24 9.829.174 5.125 4.587 9.328 9.715 9.264a9.525 9.525 0 005.41-1.761c.317-.224.337-.69.063-.963L8.96 11.52z",fill:"#FFF",fillRule:"evenodd"}))}},59877:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=function({}){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionicon",viewBox:"0 0 512 512"},r.default.createElement("path",{d:"M259.92 262.91L216.4 149.77a9 9 0 00-16.8 0l-43.52 113.14a9 9 0 01-5.17 5.17L37.77 311.6a9 9 0 000 16.8l113.14 43.52a9 9 0 015.17 5.17l43.52 113.14a9 9 0 0016.8 0l43.52-113.14a9 9 0 015.17-5.17l113.14-43.52a9 9 0 000-16.8l-113.14-43.52a9 9 0 01-5.17-5.17zM108 68L88 16 68 68 16 88l52 20 20 52 20-52 52-20-52-20zM426.67 117.33L400 48l-26.67 69.33L304 144l69.33 26.67L400 240l26.67-69.33L496 144l-69.33-26.67z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"0"}))}},37906:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(96540))&&n.__esModule?n:{default:n};t.default=function({className:e}){return r.default.createElement("svg",{className:e,viewBox:"0 0 26 18"},r.default.createElement("path",{d:"M7.68 8.96a4.478 4.478 0 004.48-4.48A4.478 4.478 0 007.68 0 4.478 4.478 0 003.2 4.48a4.478 4.478 0 004.48 4.48zm3.072 1.28h-.332c-.832.4-1.756.64-2.74.64-.984 0-1.904-.24-2.74-.64h-.332A4.61 4.61 0 000 14.848V16c0 1.06.86 1.92 1.92 1.92h11.52c1.06 0 1.92-.86 1.92-1.92v-1.152a4.61 4.61 0 00-4.608-4.608zM19.2 8.96a3.841 3.841 0 000-7.68 3.841 3.841 0 000 7.68zm1.92 1.28h-.152a5.39 5.39 0 01-1.768.32 5.39 5.39 0 01-1.768-.32h-.152c-.816 0-1.568.236-2.228.616.976 1.052 1.588 2.448 1.588 3.992v1.536c0 .088-.02.172-.024.256h7.064c1.06 0 1.92-.86 1.92-1.92a4.478 4.478 0 00-4.48-4.48z",fill:"#FFF",fillRule:"nonzero"}))}},50058:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=a(2543),i=a(93328),s=g(a(73719)),o=g(a(10408)),l=g(a(12339)),u=g(a(96814)),c=a(52014),d=a(54242),p=g(a(65164)),m=g(a(57240)),f=g(a(54050));function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=({onChange:e,projectId:t,readOnly:a,value:g})=>{const h=(0,c.useGetTagsQuery)({projectId:t}),E=h.data,y=h.isLoading,_=v((0,n.useState)(""),2),b=_[0],w=_[1],A=v((0,n.useState)(!1),2),O=A[0],S=A[1],T=v((0,n.useState)(),2),P=T[0],N=T[1],I=v((0,n.useState)("SELECT"),2),j=I[0],F=I[1],R=v((0,c.useDeleteTagMutation)(),1)[0],C=(0,i.useHasPermission)({id:t,level:"project",permission:"ADMIN"}).permission,k=t=>{const a=g||[],n=a?.includes(t.id);e(n?(0,r.filter)(a,(e=>e!==t.id)):a.concat([t.id]))},M=()=>S(!O),$=(0,n.useMemo)((()=>b.toLowerCase()?(0,r.filter)(E,(e=>e.label.toLowerCase().includes(b))):E||[]),[b,E]),D=E&&!E.length;return n.default.createElement("div",null,n.default.createElement(Row,{className:"inline-tags mt-2"},n.default.createElement(u.default,{projectId:t,onAdd:a?void 0:M,value:g})),n.default.createElement(o.default,{title:"Tags",isOpen:O,onBack:()=>F("SELECT"),showBack:"SELECT"!==j,onClose:M,className:"inline-modal--tags"},"SELECT"===j&&!D&&n.default.createElement("div",null,n.default.createElement(f.default,{value:b,onChange:e=>w(s.default.safeParseEventValue(e)),className:"full-width mb-2",placeholder:"Search tags..."}),y&&!E&&n.default.createElement("div",{className:"text-center"},n.default.createElement(Loader,null)),n.default.createElement("div",{className:"tag-list"},$&&$.map((i=>n.default.createElement("div",{key:i.id},n.default.createElement(Row,{className:"py-2"},n.default.createElement(Flex,null,n.default.createElement(p.default,{className:"px-2 py-2",onClick:k,selected:g?.includes(i.id),tag:i})),!a&&!!C&&n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{onClick:()=>(e=>{N(e),F("EDIT")})(i),className:"ml-2 px-2 clickable"},n.default.createElement("span",{className:"icon ion-md-settings"})),n.default.createElement("div",{onClick:()=>(a=>{openConfirm("Please confirm","Are you sure you wish to delete this tag?",(()=>{e((0,r.filter)(g||[],(e=>e!==a.id))),R({id:a.id,projectId:t}),S(!0)}))})(i),className:"ml-2 px-2 clickable"},n.default.createElement("img",{width:16,src:"/static/images/icons/bin.svg"}))))))),!a&&n.default.createElement("div",{className:"text-center mb-2 mt-3"},s.default.renderWithPermission(C,l.default.projectPermissions("Admin"),n.default.createElement(d.ButtonLink,{disabled:!C,onClick:()=>{F("CREATE"),w("")},type:"button"},"Create a New Tag ",n.default.createElement("span",{className:"ml-3 icon ion-md-add"})))),E&&E.length&&!$.length?n.default.createElement("div",{className:"text-center"},'No results for "',n.default.createElement("strong",null,b),'"'):null,D&&n.default.createElement("div",{className:"text-center"},"You have no tags yet"))),("CREATE"===j||D)&&n.default.createElement(m.default,{projectId:t,onComplete:e=>{k(e),F("SELECT")}}),"EDIT"===j&&n.default.createElement(m.default,{projectId:t,tag:P,onComplete:e=>{k(e),F("SELECT")}})))}},57240:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=d(a(12339)),i=d(a(93328)),s=d(a(73719)),o=a(52014),l=d(a(92431)),u=d(a(54242)),c=d(a(65164));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=({onComplete:e,projectId:t,tag:a})=>{const d=f((0,n.useState)(a),2),p=d[0],g=d[1],h=!!p?.id,v=f((0,o.useCreateTagMutation)(),2),E=v[0],y=v[1],_=y.data,b=y.isLoading,w=y.isSuccess,A=f((0,o.useUpdateTagMutation)(),2),O=A[0],S=A[1],T=S.data,P=S.isLoading,N=S.isSuccess,I=b||P;(0,n.useEffect)((()=>{w&&_&&F(_)}),[w]),(0,n.useEffect)((()=>{w&&T&&F(T)}),[N]),(0,n.useEffect)((()=>{setTimeout((()=>{document.getElementById("tag-label")?.focus()}),500)}),[]);const j=(e,t)=>{g(m({},p||{},{[e]:s.default.safeParseEventValue(t)}))},F=t=>{g(t),e?.(t)},R=()=>{I||!p?.color||!p?.label||(h?O({projectId:t,tag:p}):E({projectId:t,tag:p}))};return n.default.createElement("div",null,n.default.createElement(l.default,{value:p?.label,id:"tag-label",inputProps:{className:"full-width mb-2",name:"create-tag-name",onKeyDown:e=>{"Enter"===e.key&&R()}},title:"Name",onChange:e=>j("label",e)}),n.default.createElement(l.default,{title:"Select a color",component:n.default.createElement(Row,{className:"mb-2"},r.default.tagColors.map((e=>n.default.createElement("div",{key:e,className:"tag--select mr-2 mb-2"},n.default.createElement(c.default,{onClick:e=>j("color",e.color),selected:p?.color===e,tag:{color:e}})))))}),n.default.createElement("div",{className:"text-center"},n.default.createElement(i.default,{level:"project",permission:"ADMIN",id:t},(({permission:e})=>s.default.renderWithPermission(e,r.default.projectPermissions("Admin"),n.default.createElement(u.default,{onClick:R,type:"button",disabled:I||!p?.color||!p?.label||!e},h?"Save Tag":"Create Tag"))))))}},65164:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(96540)),r=o(a(2520)),i=o(a(32485)),s=o(a(34086));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i,s,o=[],l=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=({className:e,deselectedColor:t,hideNames:a,onClick:o,selected:l,tag:c})=>{const d=u((0,n.useState)(!1),2),p=d[0],m=d[1],f=()=>{o&&m(!p)},g=()=>l?c.color:t||c.color;return a?n.default.createElement("div",{onClick:()=>o?.(c),onMouseEnter:f,onMouseLeave:f,style:{backgroundColor:p?`${(0,r.default)(g()).darken(.1)}`:g()},className:(0,i.default)("tag",{hideNames:a,selected:l},e)},n.default.createElement("div",null,c.label?n.default.createElement(Row,{space:!0},a?"":c.label,l&&n.default.createElement("span",{className:"icon ion-md-checkmark"})):n.default.createElement("div",{className:"text-center"},l&&n.default.createElement("span",{className:"icon ion-md-checkmark"})))):n.default.createElement(s.default,{color:g(),active:l,onClick:o?()=>o(c):null},c.label)}},34066:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(96540)),r=a(2543),i=a(52014),s=l(a(65164)),o=l(a(54242));function l(e){return e&&e.__esModule?e:{default:e}}t.default=({children:e,onChange:t,onClearAll:a,projectId:l,showClearAll:u,showUntagged:c,value:d})=>{const p=(0,i.useGetTagsQuery)({projectId:l}).data,m=e=>d?.includes(e?.id),f=e=>{const a=d||[];a.includes(e.id)?t((0,r.filter)(a,(t=>t!==e.id))):t(a.concat([e.id]))},g=!!c&&{color:"#666",id:"",label:"Untagged"};return n.default.createElement(Row,{className:"tag-filter mx-2 mt-4"},n.default.createElement("div",{className:"ml-1"},n.default.createElement(Row,null,n.default.createElement(Flex,null,n.default.createElement(Row,{className:"tag-filter-list"},e,g&&n.default.createElement("div",{className:"mr-1"},n.default.createElement(s.default,{key:g.id,selected:m(g),onClick:f,className:"px-2 py-2",tag:g})),p?.map((e=>n.default.createElement(s.default,{key:e.id,selected:m(e),onClick:f,className:"px-2 py-2 mr-1",tag:e}))))),u&&n.default.createElement(o.default,{onClick:()=>{t((d?.length||0)>=(p?.length||0)?[]:(c?[""]:[]).concat((p||[])?.map((e=>e.id)))),a&&a()},style:{marginBottom:10},className:"btn--link mr-2"},"Clear Filters"))))}},96814:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(96540)),r=o(a(54242)),i=o(a(65164)),s=a(52014);function o(e){return e&&e.__esModule?e:{default:e}}t.default=({onAdd:e,projectId:t,value:a})=>{const o=(0,s.useGetTagsQuery)({projectId:t}).data;return n.default.createElement(Row,{className:"tag-values"},o?.map((t=>a?.includes(t.id)&&n.default.createElement(i.default,{hideNames:!0,onClick:e,className:"px-2 py-2 mr-2",tag:t}))),!!e&&n.default.createElement(r.default,{onClick:e,type:"button",className:"btn--outline"},"Add Tag"))}},49400:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mount=void 0,a(34466),a(91279),a(12947),a(50231),a(14175);var n=a(38654),r=a(19497),i=c(a(13456)),s=c(a(3159)),o=c(a(73719)),l=c(a(42736)),u=c(a(98606));function c(e){return e&&e.__esModule?e:{default:e}}window.Utils=o.default,window.openModal=a(40733).openModal,window.openModal2=a(40733).openModal2,window.openConfirm=a(40733).openConfirm;t.mount=(e,{onNavigate:t,defaultHistory:a,initialPath:c}={})=>{const d=a||(0,r.createMemoryHistory)({initialEntries:[c||"/"]});t&&d.listen(t);const p=o.default.fromParam();p.token&&(API.setCookie("t",p.token),document.location=document.location.origin);const m=API.getCookie("t"),f=API.getEvent();if(f)try{u.default.post("/api/event",JSON.parse(f)).catch((()=>{})).finally((()=>{API.setEvent("")}))}catch(e){}const g=document.location.href.includes("invite");m&&!g&&AppActions.setToken(m),setTimeout((()=>{const t=(0,r.createBrowserHistory)({basename:Project.basename||""});if(-1===document.location.pathname.indexOf("/project/")&&-1===document.location.pathname.indexOf("/create")&&-1===document.location.pathname.indexOf("/invite")&&-1===document.location.pathname.indexOf("/projects")||l.default.getUser()||(API.setRedirect(document.location.pathname+(document.location.search||"")),t.push(`/?redirect=${encodeURIComponent(document.location.pathname+(document.location.search||""))}`)),!(e&&e instanceof HTMLElement))throw new Error("Invalid target container provided to mount.");e&&(e.innerHTML=""),ReactDOM.render(React.createElement(n.HashRouter,null,s.default),e)}),1),ReactDOM.render(React.createElement(i.default,null),document.getElementById("toast"));const h=document.location.href.includes("/widget");if(Project.crispChat&&!h&&(window.$crisp=[],window.CRISP_WEBSITE_ID=Project.crispChat,function(){const e=document,t=e.createElement("script");t.src="https://client.crisp.chat/l.js",t.async=1,e.getElementsByTagName("head")[0].appendChild(t)}()),Project.zendesk&&!h){const e=document.createElement("script");e.type="text/javascript",e.id="ze-snippet",e.async=!0,e.src=`https://static.zdassets.com/ekr/snippet.js?key=${Project.zendesk}`,document.getElementsByTagName("head")[0].appendChild(e)}return{onParentNavigate({pathname:e}){d.location.pathname!==e&&d.push(e)}}}},12947:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(36491)),r=i(a(98606));function i(e){return e&&e.__esModule?e:{default:e}}a.g.API={ajaxHandler(e,t){t.status,t instanceof Error?console.log(t):t.text().then((t=>{if(e){let a=t;try{a=JSON.parse(t)}catch(e){}e.error=a,e.goneABitWest()}})).catch((()=>{e&&e.goneABitWest()}))},alias(e){if(e!==Project.excludeAnalytics){if(Project.mixpanel&&mixpanel.alias(e),Project.heap){heap.identify(e);const t=AccountStore.model,a=t&&t.organisations&&_.map(t.organisations,(e=>`${e.name} #${e.id}(${e.role})[${e.num_seats}]`)).join(",")||"",n=AccountStore.getPlans();heap.addUserProperties({$first_name:t.first_name,$last_name:t.last_name,USER_ID:e,email:e,isCompanyEmail:!(t.email.includes("@gmail")||t.email.includes("@yahoo")||t.email.includes("@hotmail")||t.email.includes("@icloud")),orgs:a,plan:n&&n.join(",")})}if(Project.amplitude){n.default.getInstance().setUserId(e);const t=(new n.default.Identify).set("email",e);n.default.getInstance().identify(t)}flagsmith.identify(e),flagsmith.setTrait("email",e)}},getCookie(e){const t=a(12215).get(e);return t&&API.setCookie(e,t),t},getEvent:()=>API.getCookie("event"),getInvite:()=>a(12215).get("invite"),getInviteType:()=>a(12215).get("invite-type")||"NO_INVITE",getRedirect:()=>API.getCookie("redirect"),getReferrer(){const e=a(12215).get("r");try{return JSON.parse(e)}catch(e){return null}},identify(e,t={}){if(e!==Project.excludeAnalytics)try{const a=t&&t.organisations&&_.map(t.organisations,(e=>`${e.name} #${e.id}(${e.role})[${e.num_seats}]`)).join(",")||"";if(Project.mixpanel){mixpanel.identify(e);const n=AccountStore.getPlans();mixpanel.people.set({$email:e,$first_name:t.first_name,$last_name:t.last_name,USER_ID:e,isCompanyEmail:!(t.email.includes("@gmail")||t.email.includes("@yahoo")||t.email.includes("@hotmail")||t.email.includes("@icloud")),orgs:a,plan:n&&n.join(",")})}if(Project.heap){const n=AccountStore.getPlans();heap.identify(e),heap.addUserProperties({$first_name:t.first_name,$last_name:t.last_name,USER_ID:e,email:e,isCompanyEmail:!(t.email.includes("@gmail")||t.email.includes("@yahoo")||t.email.includes("@hotmail")||t.email.includes("@icloud")),orgs:a,plan:n&&n.join(",")})}if(Project.amplitude){n.default.getInstance().setUserId(e);const a=(new n.default.Identify).set("email",e).set("name",{first:t.first_name,last:t.last_name});n.default.getInstance().identify(a)}flagsmith.identify(e),flagsmith.setTrait("organisations",t.organisations?t.organisations.map((e=>`"${e.id}"`)).join(","):""),flagsmith.setTrait("email",e)}catch(e){console.error("Error identifying",e)}},log(){console.log.apply(this,arguments)},postEvent(e,t){if(!AccountStore.getUser())return;const a=AccountStore.getOrganisation(),n=a&&a.name?` - ${a.name}`:"";return r.default.post("/api/event",{event:`${e}(${AccountStore.getUser().email} ${AccountStore.getUser().first_name} ${AccountStore.getUser().last_name})${n}`,tag:t})},register(e,t,a){e!==Project.excludeAnalytics&&Project.mixpanel&&mixpanel.register({Email:e,"First Name":t,"Last Name":a})},reset(){Project.mixpanel&&mixpanel.reset(),flagsmith.logout()},setCookie(e,t){try{t?a(12215).set(e,t,{expires:30,path:"/",sameSite:"none",secure:!0}):(a(12215).remove(e,{domain:Project.cookieDomain,path:"/"}),a(12215).remove(e,{path:"/"}))}catch(e){}},setEvent:e=>API.setCookie("event",e),setInvite(e){a(12215).set("invite",e)},setInviteType(e){a(12215).set("invite-type",e)},setRedirect:e=>API.setCookie("redirect",e),trackEvent(e){Project.ga&&(Project.logAnalytics&&console.log("ANALYTICS EVENT",e),e||console.error("Passed null event data"),console.info("track",e),e&&e.category&&e.event||console.error("Invalid event provided",e),"First"===e.category&&API.postEvent(e.event+(e.extra?` ${e.extra}`:""),"first_events"),ga("send",{eventAction:e.event,eventCategory:e.category,eventLabel:e.label,hitType:"event"})),Project.heap&&heap.track(e.event,{category:e.category}),Project.mixpanel&&(e||console.error("Passed null event data"),console.info("track",e),e&&e.category&&e.event||console.error("Invalid event provided",e),mixpanel.track(e.event,{category:e.category}))},trackPage(e){Project.ga&&ga("send",{hitType:"pageview",location:document.location.href,page:document.location.pathname,title:e}),Project.heap&&heap.track(`Page View  - ${e}`,{location:document.location.href,page:document.location.pathname,title:e}),Project.mixpanel&&mixpanel.track(`Page View  - ${e}`,{location:document.location.href,page:document.location.pathname,title:e})}};t.default=API},91279:(e,t,a)=>{"use strict";var n=a(41669),r=O(a(71416));a(34818);var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=A(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(34262)),s=O(a(76135)),o=O(a(55378)),l=O(a(87612)),u=O(a(7309)),c=O(a(42877)),d=O(a(5287)),p=O(a(19181)),m=O(a(88055)),f=O(a(24713)),g=O(a(33031)),h=O(a(23181)),v=O(a(38970)),E=O(a(7350)),y=O(a(19747)),_=O(a(58156)),b=a(15042),w=O(a(5556));function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(A=function(e){return e?a:t})(e)}function O(e){return e&&e.__esModule?e:{default:e}}a(99229);var S,T,P,N,I,j;window.isMobile=b.isMobile||n(window).width()<=576,window.flagsmith=r.default,window.moment=a(41110),window.moment.locale("en"),window._={each:s.default,intersection:d.default,sortBy:g.default,orderBy:c.default,filter:l.default,find:u.default,partial:p.default,findIndex:f.default,range:h.default,map:o.default,cloneDeep:m.default,keyBy:v.default,throttle:E.default,every:y.default,get:_.default},window.React=a(96540),window.ReactDOM=a(40961),window.propTypes=w.default,window.Any=w.default.any,window.OptionalArray=w.default.array,window.OptionalBool=w.default.bool,window.OptionalFunc=w.default.func,window.OptionalNumber=w.default.number,window.OptionalObject=w.default.object,window.OptionalString=w.default.string,window.OptionalNode=w.default.node,window.OptionalElement=w.default.element,window.oneOf=w.default.oneOf,window.oneOfType=w.default.oneOfType,window.RequiredArray=w.default.array.isRequired,window.RequiredBool=w.default.bool.isRequired,window.RequiredFunc=w.default.func.isRequired,window.RequiredNumber=w.default.number.isRequired,window.RequiredObject=w.default.object.isRequired,window.RequiredString=w.default.string.isRequired,window.RequiredNode=w.default.node.isRequired,window.RequiredElement=w.default.node.isRequired,window.Link=a(38654).Link,window.NavLink=a(38654).NavLink,Project.heap&&(window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};const a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=`https://cdn.heapanalytics.com/js/heap-${e}.js`;const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(let e=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},t=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],a=0;a<t.length;a++)heap[t[a]]=e(t[a])},heap.load(Project.heap)),Project.ga&&(S=window,T=document,P="script",N="ga",S.GoogleAnalyticsObject=N,S[N]=S[N]||function(){(S[N].q=S[N].q||[]).push(arguments)},S[N].l=1*new Date,I=T.createElement(P),j=T.getElementsByTagName(P)[0],I.async=1,I.src="https://www.google-analytics.com/analytics.js",j.parentNode.insertBefore(I,j),ga("create",Project.ga,"auto")),Project.mixpanel&&(!function(e,t){if(!t.__SV){let n,r,i=window;try{var a;let t,n;const r=i.location,s=r.hash;a=function(e,a){return(t=e.match(RegExp(`${a}=([^&]*)`)))?t[1]:null},s&&a(s,"state")&&(n=JSON.parse(decodeURIComponent(a(s,"state"))),"mpeditor"===n.action&&(i.sessionStorage.setItem("_mpcehash",s),history.replaceState(n.desiredHash||"",e.title,r.pathname+r.search)))}catch(e){}window.mixpanel=t,t._i=[],t.init=function(e,a,i){function s(e,t){const a=t.split(".");2==a.length&&(e=e[a[0]],t=a[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}let o=t;for(void 0!==i?o=t[i]=[]:i="mixpanel",o.people=o.people||[],o.toString=function(e){let t="mixpanel";return"mixpanel"!==i&&(t+=`.${i}`),e||(t+=" (stub)"),t},o.people.toString=function(){return`${o.toString(1)}.people (stub)`},n="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" "),r=0;r<n.length;r++)s(o,n[r]);t._i.push([e,a,i])},t.__SV=1.2,i=e.createElement("script"),i.type="text/javascript",i.async=!0,i.src="undefined"!=typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:("file:"===e.location.protocol&&"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//),"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js"),(a=e.getElementsByTagName("script")[0]).parentNode.insertBefore(i,a)}}(document,window.mixpanel||[]),mixpanel.init(Project.mixpanel)),Project.sentry&&void 0!==i&&i.init({dsn:Project.sentry,environment:Project.env,release:!0}),Project.delighted&&function(e,t,a,n){if(!e[n]){for(var r=e[n]=[],i=["survey","reset","config","init","set","get","event","identify","track","page","screen","group","alias"],s=0;s<i.length;s++){const e=i[s];r[e]=r[e]||function(e){return function(){const t=Array.prototype.slice.call(arguments);r.push([e,t])}}(e)}r.SNIPPET_VERSION="1.0.1";const o=t.createElement("script");o.type="text/javascript",o.async=!0,o.src=`https://d2yyd1h5u9mauk.cloudfront.net/integrations/web/v1/library/${a}/${n}.js`;const l=t.getElementsByTagName("script")[0];l.parentNode.insertBefore(o,l)}}(window,document,Project.delighted,"delighted")},40733:(e,t,a)=>{"use strict";var n=a(41669);Object.defineProperty(t,"__esModule",{value:!0}),t.setInterceptClose=void 0;var r,i=a(40961),s=(r=a(96540))&&r.__esModule?r:{default:r},o=a(32799),l=a(69733);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u.apply(this,arguments)}function c(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let d;a(52754);t.setInterceptClose=e=>{d=e};const p=class extends s.default.Component{constructor(...e){super(...e),c(this,"close",(()=>{this.props.onClose&&this.props.onClose(),n(ReactDOM.findDOMNode(this)).off("hidden.bs.modal",this._closed),n(ReactDOM.findDOMNode(this)).off("shown.bs.modal",this._shown),n(ReactDOM.findDOMNode(this)).modal("hide"),setTimeout((()=>{ReactDOM.unmountComponentAtNode(document.getElementById("confirm"==this.props.type?"confirm":this.props.isModal2?"modal2":"modal")),document.body.classList.remove("modal-open")}),500)})),c(this,"_closed",(()=>{this.props.onClose&&this.props.onClose(),ReactDOM.unmountComponentAtNode(document.getElementById("confirm"==this.props.type?"confirm":this.props.isModal2?"modal2":"modal")),document.body.classList.remove("modal-open")}))}componentDidMount(){"confirm"!==this.props.type&&(this.props.isModal2?window.closeModal2=this.close:window.closeModal=this.close),n(ReactDOM.findDOMNode(this)).on("hidden.bs.modal",this._closed),n(ReactDOM.findDOMNode(this)).on("shown.bs.modal",this._shown),n(ReactDOM.findDOMNode(this)).modal({background:!0,show:!0}),this.props.addCloseInterception&&n(ReactDOM.findDOMNode(this)).on("hide.bs.modal",(function(e){if(d)return e.preventDefault(),e.stopPropagation(),d().then((e=>{e&&(d=null,n(ReactDOM.findDOMNode(this)).modal("hide"))})),!1}))}show(){n(ReactDOM.findDOMNode(this)).on("hidden.bs.modal",this.unmount),n(ReactDOM.findDOMNode(this)).modal("show"),n(ReactDOM.findDOMNode(this)).style=""}_shown(){this.isVisible=!0}render(){return s.default.createElement(l.Provider,{store:(0,o.getStore)()},this.props.children)}};p.propTypes={children:RequiredElement,onClose:OptionalFunc};const m=class extends s.default.Component{constructor(...e){super(...e),c(this,"close",(()=>{this.props.isModal2?closeModal2():closeModal()}))}header(){return this.props.header||""}body(){return this.props.body||""}footer(){return this.props.footer||""}render(){return s.default.createElement(p,{addCloseInterception:!0,onClose:this.props.onClose,isModal2:this.props.isModal2,ref:"modal"},s.default.createElement("div",{tabIndex:"-1",className:`modal ${this.props.className?this.props.className:"alert fade expand"}`,role:"dialog","aria-hidden":"true"},s.default.createElement("div",{className:"modal-dialog "+(this.props.large?"modal-lg":"")},s.default.createElement("div",{className:"modal-content"},s.default.createElement("div",{className:"modal-header"},this.header(),isMobile?s.default.createElement("button",{onClick:()=>this.refs.modal.close(),className:"modal-close-btn"},s.default.createElement("span",{className:"icon ion-md-close"})):s.default.createElement("span",{onClick:this.close,className:"icon close ion-md-close"})),s.default.createElement("div",{className:"modal-body"},this.body()),s.default.createElement("div",{className:"modal-footer"},this.footer())))))}};m.propTypes={body:OptionalNode,footer:OptionalNode,header:OptionalNode};const f=class extends s.default.Component{constructor(...e){super(...e),c(this,"onNo",(e=>{e?.preventDefault(),this.props.onNo&&this.props.onNo(),this.refs.modal.close()})),c(this,"onYes",(e=>{e?.preventDefault(),this.props.onYes&&this.props.onYes(),this.refs.modal.close()}))}header(){return this.props.header||""}body(){return this.props.body||""}closed(){this.onNo()}footer(){return s.default.createElement("div",{className:"modal-button"},s.default.createElement(Row,{style:{justifyContent:"flex-end"}},s.default.createElement(Column,null,s.default.createElement("a",{href:"#",className:"btn-link btn-link-secondary",id:"confirm-btn-no",onClick:this.onNo},this.props.noText||"No")),s.default.createElement(Column,null,s.default.createElement("a",{href:"#",className:"btn-link btn-link-secondary","data-test":"confirm-btn-yes",id:"confirm-btn-yes",onClick:this.onYes},this.props.yesText||"Yes"))))}render(){return s.default.createElement(p,{onClose:this.props.onNo,ref:"modal",type:"confirm"},s.default.createElement("div",{tabIndex:"-1",className:"modal alert modal-confirm fade expand",role:"dialog","aria-hidden":"true"},s.default.createElement("div",{className:"modal-dialog"},s.default.createElement("div",{className:"modal-content"},s.default.createElement("div",{className:"modal-header"},this.header()),s.default.createElement("div",{className:"modal-body"},this.body()),s.default.createElement("div",{className:"modal-footer"},this.footer())))))}};f.propTypes={body:OptionalNode,header:OptionalNode,noText:OptionalString,onNo:OptionalFunc,onYes:OptionalFunc,yesText:OptionalString},t.openModal=(e,t,a,n)=>{(0,i.render)(s.default.createElement(m,u({header:e,footer:a,body:t},n)),document.getElementById("modal"))},t.openModal2=(e,t,a,n)=>{(0,i.render)(s.default.createElement(m,u({isModal2:!0,header:e,footer:a,body:t},n)),document.getElementById("modal2"))},t.openConfirm=(e,t,a,n,r,o)=>{(0,i.render)(s.default.createElement(f,{header:e,onYes:a,onNo:n,body:t,yesText:r,noText:o}),document.getElementById("confirm"))}},34466:(e,t,a)=>{"use strict";var n=s(a(61758));a(78624);var r=a(53348),i=s(a(55248));function s(e){return e&&e.__esModule?e:{default:e}}window.AppState=r.AppState,window.NetInfo=r.NetInfo,window.Clipboard=r.Clipboard,window.AsyncStorage=r.AsyncStorage,window.Switch=i.default,window.Promise||(window.Promise=n.default),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let e=1;e<arguments.length;e++){const a=arguments[e];if(null!=a)for(const e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t})},50231:(e,t,a)=>{"use strict";var n,r,i=a(96540),s=v(a(80003)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(54242)),l=v(a(31529)),u=v(a(27240)),c=v(a(34086)),d=v(a(54050)),p=v(a(92431)),m=v(a(27704)),f=v(a(42736)),g=v(a(74339));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function v(e){return e&&e.__esModule?e:{default:e}}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E.apply(this,arguments)}function y(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}window.AppActions=a(6837),window.Actions=a(60472),window.ES6Component=a(49355),window.IdentityProvider=a(98126),window.AccountProvider=a(8803),window.AccountStore=f.default,window.FeatureListProvider=a(54354),window.OrganisationProvider=a(12310),window.ProjectProvider=a(57765),window.OrganisationSelect=a(23338),window.Paging=u.default,window.Gif=a(79224),window.Row=a(72203),window.Flex=a(51404),window.Column=a(71709),window.InputGroup=p.default,window.Input=d.default,window.Button=o.default,window.ButtonOutline=o.ButtonOutline,window.ButtonLink=o.ButtonLink,window.ButtonProject=o.ButtonProject,window.FormGroup=a(78034),window.Panel=a(27601),window.FormGroup=a(78034),window.PanelSearch=m.default,window.FeatureValue=a(6291),window.CodeHelp=a(63790),window.Loader=(y(n=class extends i.PureComponent{render(){return React.createElement("svg",{className:"loader",version:"1.1",id:"loader-1",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",style:{enableBackground:"0 0 50 50"}},React.createElement("path",{fill:"#6633ff",d:"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z"},React.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})))}},"displayName","Loader"),n),window.Tooltip=g.default,a.g.ToggleChip=c.default,a.g.RemoveIcon=l.default,a.g.Select=(y(r=class extends i.PureComponent{render(){const e=this.props;return React.createElement(s.default,E({className:"react-select",classNamePrefix:"react-select"},e))}},"displayName","Select"),r)},13456:(e,t,a)=>{"use strict";var n,r,i,s=(n=a(32485))&&n.__esModule?n:{default:n};function o(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l=(o(r=class extends React.Component{componentDidMount(){setTimeout(this.props.remove,this.props.expiry)}render(){const e=(0,s.default)({"alert alert-warning fade":!0,in:!this.props.isRemoving,"removing out":this.props.isRemoving,"toast-message":!0});return React.createElement("div",{className:e},React.createElement("a",{onClick:this.props.remove,className:"pull-xs-right"},React.createElement("span",{className:"icon ion-md-close"})),this.props.children)}},"displayName","Message"),r);l.defaultProps={expiry:5e3},l.propTypes={children:OptionalNode,content:OptionalNode,expiry:OptionalNumber,isRemoving:OptionalBool,remove:RequiredFunc},e.exports=l;const u=(i=class extends React.Component{constructor(e,t){super(e,t),o(this,"toast",((e,t)=>{const a=this.state.messages,n=Utils.GUID();a.unshift({content:e,expiry:t,id:n}),this.setState({messages:a})})),o(this,"remove",(e=>{const t=_.findIndex(this.state.messages,{id:e}),a=this.state.messages;t>-1&&(a[t].isRemoving=!0,setTimeout((()=>{const t=_.findIndex(this.state.messages,{id:e}),a=this.state.messages;a.splice(t,1),this.setState({messages:a})}),500),this.setState({messages:a}))})),this.state={messages:[]},window.toast=this.toast}render(){return React.createElement("div",{className:"toast-messages"},this.state.messages.map((e=>React.createElement(l,{key:e.id,isRemoving:e.isRemoving,remove:()=>this.remove(e.id),expiry:e.expiry},e.content))))}},o(i,"displayName","ToastMessages"),i);e.exports=u},3159:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=y(a(96540)),r=a(38654),i=y(a(7089)),s=y(a(58361)),o=y(a(56389)),l=y(a(59247)),u=y(a(32172)),c=y(a(83849)),d=y(a(98304)),p=y(a(75553)),m=y(a(18410)),f=y(a(71633)),g=y(a(98966)),h=y(a(50789)),v=y(a(1303)),E=y(a(24349));function y(e){return e&&e.__esModule?e:{default:e}}t.default=n.default.createElement(i.default,null,n.default.createElement(r.Switch,null,n.default.createElement(r.Route,{path:"/",exact:!0,component:s.default}),n.default.createElement(r.Route,{path:"/login",exact:!0,component:s.default}),n.default.createElement(r.Route,{path:"/404",exact:!0,component:f.default}),n.default.createElement(r.Route,{path:"/signup",exact:!0,component:s.default}),n.default.createElement(r.Route,{path:"/signup",exact:!0,component:s.default}),n.default.createElement(r.Route,{path:"/home",exact:!0,component:s.default}),n.default.createElement(r.Route,{path:"/projects",exact:!0,component:l.default}),n.default.createElement(r.Route,{path:"/maintenance",exact:!0,component:o.default}),n.default.createElement(r.Route,{path:"/password-reset/confirm/:uid/:token/",exact:!0,component:g.default}),n.default.createElement(r.Route,{path:"/project/:projectId/environment/:environmentId/features",exact:!0,component:p.default}),n.default.createElement(r.Route,{path:"/project/:projectId/environment/:environmentId/change-requests/:id",exact:!0,component:v.default}),n.default.createElement(r.Route,{path:"/project/:projectId/environment/:environmentId/scheduled-changes/:id",exact:!0,component:v.default}),n.default.createElement(r.Route,{path:"/oauth/:type",exact:!0,component:s.default}),n.default.createElement(r.Route,{path:"/saml",exact:!0,component:s.default}),n.default.createElement(r.Route,{path:"/project/:projectId/environment/:environmentId/users",exact:!0,component:u.default}),n.default.createElement(r.Route,{path:"/project/:projectId/environment/:environmentId/users/:identity",exact:!0,component:d.default}),n.default.createElement(r.Route,{path:"/project/:projectId/environment/:environmentId/users/:identity/:id",exact:!0,component:c.default}),n.default.createElement(r.Route,{path:"/project/:projectId/environment/:environmentId/segments",exact:!0,component:m.default}),n.default.createElement(r.Route,{path:"/project/:projectId/environment/:environmentId/audit-log",exact:!0,component:E.default}),n.default.createElement(r.Route,{path:"/project/:projectId/audit-log",exact:!0,component:E.default}),n.default.createElement(r.Route,{path:"*",component:h.default})))},7066:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a.p+"d988cc149cbf5ec589d86cb0c34ddd68.png"},2398:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a.p+"bb1ac0dd27f69d1ca24828ba30cc0f70.webp"},61778:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a.p+"fafe25b2025a3c97162e86f60e2fdf55.png"},65548:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a.p+"b7c8d3898ce2681a14a4a737c437a9a2.png"},95596:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a.p+"f66d2dc2b22de1f85469aae6c5afdc80.png"},75431:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a.p+"1560b21127e40cf181c6c614122f6a3a.png"},33738:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a.p+"aae2e54c126cbe5ea582257aabdc2ef4.png"},14175:(e,t,a)=>{"use strict";a.r(t)},9049:()=>{},91902:()=>{},43446:()=>{},57811:()=>{},68462:()=>{}}]);
//# sourceMappingURL=661.188f7a5405410063126d.js.map